<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* ... (vos variables CSS) ... */
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
        .logout-button {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        background-color: #e74c3c;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button:hover {
        background-color: #c0392b;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .logout-button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button i {
        font-size: 16px;
    }

    @media (max-width: 768px) {
        .logout-button {
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 12px;
        }
    }
      .database-selector {
        margin-bottom: 20px;
    }

    .database-selector select {
        padding: 10px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        color: var(--text-color);
        cursor: pointer;
    }

    .database-selector select:focus {
        outline: none;
        border-color: var(--primary-color);
    }
    </style>
</head>
<body>
<button onclick="logout()" class="logout-button">
    <i class="fas fa-sign-out-alt"></i> Déconnexion
</button>
    <div class="container">
        <h1>Gestion des tickets</h1>

        <div class="database-selector">
            <label for="databaseSelect">Choisir la base de données : </label>
            <select id="databaseSelect" onchange="changeDatabase()">
                <option value="TicketsTotal">TicketsTotal</option>
                <option value="TicketsTransit">TicketsTransit</option>
            </select>
        </div>

        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".json,.csv,.txt" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editId" placeholder="ID" disabled>
            <input type="text" id="editCategory" placeholder="Catégorie">
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newCategory" placeholder="Catégorie">
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
const _0x114f1f=_0x1c4f;(function(_0x3417a3,_0x2216b4){const _0x4aa7bc=_0x1c4f,_0x472190=_0x3417a3();while(!![]){try{const _0x242558=-parseInt(_0x4aa7bc(0x203))/0x1+parseInt(_0x4aa7bc(0x20e))/0x2+-parseInt(_0x4aa7bc(0x255))/0x3*(parseInt(_0x4aa7bc(0x23f))/0x4)+-parseInt(_0x4aa7bc(0x20a))/0x5+-parseInt(_0x4aa7bc(0x254))/0x6+-parseInt(_0x4aa7bc(0x20b))/0x7+parseInt(_0x4aa7bc(0x215))/0x8;if(_0x242558===_0x2216b4)break;else _0x472190['push'](_0x472190['shift']());}catch(_0x3aa3d6){_0x472190['push'](_0x472190['shift']());}}}(_0x4ed6,0x37555));const firebaseConfig={'apiKey':_0x114f1f(0x221),'authDomain':_0x114f1f(0x24e),'databaseURL':_0x114f1f(0x21d),'projectId':_0x114f1f(0x1b2),'storageBucket':_0x114f1f(0x1b0),'messagingSenderId':_0x114f1f(0x224),'appId':_0x114f1f(0x1ce),'measurementId':_0x114f1f(0x1c4)};firebase['initializeApp'](firebaseConfig);const database=firebase[_0x114f1f(0x22c)]();let allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,currentDatabase=_0x114f1f(0x23e),editingCategory='',editingIndex=-0x1,editingId='';function _0x4ed6(){const _0x29f11e=['querySelectorAll','innerHTML','forEach','splice','txt','213170lmGYzs','category','\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTotal!','Erreur\x20d\x27importation:','ticketCategories','N/A','750ivzrnl','244951KrAswq','addEventListener','getElementById','228228XCpmwJ','files','target','value','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','3565104jMbvId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Tickets\x20en\x20transit</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_Transit\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20TicketsTransit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_Transit\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27TicketsTransit\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(null)\x22>Supprimer\x20tous\x20les\x20tickets</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_Transit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.','Ticket\x20introuvable.','ref','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.','utilisateur','https://cyberdemo-a38fc-default-rtdb.firebaseio.com','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.','user','.json','AIzaSyCqYu8n0ct6KcMhiEvTKO74mh824PrNXfk','Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier','searchBar','560596573477','priceInput','length','error','match','none',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(\x27','from','database','addTicketModal','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','indexOf','Erreur\x20lors\x20de\x20la\x20modification:','set','Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!','parse','tickets_export_','getItem','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTransit!','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide','\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20','data:text/json;charset=utf-8,','Format\x20JSON\x20invalide\x20pour\x20TicketsTotal','editPassword','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_Transit\x22\x20value=\x22','TicketsTotal','103516Rosqtw','importFile','/ip\x20hotspot\x20user','update','val','isLoggedIn','replace','editCategory','map','then','json','readAsText','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?','pop','block','cyberdemo-a38fc.firebaseapp.com','Ticket\x20modifié\x20avec\x20succès!','editUser','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','display','Importation\x20réussie\x20!','42942kRXcxP','9dJMiqZ','id-',',null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x27,\x20','Erreur\x20lors\x20de\x20la\x20suppression:','editCategoryModal','tickets','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket','onload','cyberdemo-a38fc.firebasestorage.app','now','cyberdemo-a38fc','priceModal','input[name^=\x22ticketSelect_','stringify','download','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','clear','password','editPrice','toLowerCase','textContent','login.html','editTicketModal','\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_','appendChild','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','newUser','G-XH1RH6DYK5','includes','editCategoryName','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:','flex','Ticket\x20supprimé\x20avec\x20succès!','push','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','editId','1:560596573477:web:f576224af5650fc081cecc','remove','name','loadingIndicator','csv','location','\x22]:checked','catch','Format\x20de\x20fichier\x20non\x20supporté','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_','TicketsTransit\x20Import','Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','Erreur\x20lors\x20de\x20l\x27importation:','price','trim','Tous\x20les\x20champs\x20sont\x20obligatoires','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTransit(\x27','motDePasse','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(null)\x22>Supprimer\x20les\x20tickets\x20sélectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_','\x22\x20value=\x22','click','newPassword','Catégorie\x20modifiée\x20avec\x20succès!','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?','result','newCategory','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','body','DOMContentLoaded','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie','</span>','Aucun\x20ticket\x20valide\x20trouvé\x20dans\x20le\x20fichier\x20pour\x20TicketsTransit','<span\x20class=\x22highlight\x22>','prix','TicketsTransit','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22editCategory(\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27','split','newPrice','style','sort','createElement','\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27','setAttribute','keys'];_0x4ed6=function(){return _0x29f11e;};return _0x4ed6();}(function(){const _0x34c18b=_0x114f1f,_0x3739ef=sessionStorage[_0x34c18b(0x236)](_0x34c18b(0x244));!_0x3739ef&&window[_0x34c18b(0x1d3)]['replace']('login.html');}()),document[_0x114f1f(0x20c)](_0x114f1f(0x1ec),function(){const _0x1ff393=_0x114f1f;!sessionStorage['getItem'](_0x1ff393(0x244))&&window[_0x1ff393(0x1d3)][_0x1ff393(0x245)](_0x1ff393(0x1bd));}),window[_0x114f1f(0x20c)]('pageshow',function(_0x3a4064){const _0xe4993=_0x114f1f;(_0x3a4064['persisted']||!sessionStorage[_0xe4993(0x236)]('isLoggedIn'))&&window['location'][_0xe4993(0x245)](_0xe4993(0x1bd));});function showLoading(){const _0x1c2514=_0x114f1f;document['getElementById'](_0x1c2514(0x1d1))[_0x1c2514(0x1f8)]['display']=_0x1c2514(0x1c9);}function hideLoading(){const _0x23f91c=_0x114f1f;document['getElementById']('loadingIndicator')[_0x23f91c(0x1f8)][_0x23f91c(0x252)]=_0x23f91c(0x229);}function loadTickets(){const _0x5366b9=_0x114f1f;showLoading();const _0x3d1d1c=database[_0x5366b9(0x21a)](currentDatabase);_0x3d1d1c['on'](_0x5366b9(0x211),_0x586ca8=>{const _0x124060=_0x5366b9;allTickets=_0x586ca8[_0x124060(0x243)]()||{},displayTickets(allTickets),hideLoading();},_0x47b000=>{const _0x34c785=_0x5366b9;console[_0x34c785(0x227)](_0x34c785(0x214),_0x47b000),hideLoading(),alert('Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.');});}function displayTickets(_0x2a20fd,_0x5b9398=''){const _0x478e28=_0x114f1f,_0x3a107f=document[_0x478e28(0x20d)]('ticketCategories');_0x3a107f[_0x478e28(0x1ff)]='';if(currentDatabase==='TicketsTotal')displayTicketsTotal(_0x2a20fd,_0x5b9398);else currentDatabase===_0x478e28(0x1f2)&&displayTicketsTransit(_0x2a20fd,_0x5b9398);}function displayTicketsTotal(_0x4ebb3a,_0x1be9e6=''){const _0x348bb2=_0x114f1f,_0x318af9=document['getElementById'](_0x348bb2(0x208));for(let _0x16517f in _0x4ebb3a){const _0x5ebc9c=_0x4ebb3a[_0x16517f],_0x3a316a='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>'+_0x16517f+_0x348bb2(0x1f4)+_0x16517f+_0x348bb2(0x1bf)+_0x16517f+_0x348bb2(0x1e2)+_0x16517f+_0x348bb2(0x239)+_0x16517f+_0x348bb2(0x1d7)+_0x16517f+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27'+_0x16517f+_0x348bb2(0x1fb)+_0x16517f+_0x348bb2(0x205)+_0x16517f+_0x348bb2(0x213)+_0x16517f+_0x348bb2(0x1a9)+generateTicketRowsTotal(_0x16517f,_0x5ebc9c,_0x1be9e6)+_0x348bb2(0x1f5)+_0x16517f+_0x348bb2(0x1ea)+_0x16517f+_0x348bb2(0x22e);_0x318af9[_0x348bb2(0x1ff)]+=_0x3a316a;}}function generateTicketRowsTotal(_0x268f32,_0x543d61,_0x5d886e){const _0x415d91=_0x114f1f;let _0x3be2fc='';for(let _0x1cb3c2=0x0;_0x1cb3c2<_0x543d61[_0x415d91(0x1e0)][_0x415d91(0x226)];_0x1cb3c2++){if(_0x5d886e&&!matchesSearchTotal(_0x543d61,_0x1cb3c2,_0x5d886e))continue;_0x3be2fc+=_0x415d91(0x1c0)+_0x268f32+_0x415d91(0x1e3)+_0x1cb3c2+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x543d61[_0x415d91(0x1e0)][_0x1cb3c2],_0x5d886e)+_0x415d91(0x251)+highlightMatch(_0x543d61['prix'][_0x1cb3c2],_0x5d886e)+_0x415d91(0x251)+highlightMatch(_0x543d61['utilisateur'][_0x1cb3c2],_0x5d886e)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTotal(\x27'+_0x268f32+_0x415d91(0x1aa)+_0x1cb3c2+_0x415d91(0x22a)+_0x268f32+'\x27,\x20'+_0x1cb3c2+_0x415d91(0x257);}return _0x3be2fc;}function displayTicketsTransit(_0x11afc4,_0x7284af=''){const _0x245c0b=_0x114f1f,_0x54b398=document['getElementById'](_0x245c0b(0x208));_0x54b398['innerHTML']='';const _0x4cb406=_0x245c0b(0x216)+generateTicketRowsTransit(_0x11afc4,_0x7284af)+_0x245c0b(0x1e1);_0x54b398[_0x245c0b(0x1ff)]=_0x4cb406;}function generateTicketRowsTransit(_0x2efa21,_0x20a1f9){const _0x25368b=_0x114f1f;let _0x11f906='';for(let _0x5daafe in _0x2efa21){const _0x3e4ee3=_0x2efa21[_0x5daafe];if(_0x20a1f9&&!matchesSearchTransit(_0x3e4ee3,_0x20a1f9))continue;_0x11f906+=_0x25368b(0x23d)+_0x5daafe+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x5daafe,_0x20a1f9)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x3e4ee3['category'],_0x20a1f9)+_0x25368b(0x251)+highlightMatch(_0x3e4ee3[_0x25368b(0x1b9)],_0x20a1f9)+_0x25368b(0x251)+highlightMatch(_0x3e4ee3[_0x25368b(0x1dc)],_0x20a1f9)+_0x25368b(0x251)+highlightMatch(_0x3e4ee3[_0x25368b(0x21f)],_0x20a1f9)+_0x25368b(0x1df)+_0x5daafe+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(null,null,\x20\x27'+_0x5daafe+_0x25368b(0x1cc);}return _0x11f906;}function editTicketTransit(_0x469bb5){const _0x20b4ff=_0x114f1f,_0x2d2967=allTickets[_0x469bb5];_0x2d2967?(editingId=_0x469bb5,document[_0x20b4ff(0x20d)](_0x20b4ff(0x1cd))[_0x20b4ff(0x211)]=_0x469bb5,document[_0x20b4ff(0x20d)]('editCategory')[_0x20b4ff(0x211)]=_0x2d2967[_0x20b4ff(0x204)],document[_0x20b4ff(0x20d)]('editPassword')[_0x20b4ff(0x211)]=_0x2d2967[_0x20b4ff(0x1b9)],document[_0x20b4ff(0x20d)]('editPrice')['value']=_0x2d2967[_0x20b4ff(0x1dc)],document['getElementById'](_0x20b4ff(0x250))['value']=_0x2d2967[_0x20b4ff(0x21f)],document[_0x20b4ff(0x20d)](_0x20b4ff(0x1be))[_0x20b4ff(0x1f8)][_0x20b4ff(0x252)]='block'):alert(_0x20b4ff(0x219));}function saveTicketEdit(){const _0x322883=_0x114f1f,_0x12b0e6=document[_0x322883(0x20d)](_0x322883(0x23c))[_0x322883(0x211)],_0x50a437=document[_0x322883(0x20d)](_0x322883(0x1ba))[_0x322883(0x211)],_0x7e0dc8=document['getElementById'](_0x322883(0x250))[_0x322883(0x211)],_0x5e2688=document['getElementById'](_0x322883(0x246))['value'];if(!_0x12b0e6||!_0x50a437||!_0x7e0dc8||!_0x5e2688){alert(_0x322883(0x1de));return;}showLoading();if(currentDatabase===_0x322883(0x23e)){const _0x3c1230=allTickets[editingCategory];_0x3c1230['motDePasse'][editingIndex]=_0x12b0e6,_0x3c1230['prix'][editingIndex]=_0x50a437,_0x3c1230[_0x322883(0x21c)][editingIndex]=_0x7e0dc8;const _0x14deeb={[currentDatabase+'/'+editingCategory]:_0x3c1230};database[_0x322883(0x21a)]()['update'](_0x14deeb)['then'](()=>{const _0xbea3bf=_0x322883;hideLoading(),closeEditModal(),alert(_0xbea3bf(0x24f));})[_0x322883(0x1d5)](_0x534910=>{const _0x1f602e=_0x322883;console['error'](_0x1f602e(0x231),_0x534910),hideLoading(),alert(_0x1f602e(0x1d9));});}else{if(currentDatabase===_0x322883(0x1f2)){const _0x48c531=database[_0x322883(0x21a)](currentDatabase+'/'+editingId);_0x48c531[_0x322883(0x242)]({'category':_0x5e2688,'password':_0x12b0e6,'price':_0x50a437,'user':_0x7e0dc8})[_0x322883(0x248)](()=>{const _0x2409d0=_0x322883;hideLoading(),closeEditModal(),alert(_0x2409d0(0x24f));})[_0x322883(0x1d5)](_0x53485b=>{const _0x43e760=_0x322883;console['error'](_0x43e760(0x231),_0x53485b),hideLoading(),alert(_0x43e760(0x1d9));});}}}function editTicketTotal(_0x4b68f4,_0x5cb6b2){const _0x5d8f67=_0x114f1f;editingCategory=_0x4b68f4,editingIndex=_0x5cb6b2;const _0x38aaf1=allTickets[_0x4b68f4];document[_0x5d8f67(0x20d)](_0x5d8f67(0x1cd))[_0x5d8f67(0x211)]='',document[_0x5d8f67(0x20d)](_0x5d8f67(0x246))[_0x5d8f67(0x211)]=_0x4b68f4,document[_0x5d8f67(0x20d)]('editPassword')[_0x5d8f67(0x211)]=_0x38aaf1[_0x5d8f67(0x1e0)][_0x5cb6b2],document[_0x5d8f67(0x20d)](_0x5d8f67(0x1ba))[_0x5d8f67(0x211)]=_0x38aaf1[_0x5d8f67(0x1f1)][_0x5cb6b2],document[_0x5d8f67(0x20d)](_0x5d8f67(0x250))[_0x5d8f67(0x211)]=_0x38aaf1['utilisateur'][_0x5cb6b2],document[_0x5d8f67(0x20d)](_0x5d8f67(0x1be))[_0x5d8f67(0x1f8)][_0x5d8f67(0x252)]='block';}function importTicketsToCategory(_0x329c8a,_0x550f6e){const _0x4e2702=_0x114f1f,_0x3186f6=_0x550f6e[_0x4e2702(0x210)][_0x4e2702(0x20f)][0x0];if(!_0x3186f6)return;showLoading();const _0x2a3c96=new FileReader();_0x2a3c96[_0x4e2702(0x1af)]=function(_0x32ac68){const _0x9e2bb2=_0x4e2702;try{const _0x4fa81a=_0x3186f6[_0x9e2bb2(0x1d0)][_0x9e2bb2(0x1f6)]('.')[_0x9e2bb2(0x24c)]()[_0x9e2bb2(0x1bb)]();if(_0x4fa81a===_0x9e2bb2(0x249))handleJsonImportToCategory(_0x32ac68['target'][_0x9e2bb2(0x1e8)],_0x329c8a);else{if(_0x4fa81a==='csv')handleCsvImportToCategory(_0x32ac68['target'][_0x9e2bb2(0x1e8)],_0x329c8a);else{if(_0x4fa81a===_0x9e2bb2(0x202))handleTxtImportToCategory(_0x32ac68[_0x9e2bb2(0x210)]['result'],_0x329c8a);else throw new Error('Format\x20de\x20fichier\x20non\x20supporté');}}}catch(_0x39f733){console[_0x9e2bb2(0x227)]('Erreur\x20d\x27importation:',_0x39f733),hideLoading(),alert(_0x9e2bb2(0x21e));}},_0x2a3c96[_0x4e2702(0x24a)](_0x3186f6);}function handleJsonImportToCategory(_0x3ba462,_0x26f1b2){const _0x595b6e=_0x114f1f,_0xc5d9a9=JSON['parse'](_0x3ba462);if(currentDatabase==='TicketsTransit')for(let _0x41e72f in _0xc5d9a9){if(!_0xc5d9a9[_0x41e72f]['category']||!_0xc5d9a9[_0x41e72f][_0x595b6e(0x1b9)]||!_0xc5d9a9[_0x41e72f]['price']||!_0xc5d9a9[_0x41e72f]['user']){hideLoading(),alert('Format\x20JSON\x20invalide\x20pour\x20TicketsTransit');return;}}else{if(_0x26f1b2===_0x595b6e(0x1f2))for(let _0x7afbcc in _0xc5d9a9){if(!_0xc5d9a9[_0x7afbcc][_0x595b6e(0x204)]||!_0xc5d9a9[_0x7afbcc][_0x595b6e(0x1b9)]||!_0xc5d9a9[_0x7afbcc]['price']||!_0xc5d9a9[_0x7afbcc][_0x595b6e(0x21f)]){hideLoading(),alert('Format\x20JSON\x20invalide\x20pour\x20TicketsTransit');return;}}else{if(!_0xc5d9a9[_0x26f1b2]||!_0xc5d9a9[_0x26f1b2][_0x595b6e(0x1e0)]||!_0xc5d9a9[_0x26f1b2][_0x595b6e(0x1f1)]||!_0xc5d9a9[_0x26f1b2][_0x595b6e(0x21c)]){hideLoading(),alert(_0x595b6e(0x23b));return;}}}mergeTicketsToCategory(_0x26f1b2,_0xc5d9a9);}function handleCsvImportToCategory(_0x3525a6,_0x35bfc9){const _0x46143d=_0x114f1f,_0x1ee722=_0x3525a6['split']('\x0a');let _0x6562c8={};if(currentDatabase===_0x46143d(0x1f2)){let _0x4d2afd=[];for(let _0x389493=0x1;_0x389493<_0x1ee722[_0x46143d(0x226)];_0x389493++){if(!_0x1ee722[_0x389493][_0x46143d(0x1dd)]())continue;const _0x7bf8a=_0x1ee722[_0x389493]['split'](','),_0x4ee9a5=_0x7bf8a[0x0]?_0x7bf8a[0x0][_0x46143d(0x1dd)]():_0x46143d(0x256)+Date[_0x46143d(0x1b1)]()+'-'+_0x389493;_0x4d2afd['push']({'id':_0x4ee9a5,'category':_0x7bf8a[0x1]?_0x7bf8a[0x1][_0x46143d(0x1dd)]():_0x46143d(0x209),'password':_0x7bf8a[0x2]?_0x7bf8a[0x2][_0x46143d(0x1dd)]():'','price':_0x7bf8a[0x3]?_0x7bf8a[0x3][_0x46143d(0x1dd)]():'','user':_0x7bf8a[0x4]?_0x7bf8a[0x4][_0x46143d(0x1dd)]():''});}tempImportData={'tickets':_0x4d2afd},tempCategory=_0x46143d(0x1f2),showPriceModal(_0x46143d(0x1d8));}else{const _0x1115d8={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x1bf7bd=0x1;_0x1bf7bd<_0x1ee722[_0x46143d(0x226)];_0x1bf7bd++){if(!_0x1ee722[_0x1bf7bd]['trim']())continue;const _0x5b5db7=_0x1ee722[_0x1bf7bd][_0x46143d(0x1f6)](',');_0x1115d8['utilisateur'][_0x46143d(0x1cb)](_0x5b5db7[0x0][_0x46143d(0x1dd)]()),_0x1115d8[_0x46143d(0x1e0)][_0x46143d(0x1cb)](_0x5b5db7[0x1][_0x46143d(0x1dd)]()),_0x5b5db7[0x3]&&_0x1115d8[_0x46143d(0x1f1)][_0x46143d(0x1cb)](_0x5b5db7[0x3][_0x46143d(0x1dd)]());}!_0x1115d8['prix'][_0x46143d(0x226)]?(tempImportData={[_0x35bfc9]:_0x1115d8},tempCategory=_0x35bfc9,showPriceModal(_0x35bfc9)):mergeTicketsToCategory(_0x35bfc9,_0x1115d8);}}function handleTxtImportToCategory(_0xd06bae,_0x4c870e){const _0x34f1d8=_0x114f1f,_0x398c03=_0xd06bae[_0x34f1d8(0x1f6)]('\x0a');let _0x55b61a={};if(currentDatabase==='TicketsTransit'){const _0x2a8af0=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0x339cb5={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x2492c1 of _0x398c03){_0x2492c1=_0x2492c1[_0x34f1d8(0x1dd)]();if(!_0x2492c1||_0x2492c1===_0x34f1d8(0x241))continue;const _0x353f44=_0x2492c1[_0x34f1d8(0x228)](_0x2a8af0);if(_0x353f44){const [_0x1279e1,_0x12298e,_0x3c3cfa,_0x3bc0bd]=_0x353f44;_0x339cb5[_0x34f1d8(0x21c)][_0x34f1d8(0x1cb)](_0x12298e),_0x339cb5[_0x34f1d8(0x1e0)][_0x34f1d8(0x1cb)](_0x3c3cfa),_0x339cb5[_0x34f1d8(0x1f1)][_0x34f1d8(0x1cb)](_0x3bc0bd);}}for(let _0x2c4f51=0x0;_0x2c4f51<_0x339cb5[_0x34f1d8(0x21c)][_0x34f1d8(0x226)];_0x2c4f51++){const _0x1c76b6=_0x34f1d8(0x256)+Date[_0x34f1d8(0x1b1)]()+'-'+_0x2c4f51;_0x55b61a[_0x1c76b6]={'id':_0x1c76b6,'category':'Cadeau','password':_0x339cb5[_0x34f1d8(0x1e0)][_0x2c4f51],'price':'1','user':_0x339cb5['utilisateur'][_0x2c4f51]};}Object[_0x34f1d8(0x1fd)](_0x55b61a)[_0x34f1d8(0x226)]>0x0?mergeTicketsToCategory(null,_0x55b61a):(hideLoading(),alert(_0x34f1d8(0x1ef)));}else{const _0x1e60db=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x3cefca of _0x398c03){_0x3cefca=_0x3cefca[_0x34f1d8(0x1dd)]();if(!_0x3cefca||_0x3cefca===_0x34f1d8(0x241))continue;const _0x447be2=_0x3cefca[_0x34f1d8(0x228)](_0x1e60db);if(_0x447be2){const [_0x4c9a86,_0x3f672e,_0x220336,_0x252585]=_0x447be2;!_0x55b61a[_0x252585]&&(_0x55b61a[_0x252585]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x55b61a[_0x252585][_0x34f1d8(0x21c)]['push'](_0x3f672e),_0x55b61a[_0x252585][_0x34f1d8(0x1e0)][_0x34f1d8(0x1cb)](_0x220336);}}if(Object[_0x34f1d8(0x1fd)](_0x55b61a)[_0x34f1d8(0x226)]===0x0){hideLoading(),alert(_0x34f1d8(0x222));return;}tempImportData=_0x55b61a;const _0x24cc14=Object[_0x34f1d8(0x1fd)](_0x55b61a)[0x0];showPriceModal(_0x24cc14);}}function mergeTicketsToCategory(_0x16fd22,_0x3c6d19){const _0x5982f3=_0x114f1f;let _0xfbfc37={};if(currentDatabase===_0x5982f3(0x1f2))for(let _0x2c994c in _0x3c6d19){_0xfbfc37[currentDatabase+'/'+_0x2c994c]=_0x3c6d19[_0x2c994c];}else{!allTickets[_0x16fd22]&&(allTickets[_0x16fd22]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0x4bb69b=allTickets[_0x16fd22],_0x4eabc1={'motDePasse':[..._0x4bb69b[_0x5982f3(0x1e0)],..._0x3c6d19[_0x5982f3(0x1e0)]],'prix':[..._0x4bb69b[_0x5982f3(0x1f1)],..._0x3c6d19[_0x5982f3(0x1f1)]],'utilisateur':[..._0x4bb69b['utilisateur'],..._0x3c6d19[_0x5982f3(0x21c)]]};_0xfbfc37[currentDatabase+'/'+_0x16fd22]=_0x4eabc1;}database[_0x5982f3(0x21a)]()[_0x5982f3(0x242)](_0xfbfc37)['then'](()=>{const _0x46d999=_0x5982f3;hideLoading(),alert('Importation\x20réussie\x20dans\x20'+(_0x16fd22||_0x46d999(0x1f2))+'!');})['catch'](_0x3a8419=>{const _0xa1c067=_0x5982f3;console[_0xa1c067(0x227)](_0xa1c067(0x1db),_0x3a8419),hideLoading(),alert(_0xa1c067(0x1b7));});}function editCategory(_0x564c0f){const _0x51d7d0=_0x114f1f;currentEditingCategory=_0x564c0f,document[_0x51d7d0(0x20d)]('editCategoryName')['value']=_0x564c0f,document[_0x51d7d0(0x20d)](_0x51d7d0(0x1ac))['style'][_0x51d7d0(0x252)]=_0x51d7d0(0x24d);}function saveCategoryEdit(){const _0x52b12a=_0x114f1f,_0x16cd09=document['getElementById'](_0x52b12a(0x1c6))['value'][_0x52b12a(0x1dd)]();if(!_0x16cd09){alert(_0x52b12a(0x238));return;}if(_0x16cd09===currentEditingCategory){closeEditCategoryModal();return;}showLoading();const _0x373402=allTickets[currentEditingCategory],_0x3b502f={[currentDatabase+'/'+currentEditingCategory]:null,[currentDatabase+'/'+_0x16cd09]:_0x373402};database[_0x52b12a(0x21a)]()[_0x52b12a(0x242)](_0x3b502f)['then'](()=>{const _0x3e2321=_0x52b12a;hideLoading(),closeEditCategoryModal(),alert(_0x3e2321(0x1e6));})[_0x52b12a(0x1d5)](_0x1dea3e=>{const _0x41df2d=_0x52b12a;console['error'](_0x41df2d(0x1c8),_0x1dea3e),hideLoading(),alert(_0x41df2d(0x1ed));});}function showAddTicketModal(_0xde882c){const _0x264514=_0x114f1f;currentEditingCategory=_0xde882c,document[_0x264514(0x20d)](_0x264514(0x1e5))['value']='',document[_0x264514(0x20d)](_0x264514(0x1f7))[_0x264514(0x211)]='',document[_0x264514(0x20d)](_0x264514(0x1c3))['value']='',document['getElementById']('newCategory')[_0x264514(0x211)]='',document[_0x264514(0x20d)](_0x264514(0x22d))[_0x264514(0x1f8)][_0x264514(0x252)]=_0x264514(0x24d);}function saveNewTicket(){const _0x5004cc=_0x114f1f;showLoading();if(currentDatabase==='TicketsTransit'){const _0xb52a5f='id-'+Date[_0x5004cc(0x1b1)](),_0x355400={'id':_0xb52a5f,'category':document['getElementById'](_0x5004cc(0x1e9))[_0x5004cc(0x211)]['trim'](),'password':document[_0x5004cc(0x20d)]('newPassword')[_0x5004cc(0x211)][_0x5004cc(0x1dd)](),'price':document['getElementById'](_0x5004cc(0x1f7))['value'][_0x5004cc(0x1dd)](),'user':document[_0x5004cc(0x20d)](_0x5004cc(0x1c3))[_0x5004cc(0x211)][_0x5004cc(0x1dd)]()};database['ref'](currentDatabase+'/'+_0xb52a5f)[_0x5004cc(0x232)](_0x355400)[_0x5004cc(0x248)](()=>{const _0x4f04f5=_0x5004cc;hideLoading(),closeAddTicketModal(),alert(_0x4f04f5(0x237));})[_0x5004cc(0x1d5)](_0x13a7f0=>{const _0x1c4b84=_0x5004cc;console[_0x1c4b84(0x227)]('Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:',_0x13a7f0),hideLoading(),alert(_0x1c4b84(0x217));});}else{const _0x4e23be=currentEditingCategory,_0x235cba={'password':document[_0x5004cc(0x20d)](_0x5004cc(0x1e5))[_0x5004cc(0x211)][_0x5004cc(0x1dd)](),'price':document[_0x5004cc(0x20d)](_0x5004cc(0x1f7))[_0x5004cc(0x211)]['trim'](),'user':document[_0x5004cc(0x20d)]('newUser')[_0x5004cc(0x211)][_0x5004cc(0x1dd)]()},_0xae359f=allTickets[_0x4e23be]||{'motDePasse':[],'prix':[],'utilisateur':[]};_0xae359f['motDePasse']['push'](_0x235cba[_0x5004cc(0x1b9)]),_0xae359f[_0x5004cc(0x1f1)][_0x5004cc(0x1cb)](_0x235cba[_0x5004cc(0x1dc)]),_0xae359f[_0x5004cc(0x21c)][_0x5004cc(0x1cb)](_0x235cba[_0x5004cc(0x21f)]),database[_0x5004cc(0x21a)](currentDatabase+'/'+_0x4e23be)['set'](_0xae359f)['then'](()=>{const _0x222a57=_0x5004cc;hideLoading(),closeAddTicketModal(),alert(_0x222a57(0x206));})[_0x5004cc(0x1d5)](_0x4381b0=>{const _0x2caf01=_0x5004cc;console[_0x2caf01(0x227)]('Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:',_0x4381b0),hideLoading(),alert(_0x2caf01(0x217));});}}function closeEditModal(){const _0x1342d4=_0x114f1f;document[_0x1342d4(0x20d)](_0x1342d4(0x1be))[_0x1342d4(0x1f8)][_0x1342d4(0x252)]=_0x1342d4(0x229),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0x3c5f9b=_0x114f1f;document['getElementById'](_0x3c5f9b(0x1ac))[_0x3c5f9b(0x1f8)][_0x3c5f9b(0x252)]=_0x3c5f9b(0x229),currentEditingCategory=null;}function closeAddTicketModal(){const _0x3c7bbf=_0x114f1f;document[_0x3c7bbf(0x20d)]('addTicketModal')['style'][_0x3c7bbf(0x252)]='none',currentEditingCategory=null;}function matchesSearchTotal(_0x5da38a,_0x3ca59b,_0x5957bd){const _0x5be3ed=_0x114f1f,_0x56bc9c=_0x5957bd[_0x5be3ed(0x1bb)]();return _0x5da38a[_0x5be3ed(0x1e0)][_0x3ca59b][_0x5be3ed(0x1bb)]()[_0x5be3ed(0x1c5)](_0x56bc9c)||_0x5da38a[_0x5be3ed(0x1f1)][_0x3ca59b][_0x5be3ed(0x1bb)]()[_0x5be3ed(0x1c5)](_0x56bc9c)||_0x5da38a['utilisateur'][_0x3ca59b][_0x5be3ed(0x1bb)]()[_0x5be3ed(0x1c5)](_0x56bc9c);}function matchesSearchTransit(_0x35e2cd,_0x4cada3){const _0x3f219d=_0x114f1f,_0x40d2dd=_0x4cada3[_0x3f219d(0x1bb)]();return _0x35e2cd['id']&&_0x35e2cd['id'][_0x3f219d(0x1bb)]()[_0x3f219d(0x1c5)](_0x40d2dd)||_0x35e2cd['category']&&_0x35e2cd[_0x3f219d(0x204)][_0x3f219d(0x1bb)]()['includes'](_0x40d2dd)||_0x35e2cd[_0x3f219d(0x1b9)]&&_0x35e2cd[_0x3f219d(0x1b9)][_0x3f219d(0x1bb)]()[_0x3f219d(0x1c5)](_0x40d2dd)||_0x35e2cd[_0x3f219d(0x1dc)]&&_0x35e2cd[_0x3f219d(0x1dc)]['toLowerCase']()[_0x3f219d(0x1c5)](_0x40d2dd)||_0x35e2cd[_0x3f219d(0x21f)]&&_0x35e2cd[_0x3f219d(0x21f)]['toLowerCase']()[_0x3f219d(0x1c5)](_0x40d2dd);}function matchesSearch(_0x2aca30,_0x1bb7a6,_0x333bd8){const _0x2a42a5=_0x114f1f;if(currentDatabase===_0x2a42a5(0x23e))return matchesSearchTotal(_0x2aca30,_0x1bb7a6,_0x333bd8);else{if(currentDatabase===_0x2a42a5(0x1f2))return matchesSearchTransit(_0x2aca30,_0x333bd8);}return![];}function highlightMatch(_0xd6ab57,_0x8f398e){const _0x3f6fb8=_0x114f1f;if(!_0x8f398e)return _0xd6ab57;const _0x4902f6=new RegExp(_0x8f398e,'gi');return _0xd6ab57[_0x3f6fb8(0x245)](_0x4902f6,_0x226759=>_0x3f6fb8(0x1f0)+_0x226759+_0x3f6fb8(0x1ee));}function deleteTicket(_0x4539f9,_0xb669d7,_0x55a93b){const _0x2f7520=_0x114f1f;if(confirm(_0x2f7520(0x1e7))){showLoading();if(currentDatabase===_0x2f7520(0x1f2))database[_0x2f7520(0x21a)](currentDatabase+'/'+_0x55a93b)[_0x2f7520(0x1cf)]()[_0x2f7520(0x248)](()=>{hideLoading(),alert('Ticket\x20supprimé\x20avec\x20succès!');})[_0x2f7520(0x1d5)](_0xe7835d=>{const _0xa37c93=_0x2f7520;console[_0xa37c93(0x227)](_0xa37c93(0x1ab),_0xe7835d),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket');});else{const _0x412ac2=allTickets[_0x4539f9];_0x412ac2[_0x2f7520(0x1e0)][_0x2f7520(0x201)](_0xb669d7,0x1),_0x412ac2[_0x2f7520(0x1f1)]['splice'](_0xb669d7,0x1),_0x412ac2[_0x2f7520(0x21c)][_0x2f7520(0x201)](_0xb669d7,0x1),database[_0x2f7520(0x21a)](currentDatabase+'/'+_0x4539f9)['set'](_0x412ac2)[_0x2f7520(0x248)](()=>{const _0x4477c0=_0x2f7520;hideLoading(),alert(_0x4477c0(0x1ca));})[_0x2f7520(0x1d5)](_0x4a15a6=>{const _0x350b88=_0x2f7520;console[_0x350b88(0x227)]('Erreur\x20lors\x20de\x20la\x20suppression:',_0x4a15a6),hideLoading(),alert(_0x350b88(0x1ae));});}}}function deleteSelectedTickets(_0x3a94d0){const _0x29d6eb=_0x114f1f,_0x49ee3a=document[_0x29d6eb(0x1fe)](_0x29d6eb(0x1b4)+(_0x3a94d0||'Transit')+_0x29d6eb(0x1d4));if(_0x49ee3a[_0x29d6eb(0x226)]===0x0){alert(_0x29d6eb(0x1f3));return;}if(confirm(_0x29d6eb(0x24b))){showLoading();const _0x137e72={};if(currentDatabase===_0x29d6eb(0x1f2))_0x49ee3a[_0x29d6eb(0x200)](_0x17edca=>{const _0x4abc35=_0x29d6eb,_0x5bc62e=_0x17edca[_0x4abc35(0x211)];_0x137e72[currentDatabase+'/'+_0x5bc62e]=null;});else{const _0x4ffd06=allTickets[_0x3a94d0],_0x1e5e6d=Array[_0x29d6eb(0x22b)](_0x49ee3a)[_0x29d6eb(0x247)](_0x353cdf=>parseInt(_0x353cdf[_0x29d6eb(0x211)]))[_0x29d6eb(0x1f9)]((_0x1ef98e,_0x3c6656)=>_0x3c6656-_0x1ef98e);_0x1e5e6d[_0x29d6eb(0x200)](_0x22402c=>{const _0x1a0ba5=_0x29d6eb;_0x4ffd06['motDePasse'][_0x1a0ba5(0x201)](_0x22402c,0x1),_0x4ffd06[_0x1a0ba5(0x1f1)][_0x1a0ba5(0x201)](_0x22402c,0x1),_0x4ffd06[_0x1a0ba5(0x21c)][_0x1a0ba5(0x201)](_0x22402c,0x1);}),_0x137e72[currentDatabase+'/'+_0x3a94d0]=_0x4ffd06;}database[_0x29d6eb(0x21a)]()['update'](_0x137e72)[_0x29d6eb(0x248)](()=>{hideLoading(),alert('Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!');})['catch'](_0x2d700b=>{const _0x3aac92=_0x29d6eb;console[_0x3aac92(0x227)](_0x3aac92(0x1ab),_0x2d700b),hideLoading(),alert(_0x3aac92(0x22f));});}}function deleteAllTicketsInCategory(_0x5c78f9){const _0x55738b=_0x114f1f;confirm(_0x55738b(0x1c7)+(_0x5c78f9||'TicketsTransit')+'\x20?')&&(showLoading(),currentDatabase===_0x55738b(0x1f2)?database[_0x55738b(0x21a)](currentDatabase)[_0x55738b(0x232)]({})[_0x55738b(0x248)](()=>{hideLoading(),alert('Tous\x20les\x20tickets\x20ont\x20été\x20supprimés\x20avec\x20succès!');})['catch'](_0x45f010=>{const _0x6f155d=_0x55738b;console[_0x6f155d(0x227)]('Erreur\x20lors\x20de\x20la\x20suppression:',_0x45f010),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets');}):database[_0x55738b(0x21a)](currentDatabase+'/'+_0x5c78f9)[_0x55738b(0x232)]({'motDePasse':[],'prix':[],'utilisateur':[]})['then'](()=>{const _0x63014a=_0x55738b;hideLoading(),alert(_0x63014a(0x233));})[_0x55738b(0x1d5)](_0x4d97c4=>{const _0x1bd5b1=_0x55738b;console['error'](_0x1bd5b1(0x1ab),_0x4d97c4),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets');}));}function exportTickets(){const _0x426391=_0x114f1f,_0x5dc915=_0x426391(0x23a)+encodeURIComponent(JSON[_0x426391(0x1b5)](allTickets,null,0x2)),_0x5da14a=document[_0x426391(0x1fa)]('a');_0x5da14a[_0x426391(0x1fc)]('href',_0x5dc915),_0x5da14a['setAttribute'](_0x426391(0x1b6),_0x426391(0x235)+currentDatabase+_0x426391(0x220)),document[_0x426391(0x1eb)][_0x426391(0x1c1)](_0x5da14a),_0x5da14a['click'](),_0x5da14a[_0x426391(0x1cf)]();}function exportFilteredTickets(){const _0x54a7a8=_0x114f1f,_0x1a2452=document[_0x54a7a8(0x20d)](_0x54a7a8(0x223))[_0x54a7a8(0x211)][_0x54a7a8(0x1dd)](),_0x15a2f6={};if(currentDatabase===_0x54a7a8(0x1f2))for(let _0x122cf1 in allTickets){(!_0x1a2452||matchesSearchTransit(allTickets[_0x122cf1],_0x1a2452))&&(_0x15a2f6[_0x122cf1]=allTickets[_0x122cf1]);}else for(let _0x2b02db in allTickets){const _0x421c7d=allTickets[_0x2b02db];_0x15a2f6[_0x2b02db]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0xef3f0=0x0;_0xef3f0<_0x421c7d['motDePasse']['length'];_0xef3f0++){(!_0x1a2452||matchesSearchTotal(_0x421c7d,_0xef3f0,_0x1a2452))&&(_0x15a2f6[_0x2b02db][_0x54a7a8(0x1e0)][_0x54a7a8(0x1cb)](_0x421c7d[_0x54a7a8(0x1e0)][_0xef3f0]),_0x15a2f6[_0x2b02db][_0x54a7a8(0x1f1)]['push'](_0x421c7d[_0x54a7a8(0x1f1)][_0xef3f0]),_0x15a2f6[_0x2b02db][_0x54a7a8(0x21c)][_0x54a7a8(0x1cb)](_0x421c7d['utilisateur'][_0xef3f0]));}}const _0x106525='data:text/json;charset=utf-8,'+encodeURIComponent(JSON['stringify'](_0x15a2f6,null,0x2)),_0x662c38=document['createElement']('a');_0x662c38['setAttribute']('href',_0x106525),_0x662c38[_0x54a7a8(0x1fc)](_0x54a7a8(0x1b6),'filtered_tickets_export_'+currentDatabase+_0x54a7a8(0x220)),document[_0x54a7a8(0x1eb)]['appendChild'](_0x662c38),_0x662c38[_0x54a7a8(0x1e4)](),_0x662c38[_0x54a7a8(0x1cf)]();}function handleJsonImport(_0x1e2aa8){const _0x3b9517=_0x114f1f,_0x2a7d03=JSON[_0x3b9517(0x234)](_0x1e2aa8);if(confirm(_0x3b9517(0x21b))){const _0x292425={};for(let _0x1a3540 in _0x2a7d03){allTickets[_0x1a3540]?_0x292425[currentDatabase+'/'+_0x1a3540]={'motDePasse':[...allTickets[_0x1a3540][_0x3b9517(0x1e0)],..._0x2a7d03[_0x1a3540][_0x3b9517(0x1e0)]],'prix':[...allTickets[_0x1a3540][_0x3b9517(0x1f1)],..._0x2a7d03[_0x1a3540][_0x3b9517(0x1f1)]],'utilisateur':[...allTickets[_0x1a3540][_0x3b9517(0x21c)],..._0x2a7d03[_0x1a3540][_0x3b9517(0x21c)]]}:_0x292425[currentDatabase+'/'+_0x1a3540]=_0x2a7d03[_0x1a3540];}database['ref']()[_0x3b9517(0x242)](_0x292425)[_0x3b9517(0x248)](()=>{const _0x4409b7=_0x3b9517;hideLoading(),alert(_0x4409b7(0x253));})[_0x3b9517(0x1d5)](_0x158ebe=>{const _0x284b79=_0x3b9517;console[_0x284b79(0x227)](_0x284b79(0x1db),_0x158ebe),hideLoading(),alert(_0x284b79(0x1b7));});}else hideLoading();}function handleCsvImport(_0x2864f0){const _0x4d5514=_0x114f1f,_0x434299=_0x2864f0[_0x4d5514(0x1f6)]('\x0a');let _0x30d027={};if(currentDatabase===_0x4d5514(0x1f2)){let _0x4e49af=[];for(let _0x38bfc9=0x1;_0x38bfc9<_0x434299[_0x4d5514(0x226)];_0x38bfc9++){if(!_0x434299[_0x38bfc9][_0x4d5514(0x1dd)]())continue;const _0x485108=_0x434299[_0x38bfc9][_0x4d5514(0x1f6)](','),_0x221e36=_0x485108[0x0]?_0x485108[0x0][_0x4d5514(0x1dd)]():_0x4d5514(0x256)+Date['now']()+'-'+_0x38bfc9;_0x4e49af[_0x4d5514(0x1cb)]({'id':_0x221e36,'category':_0x485108[0x1]?_0x485108[0x1][_0x4d5514(0x1dd)]():'N/A','password':_0x485108[0x2]?_0x485108[0x2][_0x4d5514(0x1dd)]():'','price':_0x485108[0x3]?_0x485108[0x3][_0x4d5514(0x1dd)]():'','user':_0x485108[0x4]?_0x485108[0x4]['trim']():''});}tempImportData={'tickets':_0x4e49af},tempCategory=_0x4d5514(0x1f2),showPriceModal(_0x4d5514(0x1d8));}else{for(let _0x40396c=0x1;_0x40396c<_0x434299[_0x4d5514(0x226)];_0x40396c++){if(!_0x434299[_0x40396c][_0x4d5514(0x1dd)]())continue;const _0x76b1f6=_0x434299[_0x40396c][_0x4d5514(0x1f6)](','),_0x1d0de6=_0x76b1f6[0x2][_0x4d5514(0x1dd)]();!_0x30d027[_0x1d0de6]&&(_0x30d027[_0x1d0de6]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x30d027[_0x1d0de6][_0x4d5514(0x21c)][_0x4d5514(0x1cb)](_0x76b1f6[0x0][_0x4d5514(0x1dd)]()),_0x30d027[_0x1d0de6][_0x4d5514(0x1e0)][_0x4d5514(0x1cb)](_0x76b1f6[0x1][_0x4d5514(0x1dd)]());}tempImportData=_0x30d027;const _0x45684c=Object[_0x4d5514(0x1fd)](_0x30d027)[0x0];showPriceModal(_0x45684c);}}function handleTxtImport(_0x592ad9){const _0x44bb09=_0x114f1f,_0x29e3ff=_0x592ad9[_0x44bb09(0x1f6)]('\x0a');let _0xfc461a={};if(currentDatabase===_0x44bb09(0x1f2)){const _0x5a20fd=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0x395ea9=[];for(let _0x13c7ad of _0x29e3ff){_0x13c7ad=_0x13c7ad['trim']();if(!_0x13c7ad||_0x13c7ad==='/ip\x20hotspot\x20user')continue;const _0x553f35=_0x13c7ad[_0x44bb09(0x228)](_0x5a20fd);if(_0x553f35){const [_0x56a80a,_0x2af896,_0x651906,_0x17b743]=_0x553f35;_0x395ea9[_0x44bb09(0x1cb)]({'category':_0x17b743,'password':_0x651906,'user':_0x2af896});}}tempImportData={'tickets':_0x395ea9},tempCategory=_0x44bb09(0x1f2),showPriceModal(_0x44bb09(0x1d8));}else{const _0x5d84cb=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x55eae0 of _0x29e3ff){_0x55eae0=_0x55eae0[_0x44bb09(0x1dd)]();if(!_0x55eae0||_0x55eae0===_0x44bb09(0x241))continue;const _0x3e3664=_0x55eae0[_0x44bb09(0x228)](_0x5d84cb);if(_0x3e3664){const [_0x3f9d1b,_0x3b7718,_0x3f6c02,_0x1c16c0]=_0x3e3664;!_0xfc461a[_0x1c16c0]&&(_0xfc461a[_0x1c16c0]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0xfc461a[_0x1c16c0][_0x44bb09(0x21c)][_0x44bb09(0x1cb)](_0x3b7718),_0xfc461a[_0x1c16c0]['motDePasse'][_0x44bb09(0x1cb)](_0x3f6c02);}}if(Object['keys'](_0xfc461a)[_0x44bb09(0x226)]===0x0){hideLoading(),alert(_0x44bb09(0x222));return;}tempImportData=_0xfc461a;const _0x7f3d78=Object[_0x44bb09(0x1fd)](_0xfc461a)[0x0];showPriceModal(_0x7f3d78);}}function _0x1c4f(_0x42c9bb,_0xd2acaa){const _0x4ed674=_0x4ed6();return _0x1c4f=function(_0x1c4f88,_0x46fc49){_0x1c4f88=_0x1c4f88-0x1a9;let _0x386dc4=_0x4ed674[_0x1c4f88];return _0x386dc4;},_0x1c4f(_0x42c9bb,_0xd2acaa);}function showPriceModal(_0x47d537){const _0x3dd996=_0x114f1f;tempCategory=_0x47d537,document['getElementById']('categoryName')[_0x3dd996(0x1bc)]=_0x47d537,document[_0x3dd996(0x20d)](_0x3dd996(0x1b3))[_0x3dd996(0x1f8)][_0x3dd996(0x252)]='block',document[_0x3dd996(0x20d)]('priceInput')[_0x3dd996(0x211)]='';}function confirmPrice(){const _0x5e5910=_0x114f1f,_0xcdfb1c=document[_0x5e5910(0x20d)](_0x5e5910(0x225))[_0x5e5910(0x211)]['trim']();if(!_0xcdfb1c){alert('Veuillez\x20entrer\x20un\x20prix');return;}if(currentDatabase==='TicketsTransit')tempImportData['tickets'][_0x5e5910(0x200)](_0xda8dac=>{const _0x207a8b=_0x5e5910;_0xda8dac[_0x207a8b(0x1dc)]=_0xcdfb1c;}),finishImportTransit();else{tempImportData[tempCategory]['prix']=Array(tempImportData[tempCategory][_0x5e5910(0x1e0)][_0x5e5910(0x226)])['fill'](_0xcdfb1c);const _0xc88174=Object[_0x5e5910(0x1fd)](tempImportData),_0x3d4603=_0xc88174[_0x5e5910(0x230)](tempCategory);_0x3d4603<_0xc88174['length']-0x1?(document[_0x5e5910(0x20d)]('priceInput')[_0x5e5910(0x211)]='',showPriceModal(_0xc88174[_0x3d4603+0x1])):finishImport();}}function cancelImport(){const _0x41ecb7=_0x114f1f;document[_0x41ecb7(0x20d)](_0x41ecb7(0x1b3))[_0x41ecb7(0x1f8)][_0x41ecb7(0x252)]=_0x41ecb7(0x229),currentDatabase===_0x41ecb7(0x1f2)&&(tempImportData=null),document[_0x41ecb7(0x20d)](_0x41ecb7(0x240))[_0x41ecb7(0x211)]='',tempCategory=null,hideLoading();}function finishImportTransit(){const _0x540696=_0x114f1f;if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?')){const _0xafc5ac={};tempImportData[_0x540696(0x1ad)][_0x540696(0x200)]((_0xe542c2,_0x28515f)=>{const _0x473dd7=_0x540696,_0x3626ad=_0xe542c2['id']||_0x473dd7(0x256)+Date[_0x473dd7(0x1b1)]()+'-'+_0x28515f;_0xafc5ac[currentDatabase+'/'+_0x3626ad]={'id':_0x3626ad,'category':_0xe542c2[_0x473dd7(0x204)],'password':_0xe542c2[_0x473dd7(0x1b9)],'price':_0xe542c2['price'],'user':_0xe542c2[_0x473dd7(0x21f)]};}),database[_0x540696(0x21a)]()[_0x540696(0x242)](_0xafc5ac)[_0x540696(0x248)](()=>{const _0x3c457c=_0x540696;document['getElementById'](_0x3c457c(0x1b3))['style']['display']=_0x3c457c(0x229),document[_0x3c457c(0x20d)](_0x3c457c(0x240))[_0x3c457c(0x211)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x3c457c(0x253));})[_0x540696(0x1d5)](_0x3e878b=>{const _0x14a616=_0x540696;console[_0x14a616(0x227)](_0x14a616(0x1db),_0x3e878b),hideLoading(),alert(_0x14a616(0x1b7));});}else cancelImport();}function finishImport(){const _0x443e8b=_0x114f1f;if(confirm(_0x443e8b(0x21b))){const _0x4443a6={};for(let _0x10b488 in tempImportData){allTickets[_0x10b488]?_0x4443a6[currentDatabase+'/'+_0x10b488]={'motDePasse':[...allTickets[_0x10b488][_0x443e8b(0x1e0)],...tempImportData[_0x10b488][_0x443e8b(0x1e0)]],'prix':[...allTickets[_0x10b488][_0x443e8b(0x1f1)],...tempImportData[_0x10b488]['prix']],'utilisateur':[...allTickets[_0x10b488][_0x443e8b(0x21c)],...tempImportData[_0x10b488]['utilisateur']]}:_0x4443a6[currentDatabase+'/'+_0x10b488]=tempImportData[_0x10b488];}database[_0x443e8b(0x21a)]()[_0x443e8b(0x242)](_0x4443a6)[_0x443e8b(0x248)](()=>{const _0x3fb431=_0x443e8b;document[_0x3fb431(0x20d)](_0x3fb431(0x1b3))[_0x3fb431(0x1f8)][_0x3fb431(0x252)]=_0x3fb431(0x229),document[_0x3fb431(0x20d)](_0x3fb431(0x240))[_0x3fb431(0x211)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x3fb431(0x253));})[_0x443e8b(0x1d5)](_0x1458f3=>{const _0x1b22a0=_0x443e8b;console['error']('Erreur\x20lors\x20de\x20l\x27importation:',_0x1458f3),hideLoading(),alert(_0x1b22a0(0x1b7));});}else cancelImport();}function importTickets(_0x1d582b){const _0x2096ca=_0x114f1f,_0x282a1f=_0x1d582b[_0x2096ca(0x210)][_0x2096ca(0x20f)][0x0];if(!_0x282a1f)return;showLoading();const _0x592da8=new FileReader();_0x592da8[_0x2096ca(0x1af)]=function(_0x32a3e1){const _0x1177f8=_0x2096ca;try{const _0x16726f=_0x282a1f[_0x1177f8(0x1d0)][_0x1177f8(0x1f6)]('.')['pop']()[_0x1177f8(0x1bb)]();if(_0x16726f==='json')handleJsonImport(_0x32a3e1[_0x1177f8(0x210)]['result']);else{if(_0x16726f===_0x1177f8(0x1d2))handleCsvImport(_0x32a3e1['target'][_0x1177f8(0x1e8)]);else{if(_0x16726f==='txt')handleTxtImport(_0x32a3e1[_0x1177f8(0x210)]['result']);else throw new Error(_0x1177f8(0x1d6));}}}catch(_0x3d4464){console[_0x1177f8(0x227)](_0x1177f8(0x207),_0x3d4464),hideLoading(),alert(_0x1177f8(0x21e));}},_0x592da8[_0x2096ca(0x24a)](_0x282a1f);}function deleteSearchResults(){const _0x254cab=_0x114f1f,_0x62789e=document[_0x254cab(0x20d)](_0x254cab(0x223))[_0x254cab(0x211)][_0x254cab(0x1dd)]();if(!_0x62789e){alert(_0x254cab(0x212));return;}if(confirm(_0x254cab(0x1c2))){showLoading();const _0x37b111={};if(currentDatabase===_0x254cab(0x1f2))for(let _0x365172 in allTickets){matchesSearchTransit(allTickets[_0x365172],_0x62789e)&&(_0x37b111[currentDatabase+'/'+_0x365172]=null);}else for(let _0x2a6218 in allTickets){const _0x134fd7=allTickets[_0x2a6218],_0x474ee8={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x404ee5=0x0;_0x404ee5<_0x134fd7[_0x254cab(0x1e0)]['length'];_0x404ee5++){!matchesSearchTotal(_0x134fd7,_0x404ee5,_0x62789e)&&(_0x474ee8[_0x254cab(0x1e0)][_0x254cab(0x1cb)](_0x134fd7[_0x254cab(0x1e0)][_0x404ee5]),_0x474ee8[_0x254cab(0x1f1)][_0x254cab(0x1cb)](_0x134fd7['prix'][_0x404ee5]),_0x474ee8[_0x254cab(0x21c)][_0x254cab(0x1cb)](_0x134fd7[_0x254cab(0x21c)][_0x404ee5]));}_0x37b111[currentDatabase+'/'+_0x2a6218]=_0x474ee8;}database[_0x254cab(0x21a)]()[_0x254cab(0x242)](_0x37b111)[_0x254cab(0x248)](()=>{const _0x4b9f3f=_0x254cab;hideLoading(),alert(_0x4b9f3f(0x218));})['catch'](_0x56a26a=>{const _0x260d1e=_0x254cab;console['error']('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:',_0x56a26a),hideLoading(),alert(_0x260d1e(0x1da));});}}function searchTickets(){const _0x1dd814=_0x114f1f,_0x4df8de=document['getElementById'](_0x1dd814(0x223))['value'][_0x1dd814(0x1dd)]();displayTickets(allTickets,_0x4df8de);}function checkAuth(){const _0x4d9abb=_0x114f1f,_0x3bd7e2=sessionStorage[_0x4d9abb(0x236)]('isLoggedIn');if(!_0x3bd7e2)return window[_0x4d9abb(0x1d3)][_0x4d9abb(0x245)]('login.html'),![];return!![];}function changeDatabase(){const _0x29f4eb=_0x114f1f;currentDatabase=document[_0x29f4eb(0x20d)]('databaseSelect')['value'],loadTickets();}window[_0x114f1f(0x1af)]=()=>{checkAuth()&&loadTickets();};function logout(){const _0x526e51=_0x114f1f;sessionStorage[_0x526e51(0x1b8)](),window['location']['replace'](_0x526e51(0x1bd));}document[_0x114f1f(0x20d)](_0x114f1f(0x223))['addEventListener']('input',searchTickets),window[_0x114f1f(0x1af)]=()=>{checkAuth()&&loadTickets();};
            </script>
    
</body>
</html>