const _0x19304f=_0x3ff5;(function(_0x59a23b,_0x6e4681){const _0x24dcc0=_0x3ff5,_0x42a0ba=_0x59a23b();while(!![]){try{const _0xcf5595=-parseInt(_0x24dcc0(0x1ae))/0x1*(-parseInt(_0x24dcc0(0x19d))/0x2)+parseInt(_0x24dcc0(0x1ac))/0x3*(-parseInt(_0x24dcc0(0x1bc))/0x4)+-parseInt(_0x24dcc0(0x19c))/0x5+-parseInt(_0x24dcc0(0x156))/0x6*(parseInt(_0x24dcc0(0x1c9))/0x7)+-parseInt(_0x24dcc0(0x192))/0x8*(-parseInt(_0x24dcc0(0x1b6))/0x9)+parseInt(_0x24dcc0(0x1e6))/0xa+-parseInt(_0x24dcc0(0x15a))/0xb*(-parseInt(_0x24dcc0(0x18f))/0xc);if(_0xcf5595===_0x6e4681)break;else _0x42a0ba['push'](_0x42a0ba['shift']());}catch(_0x1eb5d5){_0x42a0ba['push'](_0x42a0ba['shift']());}}}(_0x36eb,0x4287a));const firebaseConfig={'apiKey':_0x19304f(0x1b0),'authDomain':_0x19304f(0x1f9),'databaseURL':_0x19304f(0x1c7),'projectId':_0x19304f(0x15b),'storageBucket':_0x19304f(0x179),'messagingSenderId':_0x19304f(0x177),'appId':_0x19304f(0x180),'measurementId':_0x19304f(0x181)};firebase[_0x19304f(0x1f2)](firebaseConfig);const database=firebase['database'](),adminRef=database['ref'](_0x19304f(0x1dd)),loginForm=document[_0x19304f(0x163)](_0x19304f(0x1bb)),signupForm=document[_0x19304f(0x163)](_0x19304f(0x149)),loginContainer=document[_0x19304f(0x163)]('loginContainer'),signupContainer=document[_0x19304f(0x163)](_0x19304f(0x1db)),dashboardContainer=document['getElementById'](_0x19304f(0x1d1)),salesForm=document[_0x19304f(0x163)]('salesForm'),salesTable=document[_0x19304f(0x163)]('salesTable'),totalSalesElement=document[_0x19304f(0x163)](_0x19304f(0x1ee)),averageSalesElement=document[_0x19304f(0x163)](_0x19304f(0x1f5)),userInfoElement=document[_0x19304f(0x163)](_0x19304f(0x17c)),toggleAnalysisButton=document['getElementById']('toggleAnalysisButton'),toggleSalesButton=document['getElementById'](_0x19304f(0x170)),analysisSection=document[_0x19304f(0x163)](_0x19304f(0x1c8)),salesDetailsSection=document[_0x19304f(0x163)](_0x19304f(0x1dc)),signupButton=document[_0x19304f(0x163)](_0x19304f(0x14b)),loginFromSignup=document[_0x19304f(0x163)]('loginFromSignup'),productSelect=document['getElementById'](_0x19304f(0x153)),stockTableGlobal=document[_0x19304f(0x163)](_0x19304f(0x1df));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x19304f(0x163)]('dateTime')[_0x19304f(0x172)]=new Date()['toISOString']()[_0x19304f(0x1ef)](0x0,0x10);function fetchTicketCategories(){const _0x207ee8=_0x19304f;database[_0x207ee8(0x1e2)](_0x207ee8(0x1e8))[_0x207ee8(0x1f6)](_0x207ee8(0x172))['then'](_0x5165b6=>{const _0x563ec4=_0x207ee8;ticketCategories=_0x5165b6[_0x563ec4(0x15d)]()||{},populateProductSelect();});}function populateProductSelect(){const _0x6ff9e3=_0x19304f;productSelect['innerHTML']=_0x6ff9e3(0x18a);for(const _0x5f26cb in ticketCategories){const _0x2d308b=ticketCategories[_0x5f26cb][_0x6ff9e3(0x188)][0x0],_0x2cf41f=document[_0x6ff9e3(0x148)](_0x6ff9e3(0x1e1));_0x2cf41f[_0x6ff9e3(0x172)]=_0x5f26cb,_0x2cf41f[_0x6ff9e3(0x1b8)]=_0x5f26cb+'\x20('+_0x2d308b+'\x20FCFA)',productSelect[_0x6ff9e3(0x1c1)](_0x2cf41f);}}fetchTicketCategories(),loginForm['addEventListener'](_0x19304f(0x174),function(_0x1732e5){const _0x3acfe7=_0x19304f;_0x1732e5['preventDefault']();const _0x6c0ac4=document['getElementById'](_0x3acfe7(0x1f8))[_0x3acfe7(0x172)],_0x179fc6=document[_0x3acfe7(0x163)]('password')[_0x3acfe7(0x172)];database['ref']('users/'+_0x6c0ac4)[_0x3acfe7(0x1f6)](_0x3acfe7(0x172))[_0x3acfe7(0x1c0)](_0x3d3bf8=>{const _0x2101b1=_0x3acfe7;_0x3d3bf8[_0x2101b1(0x1ea)]()?_0x3d3bf8[_0x2101b1(0x15d)]()[_0x2101b1(0x1b5)]===_0x179fc6?loginSuccess(_0x6c0ac4):alert('Mot\x20de\x20passe\x20incorrect'):alert(_0x2101b1(0x1eb));});}),signupForm[_0x19304f(0x199)]('submit',function(_0x554c9a){const _0x15919f=_0x19304f;_0x554c9a[_0x15919f(0x1bd)]();const _0x40a7ed=document[_0x15919f(0x163)]('signupUsername')[_0x15919f(0x172)],_0x24c4db=document['getElementById'](_0x15919f(0x1c4))['value'];database[_0x15919f(0x1e2)](_0x15919f(0x178)+_0x40a7ed)[_0x15919f(0x1f6)](_0x15919f(0x172))[_0x15919f(0x1c0)](_0x259c2b=>{const _0x4840aa=_0x15919f;_0x259c2b[_0x4840aa(0x1ea)]()?alert(_0x4840aa(0x187)):database[_0x4840aa(0x1e2)]('users/'+_0x40a7ed)[_0x4840aa(0x173)]({'password':_0x24c4db})['then'](()=>{const _0xc25639=_0x4840aa;alert(_0xc25639(0x151)),signupContainer[_0xc25639(0x1e5)][_0xc25639(0x1ec)]='none',loginContainer[_0xc25639(0x1e5)][_0xc25639(0x1ec)]='block';})['catch'](_0x212791=>{const _0x9f69a=_0x4840aa;console[_0x9f69a(0x17f)](_0x9f69a(0x1a4),_0x212791),alert(_0x9f69a(0x1f3));});});}),signupButton[_0x19304f(0x199)](_0x19304f(0x1fa),function(){const _0x1b603c=_0x19304f;loginContainer['style'][_0x1b603c(0x1ec)]=_0x1b603c(0x1a0),signupContainer[_0x1b603c(0x1e5)]['display']='block';}),loginFromSignup[_0x19304f(0x199)](_0x19304f(0x1fa),function(){const _0x334bed=_0x19304f;signupContainer[_0x334bed(0x1e5)][_0x334bed(0x1ec)]=_0x334bed(0x1a0),loginContainer[_0x334bed(0x1e5)][_0x334bed(0x1ec)]=_0x334bed(0x184);});function loginSuccess(_0x159fbe){const _0x15c202=_0x19304f;currentUser=_0x159fbe,loginContainer[_0x15c202(0x1e5)][_0x15c202(0x1ec)]=_0x15c202(0x1a0),signupContainer[_0x15c202(0x1e5)]['display']=_0x15c202(0x1a0),dashboardContainer[_0x15c202(0x1e5)]['display']='block',userInfoElement[_0x15c202(0x1b8)]=_0x15c202(0x1e0)+_0x159fbe,checkSubscriptionStatus()[_0x15c202(0x1c0)](_0x3cbba=>{_0x3cbba?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x15c202(0x1a1)](_0x46abb0=>{const _0x1c6528=_0x15c202;console[_0x1c6528(0x17f)](_0x1c6528(0x18e),_0x46abb0),alert(_0x1c6528(0x1a7));});}function listenForSalesDataChanges(){const _0x526721=_0x19304f;salesDataListener=database[_0x526721(0x1e2)]('sales/'+currentUser)['on']('value',_0x542768=>{const _0x1c5a6e=_0x526721;salesData=[],_0x542768[_0x1c5a6e(0x1d0)](_0x59497a=>{const _0x33ff43=_0x1c5a6e,_0x427353=_0x59497a[_0x33ff43(0x15d)]();_0x427353[_0x33ff43(0x198)]=_0x59497a['key'],_0x427353[_0x33ff43(0x16f)]=(_0x427353['V']*_0x427353['PV'])[_0x33ff43(0x154)](0x2),salesData[_0x33ff43(0x18d)](_0x427353);}),analysisSection[_0x1c5a6e(0x1e5)]['display']===_0x1c5a6e(0x184)&&updateAnalysis(salesData);});}document[_0x19304f(0x163)](_0x19304f(0x153))[_0x19304f(0x199)](_0x19304f(0x190),function(){const _0x5141da=_0x19304f,_0x43bcf6=this[_0x5141da(0x172)];database[_0x5141da(0x1e2)](_0x5141da(0x1ab)+currentUser)[_0x5141da(0x15c)](_0x5141da(0x153))[_0x5141da(0x1c6)](_0x43bcf6)[_0x5141da(0x185)](0x1)[_0x5141da(0x1f6)]('value')[_0x5141da(0x1c0)](_0x209a7b=>{const _0x51e857=_0x5141da;if(_0x209a7b[_0x51e857(0x1ea)]()){const _0x3dae74=Object[_0x51e857(0x17d)](_0x209a7b['val']())[0x0];document['getElementById']('SI')['value']=_0x3dae74['SF']||0x0;}else document[_0x51e857(0x163)]('SI')[_0x51e857(0x172)]=0x0;}),updatePV();}),document[_0x19304f(0x163)]('V')[_0x19304f(0x199)]('input',updateSF),document[_0x19304f(0x163)](_0x19304f(0x17a))[_0x19304f(0x199)](_0x19304f(0x1e3),updateSF);function updateSF(){const _0x4fda37=_0x19304f,_0x185f33=parseInt(document[_0x4fda37(0x163)]('SI')[_0x4fda37(0x172)])||0x0,_0x47d2a8=parseInt(document[_0x4fda37(0x163)](_0x4fda37(0x17a))[_0x4fda37(0x172)])||0x0,_0x244630=parseInt(document[_0x4fda37(0x163)]('V')['value'])||0x0;document['getElementById']('SF')['value']=_0x185f33+_0x47d2a8-_0x244630;}function updatePV(){const _0x3bd487=_0x19304f,_0x4f2fc6=document[_0x3bd487(0x163)]('product')[_0x3bd487(0x172)],_0x1b776d=ticketCategories[_0x4f2fc6]?.['prix'][0x0];document[_0x3bd487(0x163)]('PV')[_0x3bd487(0x172)]=_0x1b776d||0x0;}salesForm['addEventListener'](_0x19304f(0x174),function(_0x32900b){const _0x4c8957=_0x19304f;_0x32900b[_0x4c8957(0x1bd)]();const _0x3ad197={'dateTime':document['getElementById'](_0x4c8957(0x1d6))['value'],'product':document[_0x4c8957(0x163)](_0x4c8957(0x153))[_0x4c8957(0x172)],'SI':parseInt(document[_0x4c8957(0x163)]('SI')['value'])||0x0,'APP':parseInt(document[_0x4c8957(0x163)]('APP')[_0x4c8957(0x172)])||0x0,'V':parseInt(document[_0x4c8957(0x163)]('V')[_0x4c8957(0x172)])||0x0,'SF':parseInt(document[_0x4c8957(0x163)]('SF')['value'])||0x0,'PV':parseFloat(document[_0x4c8957(0x163)]('PV')[_0x4c8957(0x172)])||0x0};database[_0x4c8957(0x1e2)]('sales/'+currentUser)[_0x4c8957(0x18d)](_0x3ad197)[_0x4c8957(0x1c0)](()=>{const _0x46ea01=_0x4c8957;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x46ea01(0x1d3)](),document[_0x46ea01(0x163)](_0x46ea01(0x1d6))['value']=new Date()[_0x46ea01(0x1be)]()['slice'](0x0,0x10);})[_0x4c8957(0x1a1)](_0x4ec72e=>{const _0x439bf3=_0x4c8957;console[_0x439bf3(0x17f)](_0x439bf3(0x1ed),_0x4ec72e),alert(_0x439bf3(0x1f1));});});function updateTable(){const _0x5c4691=_0x19304f,_0x4c0ee5=salesTable[_0x5c4691(0x175)](_0x5c4691(0x1e7));_0x4c0ee5[_0x5c4691(0x1d8)]='',database[_0x5c4691(0x1e2)](_0x5c4691(0x1ab)+currentUser)[_0x5c4691(0x1f6)]('value')[_0x5c4691(0x1c0)](_0x2b391e=>{salesData=[],_0x2b391e['forEach'](_0x4b198b=>{const _0x421c2a=_0x3ff5,_0x5cfb91=_0x4b198b['val']();_0x5cfb91[_0x421c2a(0x16f)]=(_0x5cfb91['V']*_0x5cfb91['PV'])[_0x421c2a(0x154)](0x2),salesData[_0x421c2a(0x18d)](_0x5cfb91);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x5320fa=_0x19304f,_0x202b21=document[_0x5320fa(0x163)]('stockTableGlobal');_0x202b21[_0x5320fa(0x175)](_0x5320fa(0x1e7))[_0x5320fa(0x1d8)]='',database[_0x5320fa(0x1e2)]('sales/'+currentUser)[_0x5320fa(0x1f6)](_0x5320fa(0x172))['then'](_0x5e07a1=>{const _0x516fc0=_0x5320fa,_0x211527={};_0x5e07a1['forEach'](_0x1a65d4=>{const _0x45964f=_0x3ff5,_0x37e4f5=_0x1a65d4[_0x45964f(0x15d)]();(!_0x211527[_0x37e4f5[_0x45964f(0x153)]]||new Date(_0x37e4f5[_0x45964f(0x1d6)])>new Date(_0x211527[_0x37e4f5[_0x45964f(0x153)]][_0x45964f(0x1d6)]))&&(_0x211527[_0x37e4f5['product']]=_0x37e4f5);}),Object[_0x516fc0(0x17d)](_0x211527)[_0x516fc0(0x1d0)](_0x49ee01=>{const _0x57d4f1=_0x516fc0,_0x2c4c33=_0x202b21[_0x57d4f1(0x175)](_0x57d4f1(0x1e7))[_0x57d4f1(0x19f)]();_0x2c4c33['insertCell'](0x0)['textContent']=_0x49ee01[_0x57d4f1(0x153)],_0x2c4c33[_0x57d4f1(0x1da)](0x1)['textContent']=_0x49ee01['SF'],_0x2c4c33[_0x57d4f1(0x1da)](0x2)[_0x57d4f1(0x1b8)]=new Date(_0x49ee01['dateTime'])['toLocaleString']();}),setupSort(_0x202b21);});}function exportToExcel(){const _0x21f486=_0x19304f,_0x22bbf1=XLSX[_0x21f486(0x1b9)]['book_new'](),_0x57768f=XLSX[_0x21f486(0x1b9)][_0x21f486(0x1b2)](document[_0x21f486(0x163)]('salesTable'));XLSX[_0x21f486(0x1b9)][_0x21f486(0x18b)](_0x22bbf1,_0x57768f,_0x21f486(0x17b)),XLSX[_0x21f486(0x1aa)](_0x22bbf1,_0x21f486(0x186));}document[_0x19304f(0x163)](_0x19304f(0x14d))[_0x19304f(0x199)](_0x19304f(0x1fa),exportToExcel);function deleteEntry(_0x4e0adb){const _0x468275=_0x19304f;database[_0x468275(0x1e2)](_0x468275(0x1ab)+currentUser+'/'+_0x4e0adb)[_0x468275(0x1f6)](_0x468275(0x172))[_0x468275(0x1c0)](_0xd62aeb=>{const _0x3c00c0=_0x468275,_0x1368de=_0xd62aeb[_0x3c00c0(0x15d)]();return database[_0x3c00c0(0x1e2)](_0x3c00c0(0x1ab)+currentUser+'/'+_0x4e0adb)[_0x3c00c0(0x14a)]()['then'](()=>{return console['log']('Entr√©e\x20supprim√©e\x20avec\x20succ√®s'),updateStockAfterDeletion(_0x1368de);});})[_0x468275(0x1c0)](()=>{return updateTable();})['then'](()=>{updateStockTables(),updateAnalysis();})[_0x468275(0x1a1)](_0x3c8a6c=>{const _0x388fe6=_0x468275;console[_0x388fe6(0x17f)](_0x388fe6(0x1a6),_0x3c8a6c);});}function updateStockAfterDeletion(_0xb48e01){const _0x307a3a=_0x19304f;return database[_0x307a3a(0x1e2)](_0x307a3a(0x1ab)+currentUser)[_0x307a3a(0x15c)]('dateTime')[_0x307a3a(0x16b)](_0xb48e01[_0x307a3a(0x1d6)])['limitToLast'](0x2)[_0x307a3a(0x1f6)](_0x307a3a(0x172))[_0x307a3a(0x1c0)](_0x1db113=>{const _0x57c9fd=_0x307a3a;let _0x320355=[];_0x1db113[_0x57c9fd(0x1d0)](_0x2f3483=>{const _0x158a55=_0x57c9fd;_0x320355[_0x158a55(0x18d)]({'key':_0x2f3483[_0x158a55(0x198)],..._0x2f3483[_0x158a55(0x15d)]()});}),_0x320355['sort']((_0x22ef05,_0x5028f0)=>new Date(_0x5028f0[_0x57c9fd(0x1d6)])-new Date(_0x22ef05[_0x57c9fd(0x1d6)]));if(_0x320355['length']>0x1&&_0x320355[0x0][_0x57c9fd(0x198)]!==_0xb48e01[_0x57c9fd(0x198)]){const _0x393802=_0x320355[0x1],_0x3104b2=_0x393802['SF']+_0xb48e01['V']-_0xb48e01[_0x57c9fd(0x17a)];return database[_0x57c9fd(0x1e2)](_0x57c9fd(0x1ab)+currentUser+'/'+_0x393802['key'])[_0x57c9fd(0x183)]({'SF':_0x3104b2});}return Promise['resolve']();});}function updateTable(){const _0x1d76b4=_0x19304f;return database[_0x1d76b4(0x1e2)]('sales/'+currentUser)[_0x1d76b4(0x1f6)](_0x1d76b4(0x172))[_0x1d76b4(0x1c0)](_0x43cd68=>{const _0x317c2e=_0x1d76b4;salesData=[],_0x43cd68[_0x317c2e(0x1d0)](_0x224215=>{const _0x7b9045=_0x317c2e,_0x5141e6=_0x224215[_0x7b9045(0x15d)]();_0x5141e6[_0x7b9045(0x198)]=_0x224215[_0x7b9045(0x198)],_0x5141e6[_0x7b9045(0x16f)]=(_0x5141e6['V']*_0x5141e6['PV'])[_0x7b9045(0x154)](0x2),salesData[_0x7b9045(0x18d)](_0x5141e6);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x4c304f){const _0x334bae=_0x19304f,_0x304c1d=salesTable[_0x334bae(0x175)](_0x334bae(0x1e7));_0x304c1d[_0x334bae(0x1d8)]='',_0x4c304f[_0x334bae(0x1d0)](_0x25c8b3=>{const _0x5a512c=_0x334bae,_0x4b4bfa=_0x304c1d[_0x5a512c(0x19f)]();_0x4b4bfa[_0x5a512c(0x1b3)][_0x5a512c(0x198)]=_0x25c8b3[_0x5a512c(0x198)],_0x4b4bfa[_0x5a512c(0x1da)](0x0)[_0x5a512c(0x1b8)]=new Date(_0x25c8b3['dateTime'])['toLocaleString'](),_0x4b4bfa[_0x5a512c(0x1da)](0x1)[_0x5a512c(0x1b8)]=_0x25c8b3[_0x5a512c(0x153)],_0x4b4bfa[_0x5a512c(0x1da)](0x2)['textContent']=_0x25c8b3['SI'],_0x4b4bfa[_0x5a512c(0x1da)](0x3)[_0x5a512c(0x1b8)]=_0x25c8b3[_0x5a512c(0x17a)],_0x4b4bfa[_0x5a512c(0x1da)](0x4)[_0x5a512c(0x1b8)]=_0x25c8b3['V'],_0x4b4bfa['insertCell'](0x5)[_0x5a512c(0x1b8)]=_0x25c8b3['SF'],_0x4b4bfa[_0x5a512c(0x1da)](0x6)[_0x5a512c(0x1b8)]=_0x25c8b3['PV'],_0x4b4bfa[_0x5a512c(0x1da)](0x7)[_0x5a512c(0x1b8)]=_0x25c8b3[_0x5a512c(0x16f)];}),addDeleteIcons();}function addDeleteIcons(){const _0x1133be=_0x19304f,_0x5bbde0=salesTable[_0x1133be(0x162)]('tbody\x20tr');_0x5bbde0[_0x1133be(0x1d0)](_0x56c1fb=>{const _0x291080=_0x1133be,_0x2ab68c=document[_0x291080(0x148)](_0x291080(0x1cd));_0x2ab68c[_0x291080(0x1d8)]='‚úñ',_0x2ab68c[_0x291080(0x15f)]='delete-icon',_0x2ab68c[_0x291080(0x19b)]=_0x49d0db=>{const _0x2458c2=_0x291080;_0x49d0db[_0x2458c2(0x1af)](),showConfirmDialog(_0x56c1fb[_0x2458c2(0x1b3)][_0x2458c2(0x198)]);},_0x56c1fb[_0x291080(0x175)]('td:first-child')[_0x291080(0x1c1)](_0x2ab68c);});}function showConfirmDialog(_0x25bec3){const _0x26d2d5=_0x19304f,_0x64f193=document[_0x26d2d5(0x148)](_0x26d2d5(0x1fc));_0x64f193[_0x26d2d5(0x15f)]=_0x26d2d5(0x191),_0x64f193[_0x26d2d5(0x1d8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>√ätes-vous\x20s√ªr\x20de\x20vouloir\x20supprimer\x20cette\x20entr√©e\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20',document[_0x26d2d5(0x182)]['appendChild'](_0x64f193),document[_0x26d2d5(0x163)](_0x26d2d5(0x1f4))[_0x26d2d5(0x19b)]=()=>{const _0x1418fe=_0x26d2d5;deleteEntry(_0x25bec3),document[_0x1418fe(0x182)][_0x1418fe(0x1b4)](_0x64f193);},document[_0x26d2d5(0x163)](_0x26d2d5(0x1cc))[_0x26d2d5(0x19b)]=()=>{const _0x2ee420=_0x26d2d5;document[_0x2ee420(0x182)][_0x2ee420(0x1b4)](_0x64f193);};}function setupSearch(){const _0x355359=_0x19304f,_0x99ef77=document[_0x355359(0x162)](_0x355359(0x1f7));_0x99ef77[_0x355359(0x1d0)](_0x437b90=>{const _0x1820ae=_0x355359;_0x437b90['addEventListener'](_0x1820ae(0x1e3),()=>{const _0x153e7b=_0x1820ae,_0x1e879d=salesData[_0x153e7b(0x14e)](_0x275515=>{return Object['keys'](_0x275515)['every'](_0x255342=>{const _0x5b09e8=_0x3ff5,_0x26bc34=document[_0x5b09e8(0x163)](_0x5b09e8(0x1b1)+(_0x255342[_0x5b09e8(0x157)](0x0)[_0x5b09e8(0x150)]()+_0x255342[_0x5b09e8(0x1ef)](0x1)))?.['value']['toLowerCase']()||'';return _0x275515[_0x255342][_0x5b09e8(0x16d)]()[_0x5b09e8(0x1ad)]()[_0x5b09e8(0x1ca)](_0x26bc34);});});renderTable(_0x1e879d),updateAnalysis(_0x1e879d);});});}function _0x3ff5(_0x36811a,_0x16defc){const _0x36eba8=_0x36eb();return _0x3ff5=function(_0x3ff5f8,_0x2da402){_0x3ff5f8=_0x3ff5f8-0x148;let _0x4248fe=_0x36eba8[_0x3ff5f8];return _0x4248fe;},_0x3ff5(_0x36811a,_0x16defc);}function setupSort(_0x3b2f53){const _0x27c6bb=_0x19304f,_0x61b439=_0x3b2f53[_0x27c6bb(0x162)](_0x27c6bb(0x196));_0x61b439['forEach'](_0x351f05=>{const _0x3351fe=_0x27c6bb;_0x351f05[_0x3351fe(0x199)](_0x3351fe(0x1fa),()=>{const _0x3c664d=_0x3351fe,_0x44f834=_0x351f05[_0x3c664d(0x1b3)][_0x3c664d(0x18c)],_0x4e9997=_0x3b2f53['id']===_0x3c664d(0x166)?salesData:stockData;_0x4e9997[_0x3c664d(0x18c)]((_0x100939,_0x1879bf)=>{if(_0x100939[_0x44f834]<_0x1879bf[_0x44f834])return-0x1;if(_0x100939[_0x44f834]>_0x1879bf[_0x44f834])return 0x1;return 0x0;}),_0x3b2f53['id']===_0x3c664d(0x166)?(renderTable(_0x4e9997),updateAnalysis(_0x4e9997)):renderStockTable(_0x4e9997,_0x3b2f53);});});}function renderStockTable(_0x4b30f6,_0x37da63){const _0x1cba6f=_0x19304f,_0x6bd4b9=_0x37da63['querySelector'](_0x1cba6f(0x1e7));_0x6bd4b9[_0x1cba6f(0x1d8)]='',_0x4b30f6[_0x1cba6f(0x1d0)](_0x5c4b88=>{const _0x31b8b8=_0x1cba6f,_0x3ac408=_0x6bd4b9['insertRow']();_0x3ac408[_0x31b8b8(0x1da)](0x0)['textContent']=_0x5c4b88['product'],_0x3ac408['insertCell'](0x1)[_0x31b8b8(0x1b8)]=_0x5c4b88['SF'],_0x3ac408[_0x31b8b8(0x1da)](0x2)[_0x31b8b8(0x1b8)]=new Date(_0x5c4b88[_0x31b8b8(0x1d6)])[_0x31b8b8(0x14c)]();});}function updateAnalysis(_0x17335f=salesData){const _0x1edb58=_0x19304f;let _0x9a761f=0x0,_0x14ee0b=0x0;const _0x85c0b4={'labels':[],'sales':[],'prices':[]};_0x17335f[_0x1edb58(0x1d0)](_0x3cf7a3=>{const _0xc4413=_0x1edb58;_0x9a761f+=_0x3cf7a3['V']*_0x3cf7a3['PV'],_0x14ee0b++,_0x85c0b4[_0xc4413(0x1d7)][_0xc4413(0x18d)](new Date(_0x3cf7a3[_0xc4413(0x1d6)])[_0xc4413(0x14c)]()),_0x85c0b4[_0xc4413(0x1a9)][_0xc4413(0x18d)](_0x3cf7a3['V']),_0x85c0b4[_0xc4413(0x195)][_0xc4413(0x18d)](_0x3cf7a3['PV']);});const _0x3e96fd=_0x9a761f/_0x14ee0b||0x0;totalSalesElement[_0x1edb58(0x1b8)]=_0x1edb58(0x152)+_0x9a761f[_0x1edb58(0x154)](0x2)+_0x1edb58(0x1c2),averageSalesElement[_0x1edb58(0x1b8)]='Moyenne\x20des\x20ventes\x20par\x20jour:\x20'+_0x3e96fd[_0x1edb58(0x154)](0x2)+_0x1edb58(0x1c2),updateChart(_0x85c0b4),updatePeriodAnalysis(_0x17335f);}function updateChart(_0x5141cf){const _0x238a43=_0x19304f,_0x4746cd=document[_0x238a43(0x163)]('salesChart')[_0x238a43(0x1f0)]('2d');salesChart&&salesChart[_0x238a43(0x158)](),salesChart=new Chart(_0x4746cd,{'type':_0x238a43(0x171),'data':{'labels':_0x5141cf['labels'],'datasets':[{'label':'Ventes','data':_0x5141cf[_0x238a43(0x1a9)],'borderColor':_0x238a43(0x161),'tension':0.1},{'label':_0x238a43(0x14f),'data':_0x5141cf[_0x238a43(0x195)],'borderColor':'rgb(255,\x2099,\x20132)','tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x238a43(0x161)}},'x':{'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x238a43(0x161)}}},'plugins':{'legend':{'labels':{'color':_0x238a43(0x161)}}}}});}function updatePeriodAnalysis(_0x58c3ac){const _0x2b0b3=_0x19304f,_0x39b6c9=new Date(),_0x2e136b=new Date(_0x39b6c9['getTime']()-0x7*0x18*0x3c*0x3c*0x3e8),_0x136630=new Date(_0x39b6c9['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x1d0546=new Date(_0x39b6c9[_0x2b0b3(0x193)]()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x21a7f6=_0x58c3ac['filter'](_0x56479d=>new Date(_0x56479d[_0x2b0b3(0x1d6)])>=_0x2e136b),_0x4afd1f=_0x58c3ac[_0x2b0b3(0x14e)](_0x1e0db2=>new Date(_0x1e0db2[_0x2b0b3(0x1d6)])>=_0x136630),_0x5aba50=_0x58c3ac[_0x2b0b3(0x14e)](_0x3e0c72=>new Date(_0x3e0c72[_0x2b0b3(0x1d6)])>=_0x1d0546);updatePeriodStats(_0x21a7f6,_0x2b0b3(0x1a3)),updatePeriodStats(_0x4afd1f,_0x2b0b3(0x19a)),updatePeriodStats(_0x5aba50,_0x2b0b3(0x197));}function _0x36eb(){const _0x5c90a5=['toFixed','darkTheme','6YbSrPe','charAt','destroy','DOMContentLoaded','150634BgiOMZ','cyberdemo-a38fc','orderByChild','val','length','className','theme-toggle','rgb(0,\x20255,\x20255)','querySelectorAll','getElementById','Activer\x20le\x20mode\x20sombre','classList','salesTable','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','light-theme','flex','setAttribute','endAt','AverageSales','toString','setItem','total','toggleSalesButton','line','value','set','submit','querySelector','location','560596573477','users/','cyberdemo-a38fc.firebasestorage.app','APP','Ventes','userInfo','values','expired','error','1:560596573477:web:f576224af5650fc081cecc','G-XH1RH6DYK5','body','update','block','limitToLast','ventes_wifi_zone.xlsx','Ce\x20nom\x20d\x27utilisateur\x20est\x20d√©j√†\x20utilis√©.','prix','getItem','<option\x20value=\x22\x22>S√©lectionner\x20un\x20produit</option>','book_append_sheet','sort','push','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement\x20:','180RYmnuQ','change','confirm-dialog','9512VWuwFS','getTime','reduce','prices','th[data-sort]','threeMonth','key','addEventListener','month','onclick','136320BOHHYA','12884JhEZnQ','href','insertRow','none','catch','Masquer\x20l\x27analyse\x20des\x20ventes','week','Error\x20creating\x20user:','stockStartDate','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entr√©e:','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement.','active','sales','writeFile','sales/','133941xQyufm','toLowerCase','2KeYfIM','stopPropagation','AIzaSyCqYu8n0ct6KcMhiEvTKO74mh824PrNXfk','search','table_to_sheet','dataset','removeChild','password','3492AZFumX','index.html','textContent','utils','status','loginForm','20PlFCEH','preventDefault','toISOString','documentElement','then','appendChild','\x20FCFA','salesStartDate','signupPassword','aria-label','equalTo','https://cyberdemo-a38fc-default-rtdb.firebaseio.com','analysisSection','3624327Vrjlkw','includes','Masquer\x20le\x20d√©tail\x20des\x20ventes','cancelDelete','span','subscriptionRequiredModal','endDate','forEach','dashboardContainer','stockEndDate','reset','Activer\x20le\x20mode\x20clair','true','dateTime','labels','innerHTML','TotalSales','insertCell','signupContainer','salesDetailsSection','admin/subscription','D√©tail\x20des\x20ventes','stockTableGlobal','Utilisateur:\x20','option','ref','input','salesEndDate','style','3611400JmkxTQ','tbody','TicketsTotal','add','exists','Utilisateur\x20introuvable','display','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e\x20:','totalSales','slice','getContext','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e.','initializeApp','Erreur\x20lors\x20de\x20la\x20cr√©ation\x20du\x20compte','confirmDelete','averageSales','once','#searchInputs\x20input','username','cyberdemo-a38fc.firebaseapp.com','click','Analyse\x20des\x20ventes','div','createElement','signupForm','remove','signupButton','toLocaleString','exportExcel','filter','Prix\x20de\x20vente','toUpperCase','Inscription\x20r√©ussie\x20!\x20Connectez-vous.','Total\x20des\x20ventes:\x20','product'];_0x36eb=function(){return _0x5c90a5;};return _0x36eb();}function updatePeriodStats(_0x54f72e,_0x1ac128){const _0x178446=_0x19304f,_0x2aece2=_0x54f72e[_0x178446(0x194)]((_0x5102dc,_0x553bc7)=>_0x5102dc+_0x553bc7['V']*_0x553bc7['PV'],0x0),_0x443a24=_0x2aece2/_0x54f72e[_0x178446(0x15e)]||0x0;document['getElementById'](_0x1ac128+_0x178446(0x1d9))['textContent']=_0x178446(0x152)+_0x2aece2[_0x178446(0x154)](0x2)+_0x178446(0x1c2),document[_0x178446(0x163)](_0x1ac128+_0x178446(0x16c))[_0x178446(0x1b8)]=_0x178446(0x167)+_0x443a24[_0x178446(0x154)](0x2)+_0x178446(0x1c2);}toggleAnalysisButton[_0x19304f(0x199)]('click',function(){const _0x75ee8c=_0x19304f;analysisSection[_0x75ee8c(0x1e5)]['display']===_0x75ee8c(0x1a0)||analysisSection[_0x75ee8c(0x1e5)][_0x75ee8c(0x1ec)]===''?(analysisSection[_0x75ee8c(0x1e5)][_0x75ee8c(0x1ec)]=_0x75ee8c(0x184),salesDetailsSection[_0x75ee8c(0x1e5)][_0x75ee8c(0x1ec)]=_0x75ee8c(0x1a0),this[_0x75ee8c(0x1b8)]=_0x75ee8c(0x1a2),toggleSalesButton['textContent']=_0x75ee8c(0x1de),updateAnalysis(salesData)):(analysisSection['style'][_0x75ee8c(0x1ec)]='none',this['textContent']=_0x75ee8c(0x1fb));}),toggleSalesButton[_0x19304f(0x199)]('click',function(){const _0x40e85d=_0x19304f;salesDetailsSection[_0x40e85d(0x1e5)][_0x40e85d(0x1ec)]===_0x40e85d(0x1a0)||salesDetailsSection[_0x40e85d(0x1e5)][_0x40e85d(0x1ec)]===''?(salesDetailsSection[_0x40e85d(0x1e5)][_0x40e85d(0x1ec)]='block',analysisSection[_0x40e85d(0x1e5)][_0x40e85d(0x1ec)]=_0x40e85d(0x1a0),this[_0x40e85d(0x1b8)]=_0x40e85d(0x1cb),toggleAnalysisButton[_0x40e85d(0x1b8)]=_0x40e85d(0x1fb)):(salesDetailsSection['style'][_0x40e85d(0x1ec)]='none',this[_0x40e85d(0x1b8)]=_0x40e85d(0x1de));});const themeToggle=document[_0x19304f(0x163)](_0x19304f(0x160)),root=document[_0x19304f(0x1bf)];let isDarkTheme=!![];function setTheme(_0x436940){const _0x205e52=_0x19304f;_0x436940?(root[_0x205e52(0x165)][_0x205e52(0x14a)](_0x205e52(0x168)),themeToggle['textContent']='üåô',themeToggle[_0x205e52(0x16a)]('aria-label',_0x205e52(0x1d4))):(root[_0x205e52(0x165)][_0x205e52(0x1e9)](_0x205e52(0x168)),themeToggle[_0x205e52(0x1b8)]='‚òÄÔ∏è',themeToggle['setAttribute'](_0x205e52(0x1c5),_0x205e52(0x164))),isDarkTheme=_0x436940,localStorage[_0x205e52(0x16e)](_0x205e52(0x155),_0x436940);}themeToggle[_0x19304f(0x199)](_0x19304f(0x1fa),()=>{setTheme(!isDarkTheme);}),document[_0x19304f(0x199)](_0x19304f(0x159),()=>{const _0x7d6fe4=_0x19304f,_0x487e5f=localStorage[_0x7d6fe4(0x189)](_0x7d6fe4(0x155));_0x487e5f!==null?setTheme(_0x487e5f===_0x7d6fe4(0x1d5)):setTheme(![]);}),document[_0x19304f(0x163)]('filterStockDates')[_0x19304f(0x199)](_0x19304f(0x1fa),function(){const _0x1228a4=_0x19304f,_0x334f8e=new Date(document[_0x1228a4(0x163)](_0x1228a4(0x1a5))[_0x1228a4(0x172)]),_0x5af278=new Date(document['getElementById'](_0x1228a4(0x1d2))[_0x1228a4(0x172)]);updateStockTables(_0x334f8e,_0x5af278);}),document[_0x19304f(0x163)]('filterSalesDates')['addEventListener'](_0x19304f(0x1fa),function(){const _0x5bddf1=_0x19304f,_0x5cb593=new Date(document['getElementById'](_0x5bddf1(0x1c3))[_0x5bddf1(0x172)]),_0x1f5df1=new Date(document[_0x5bddf1(0x163)](_0x5bddf1(0x1e4))[_0x5bddf1(0x172)]),_0x370657=salesData[_0x5bddf1(0x14e)](_0x52c498=>{const _0x4cb6e7=new Date(_0x52c498['dateTime']);return(!_0x5cb593||_0x4cb6e7>=_0x5cb593)&&(!_0x1f5df1||_0x4cb6e7<=_0x1f5df1);});renderTable(_0x370657),updateAnalysis(_0x370657);});function updateStockTables(_0x120015,_0x4c5f06){const _0x3cbb16=_0x19304f,_0x774417=document['getElementById'](_0x3cbb16(0x1df));_0x774417['querySelector'](_0x3cbb16(0x1e7))['innerHTML']='',database[_0x3cbb16(0x1e2)](_0x3cbb16(0x1ab)+currentUser)[_0x3cbb16(0x1f6)](_0x3cbb16(0x172))['then'](_0xb1799d=>{const _0x861db2=_0x3cbb16,_0x99b929={};_0xb1799d[_0x861db2(0x1d0)](_0x1f9df3=>{const _0x56c86c=_0x861db2,_0x51f9aa=_0x1f9df3[_0x56c86c(0x15d)](),_0x43d387=new Date(_0x51f9aa['dateTime']);(!_0x120015||_0x43d387>=_0x120015)&&(!_0x4c5f06||_0x43d387<=_0x4c5f06)&&((!_0x99b929[_0x51f9aa[_0x56c86c(0x153)]]||_0x43d387>new Date(_0x99b929[_0x51f9aa[_0x56c86c(0x153)]][_0x56c86c(0x1d6)]))&&(_0x99b929[_0x51f9aa['product']]=_0x51f9aa));}),Object['values'](_0x99b929)[_0x861db2(0x1d0)](_0x3fe5ab=>{const _0xaebf92=_0x861db2,_0x358839=_0x774417['querySelector'](_0xaebf92(0x1e7))['insertRow']();_0x358839[_0xaebf92(0x1da)](0x0)['textContent']=_0x3fe5ab['product'],_0x358839[_0xaebf92(0x1da)](0x1)[_0xaebf92(0x1b8)]=_0x3fe5ab['SF'],_0x358839[_0xaebf92(0x1da)](0x2)['textContent']=new Date(_0x3fe5ab[_0xaebf92(0x1d6)])['toLocaleString']();}),setupSort(_0x774417);});}function showSubscriptionRequiredModal(){const _0x3bdf64=_0x19304f;document[_0x3bdf64(0x163)](_0x3bdf64(0x1ce))[_0x3bdf64(0x1e5)][_0x3bdf64(0x1ec)]=_0x3bdf64(0x169);}function hideSubscriptionRequiredModal(){const _0xa2da4d=_0x19304f;document[_0xa2da4d(0x163)](_0xa2da4d(0x1ce))[_0xa2da4d(0x1e5)]['display']=_0xa2da4d(0x1a0);}function redirectToSubscription(){const _0x542d8e=_0x19304f;window[_0x542d8e(0x176)][_0x542d8e(0x19e)]=_0x542d8e(0x1b7);}async function checkSubscriptionStatus(){const _0x124ced=_0x19304f;try{const _0x2ee1e7=await adminRef[_0x124ced(0x1f6)]('value'),_0x520450=_0x2ee1e7[_0x124ced(0x15d)](),_0x54d45d=new Date();if(_0x520450&&_0x520450[_0x124ced(0x1ba)]===_0x124ced(0x1a8)){const _0x3fad3f=new Date(_0x520450[_0x124ced(0x1cf)]);return _0x3fad3f>=_0x54d45d?!![]:(await adminRef['update']({'status':_0x124ced(0x17e)}),![]);}else return![];}catch(_0x1c7324){console['error']('Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement\x20:',_0x1c7324);throw _0x1c7324;}}updateTable(),updateStockTables(),analysisSection[_0x19304f(0x1e5)][_0x19304f(0x1ec)]=_0x19304f(0x1a0),salesDetailsSection[_0x19304f(0x1e5)]['display']=_0x19304f(0x1a0),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x19304f(0x189)](_0x19304f(0x155));savedTheme!==null&&setTheme(savedTheme===_0x19304f(0x1d5));