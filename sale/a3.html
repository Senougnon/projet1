<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets totaux</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gestion des tickets totaux</h1>
        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".json" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <script>
const _0xbff6a1=_0x1662;(function(_0x46d897,_0x38ac3a){const _0x1b32c4=_0x1662,_0x26ed08=_0x46d897();while(!![]){try{const _0x3885b1=parseInt(_0x1b32c4(0x160))/0x1*(parseInt(_0x1b32c4(0x132))/0x2)+parseInt(_0x1b32c4(0x123))/0x3*(-parseInt(_0x1b32c4(0x144))/0x4)+parseInt(_0x1b32c4(0x153))/0x5*(parseInt(_0x1b32c4(0x114))/0x6)+-parseInt(_0x1b32c4(0x126))/0x7+parseInt(_0x1b32c4(0x15a))/0x8*(parseInt(_0x1b32c4(0x166))/0x9)+parseInt(_0x1b32c4(0x147))/0xa*(-parseInt(_0x1b32c4(0x11c))/0xb)+-parseInt(_0x1b32c4(0x163))/0xc*(-parseInt(_0x1b32c4(0x11b))/0xd);if(_0x3885b1===_0x38ac3a)break;else _0x26ed08['push'](_0x26ed08['shift']());}catch(_0x1f96e8){_0x26ed08['push'](_0x26ed08['shift']());}}}(_0xcfb8,0x86d80));const firebaseConfig={'apiKey':_0xbff6a1(0x110),'authDomain':_0xbff6a1(0x152),'databaseURL':_0xbff6a1(0x149),'projectId':'test-4ef80','storageBucket':_0xbff6a1(0x14f),'messagingSenderId':'1000649890652','appId':'1:1000649890652:web:08d0152ba1098c7e57bf99','measurementId':'G-ZS30CDLMZ4'};firebase[_0xbff6a1(0x159)](firebaseConfig);const database=firebase['database']();let allTickets={};function showLoading(){const _0x50d644=_0xbff6a1;document[_0x50d644(0x12a)]('loadingIndicator')['style'][_0x50d644(0x13a)]='flex';}function hideLoading(){const _0x2c92d1=_0xbff6a1;document['getElementById'](_0x2c92d1(0x13d))['style'][_0x2c92d1(0x13a)]=_0x2c92d1(0x135);}function loadTickets(){const _0x320af4=_0xbff6a1;showLoading();const _0xc6130b=database['ref'](_0x320af4(0x12e));_0xc6130b['on'](_0x320af4(0x15c),_0x425f3e=>{const _0x5b948a=_0x320af4;allTickets=_0x425f3e[_0x5b948a(0x10e)](),displayTickets(allTickets),hideLoading();},_0x4fa1b0=>{const _0x23535f=_0x320af4;console['error'](_0x23535f(0x13b),_0x4fa1b0),hideLoading(),alert(_0x23535f(0x161));});}function displayTickets(_0x1de40f,_0x245b6b=''){const _0x450393=_0xbff6a1,_0x3ed655=document['getElementById'](_0x450393(0x158));_0x3ed655[_0x450393(0x14b)]='';for(let _0x4a10c8 in _0x1de40f){const _0x58f5ae=_0x1de40f[_0x4a10c8],_0x15f34f=_0x450393(0x10d)+_0x4a10c8+'</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27'+_0x4a10c8+'\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20'+_0x4a10c8+_0x450393(0x120)+_0x4a10c8+_0x450393(0x141)+_0x4a10c8+_0x450393(0x119)+_0x4a10c8+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x3ed655[_0x450393(0x14b)]+=_0x15f34f;const _0x98dcd7=document[_0x450393(0x12a)]('ticketsBody_'+_0x4a10c8);for(let _0x347f1d=0x0;_0x347f1d<_0x58f5ae[_0x450393(0x115)][_0x450393(0x131)];_0x347f1d++){if(_0x245b6b&&!matchesSearch(_0x58f5ae,_0x347f1d,_0x245b6b))continue;const _0x28c5f8=_0x450393(0x10b)+_0x4a10c8+_0x450393(0x140)+_0x347f1d+_0x450393(0x129)+highlightMatch(_0x58f5ae[_0x450393(0x115)][_0x347f1d],_0x245b6b)+_0x450393(0x156)+highlightMatch(_0x58f5ae[_0x450393(0x146)][_0x347f1d],_0x245b6b)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x58f5ae[_0x450393(0x15d)][_0x347f1d],_0x245b6b)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20onclick=\x22deleteTicket(\x27'+_0x4a10c8+_0x450393(0x133)+_0x347f1d+')\x22\x20class=\x22delete-btn\x22>Supprimer</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x98dcd7[_0x450393(0x14b)]+=_0x28c5f8;}}}function matchesSearch(_0x557b08,_0x47df11,_0x3224e2){const _0x5a57f1=_0xbff6a1,_0x23f09d=_0x3224e2[_0x5a57f1(0x162)]();return _0x557b08[_0x5a57f1(0x115)][_0x47df11][_0x5a57f1(0x162)]()[_0x5a57f1(0x111)](_0x23f09d)||_0x557b08[_0x5a57f1(0x146)][_0x47df11][_0x5a57f1(0x162)]()[_0x5a57f1(0x111)](_0x23f09d)||_0x557b08[_0x5a57f1(0x15d)][_0x47df11][_0x5a57f1(0x162)]()[_0x5a57f1(0x111)](_0x23f09d);}function highlightMatch(_0x12c3a2,_0x37e823){const _0x4cfada=_0xbff6a1;if(!_0x37e823)return _0x12c3a2;const _0x22481d=new RegExp(_0x37e823,'gi');return _0x12c3a2['replace'](_0x22481d,_0x2460cd=>_0x4cfada(0x134)+_0x2460cd+_0x4cfada(0x14a));}function _0x1662(_0xa5f1c2,_0x29f9af){const _0xcfb819=_0xcfb8();return _0x1662=function(_0x16621c,_0x3fbe21){_0x16621c=_0x16621c-0x10b;let _0x45283c=_0xcfb819[_0x16621c];return _0x45283c;},_0x1662(_0xa5f1c2,_0x29f9af);}function deleteTicket(_0xdaab2c,_0xa50063){const _0x43f6b0=_0xbff6a1;confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?')&&(showLoading(),database[_0x43f6b0(0x14d)](_0x43f6b0(0x113)+_0xdaab2c)['once'](_0x43f6b0(0x15c),_0x2135f7=>{const _0x4f4756=_0x43f6b0,_0x1007cc=_0x2135f7['val']();_0x1007cc[_0x4f4756(0x115)][_0x4f4756(0x125)](_0xa50063,0x1),_0x1007cc['prix'][_0x4f4756(0x125)](_0xa50063,0x1),_0x1007cc[_0x4f4756(0x15d)][_0x4f4756(0x125)](_0xa50063,0x1),database['ref'](_0x4f4756(0x113)+_0xdaab2c)[_0x4f4756(0x130)](_0x1007cc)[_0x4f4756(0x127)](()=>{hideLoading();})[_0x4f4756(0x116)](_0x2fb41b=>{const _0x14432b=_0x4f4756;console[_0x14432b(0x122)](_0x14432b(0x139),_0x2fb41b),hideLoading(),alert(_0x14432b(0x11a));});}));}function deleteSelectedTickets(_0x5cc82c){const _0x4878c0=_0xbff6a1,_0xb21d5f=document[_0x4878c0(0x13f)](_0x4878c0(0x112)+_0x5cc82c+'\x22]:checked');_0xb21d5f[_0x4878c0(0x131)]>0x0&&confirm(_0x4878c0(0x157))&&(showLoading(),database['ref'](_0x4878c0(0x113)+_0x5cc82c)[_0x4878c0(0x12b)](_0x4878c0(0x15c),_0x1a6c75=>{const _0x2d2646=_0x4878c0,_0x17133d=_0x1a6c75[_0x2d2646(0x10e)](),_0x5b54d8=Array[_0x2d2646(0x14c)](_0xb21d5f)['map'](_0x343dd0=>parseInt(_0x343dd0['value']))[_0x2d2646(0x118)]((_0x3a1ac6,_0x2dd208)=>_0x2dd208-_0x3a1ac6);_0x5b54d8[_0x2d2646(0x12f)](_0x5ae818=>{const _0x2b6e52=_0x2d2646;_0x17133d[_0x2b6e52(0x115)][_0x2b6e52(0x125)](_0x5ae818,0x1),_0x17133d[_0x2b6e52(0x146)][_0x2b6e52(0x125)](_0x5ae818,0x1),_0x17133d[_0x2b6e52(0x15d)][_0x2b6e52(0x125)](_0x5ae818,0x1);}),database['ref'](_0x2d2646(0x113)+_0x5cc82c)[_0x2d2646(0x130)](_0x17133d)[_0x2d2646(0x127)](()=>{hideLoading();})[_0x2d2646(0x116)](_0x250155=>{const _0x177aff=_0x2d2646;console[_0x177aff(0x122)](_0x177aff(0x11d),_0x250155),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets\x20sélectionnés.\x20Veuillez\x20réessayer.');});}));}function _0xcfb8(){const _0x57a446=['Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20la\x20catégorie\x20','4WfeXKX','click','prix','89970chtEKN','createElement','https://test-4ef80-default-rtdb.firebaseio.com','</span>','innerHTML','from','ref','update','test-4ef80.appspot.com','result','remove','test-4ef80.firebaseapp.com','5cnyNNE','target','appendChild','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?','ticketCategories','initializeApp','23040ZmlvBX','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','value','utilisateur','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:','href','1BWwgMP','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','toLowerCase','58956vXTShE','Erreur\x20d\x27importation:','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20tous\x20les\x20tickets\x20de\x20la\x20catégorie:','1116Kuspyt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_','stringify','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>','val','trim','AIzaSyAzf5NGjh-AZ-xVygKknnJ2Jb2ctW0Alc4','includes','input[name=\x22ticketSelect_','TicketsTotal/','4688346qJyDTH','motDePasse','catch','download','sort','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket.\x20Veuillez\x20réessayer.','1560hUBjvb','1067SxKbTv','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets\x20sélectionnés:','tickets_export.json','Erreur\x20lors\x20de\x20l\x27importation:','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier\x20JSON.','error','2630937gFUjYr','addEventListener','splice','2069032goTJDc','then','input','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','getElementById','once','parse','searchBar','TicketsTotal','forEach','set','length','1739026wAAIsy','\x27,\x20','<span\x20class=\x22highlight\x22>','none','setAttribute','onload','push','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket:','display','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20tous\x20les\x20tickets\x20de\x20la\x20catégorie.\x20Veuillez\x20réessayer.','loadingIndicator','body','querySelectorAll','\x22\x20value=\x22','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27','files'];_0xcfb8=function(){return _0x57a446;};return _0xcfb8();}function deleteAllTicketsInCategory(_0x1fe8d1){const _0x1f48b3=_0xbff6a1;confirm(_0x1f48b3(0x143)+_0x1fe8d1+'\x20?\x20Cette\x20action\x20est\x20irréversible.')&&(showLoading(),database[_0x1f48b3(0x14d)]('TicketsTotal/'+_0x1fe8d1)[_0x1f48b3(0x14e)]({'motDePasse':[],'prix':[],'utilisateur':[]})[_0x1f48b3(0x127)](()=>{hideLoading();})[_0x1f48b3(0x116)](_0x40c945=>{const _0x314da3=_0x1f48b3;console[_0x314da3(0x122)](_0x314da3(0x165),_0x40c945),hideLoading(),alert(_0x314da3(0x13c));}));}function deleteSearchResults(){const _0x7b52e=_0xbff6a1,_0x3366c1=document[_0x7b52e(0x12a)](_0x7b52e(0x12d))[_0x7b52e(0x15c)][_0x7b52e(0x10f)]();if(!_0x3366c1){alert('Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.');return;}if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?')){showLoading();const _0x1fc2f0={};for(let _0x1352d2 in allTickets){const _0x4fd629=allTickets[_0x1352d2],_0x452b6f={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x3252a7=0x0;_0x3252a7<_0x4fd629[_0x7b52e(0x115)][_0x7b52e(0x131)];_0x3252a7++){!matchesSearch(_0x4fd629,_0x3252a7,_0x3366c1)&&(_0x452b6f[_0x7b52e(0x115)][_0x7b52e(0x138)](_0x4fd629[_0x7b52e(0x115)][_0x3252a7]),_0x452b6f['prix'][_0x7b52e(0x138)](_0x4fd629[_0x7b52e(0x146)][_0x3252a7]),_0x452b6f[_0x7b52e(0x15d)][_0x7b52e(0x138)](_0x4fd629[_0x7b52e(0x15d)][_0x3252a7]));}_0x1fc2f0[_0x7b52e(0x113)+_0x1352d2]=_0x452b6f;}database['ref']()[_0x7b52e(0x14e)](_0x1fc2f0)[_0x7b52e(0x127)](()=>{hideLoading(),alert('Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.');})[_0x7b52e(0x116)](_0x1df20a=>{const _0x30016b=_0x7b52e;console[_0x30016b(0x122)](_0x30016b(0x15e),_0x1df20a),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.');});}}function searchTickets(){const _0x5dbc46=_0xbff6a1,_0x577359=document['getElementById'](_0x5dbc46(0x12d))[_0x5dbc46(0x15c)][_0x5dbc46(0x10f)]();displayTickets(allTickets,_0x577359);}function exportTickets(){const _0x588a1e=_0xbff6a1;showLoading();const _0x534f9c='data:text/json;charset=utf-8,'+encodeURIComponent(JSON[_0x588a1e(0x10c)](allTickets,null,0x2)),_0x1b3d78=document[_0x588a1e(0x148)]('a');_0x1b3d78[_0x588a1e(0x136)](_0x588a1e(0x15f),_0x534f9c),_0x1b3d78[_0x588a1e(0x136)](_0x588a1e(0x117),_0x588a1e(0x11e)),document[_0x588a1e(0x13e)][_0x588a1e(0x155)](_0x1b3d78),_0x1b3d78[_0x588a1e(0x145)](),_0x1b3d78[_0x588a1e(0x151)](),hideLoading();}function exportFilteredTickets(){const _0x859509=_0xbff6a1;showLoading();const _0x4b647e=document[_0x859509(0x12a)](_0x859509(0x12d))[_0x859509(0x15c)][_0x859509(0x10f)](),_0x87d2fa={};for(let _0xf57b28 in allTickets){const _0x3d660a=allTickets[_0xf57b28];_0x87d2fa[_0xf57b28]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x1d2aab=0x0;_0x1d2aab<_0x3d660a[_0x859509(0x115)][_0x859509(0x131)];_0x1d2aab++){(!_0x4b647e||matchesSearch(_0x3d660a,_0x1d2aab,_0x4b647e))&&(_0x87d2fa[_0xf57b28]['motDePasse'][_0x859509(0x138)](_0x3d660a[_0x859509(0x115)][_0x1d2aab]),_0x87d2fa[_0xf57b28][_0x859509(0x146)][_0x859509(0x138)](_0x3d660a[_0x859509(0x146)][_0x1d2aab]),_0x87d2fa[_0xf57b28]['utilisateur']['push'](_0x3d660a['utilisateur'][_0x1d2aab]));}}const _0x1bcbb4='data:text/json;charset=utf-8,'+encodeURIComponent(JSON[_0x859509(0x10c)](_0x87d2fa,null,0x2)),_0x275a36=document[_0x859509(0x148)]('a');_0x275a36['setAttribute'](_0x859509(0x15f),_0x1bcbb4),_0x275a36[_0x859509(0x136)](_0x859509(0x117),'filtered_tickets_export.json'),document[_0x859509(0x13e)][_0x859509(0x155)](_0x275a36),_0x275a36[_0x859509(0x145)](),_0x275a36[_0x859509(0x151)](),hideLoading();}function importTickets(_0x2ff665){const _0xb0b653=_0xbff6a1,_0x396055=_0x2ff665[_0xb0b653(0x154)][_0xb0b653(0x142)][0x0];if(_0x396055){showLoading();const _0x3d354c=new FileReader();_0x3d354c[_0xb0b653(0x137)]=function(_0x5a2ca9){const _0x49be2f=_0xb0b653;try{const _0x1e10fb=JSON[_0x49be2f(0x12c)](_0x5a2ca9[_0x49be2f(0x154)][_0x49be2f(0x150)]);if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Cela\x20remplacera\x20les\x20tickets\x20existants\x20dans\x20les\x20catégories\x20correspondantes.')){const _0x4a46a9={};for(let _0x2277ef in _0x1e10fb){_0x4a46a9[_0x49be2f(0x113)+_0x2277ef]=_0x1e10fb[_0x2277ef];}database[_0x49be2f(0x14d)]()[_0x49be2f(0x14e)](_0x4a46a9)[_0x49be2f(0x127)](()=>{hideLoading(),alert('Importation\x20réussie\x20!');})[_0x49be2f(0x116)](_0x3f371b=>{const _0x3417b6=_0x49be2f;console[_0x3417b6(0x122)](_0x3417b6(0x11f),_0x3f371b),hideLoading(),alert(_0x3417b6(0x15b));});}else hideLoading();}catch(_0xb6d5b2){console['error'](_0x49be2f(0x164),_0xb6d5b2),hideLoading(),alert(_0x49be2f(0x121));}},_0x3d354c['readAsText'](_0x396055);}}document[_0xbff6a1(0x12a)](_0xbff6a1(0x12d))[_0xbff6a1(0x124)](_0xbff6a1(0x128),searchTickets),window['onload']=loadTickets;
    </script>
</body>
</html>
