const _0x14aa69=_0x48a3;(function(_0x54e680,_0x51ead1){const _0x2bdaa6=_0x48a3,_0x39f3f1=_0x54e680();while(!![]){try{const _0x317bb6=parseInt(_0x2bdaa6(0x34f))/0x1+parseInt(_0x2bdaa6(0x33f))/0x2*(-parseInt(_0x2bdaa6(0x2c8))/0x3)+parseInt(_0x2bdaa6(0x2fe))/0x4+parseInt(_0x2bdaa6(0x2e5))/0x5*(-parseInt(_0x2bdaa6(0x1db))/0x6)+-parseInt(_0x2bdaa6(0x1f0))/0x7*(parseInt(_0x2bdaa6(0x2af))/0x8)+-parseInt(_0x2bdaa6(0x2c2))/0x9*(-parseInt(_0x2bdaa6(0x204))/0xa)+parseInt(_0x2bdaa6(0x284))/0xb*(parseInt(_0x2bdaa6(0x228))/0xc);if(_0x317bb6===_0x51ead1)break;else _0x39f3f1['push'](_0x39f3f1['shift']());}catch(_0x1020f1){_0x39f3f1['push'](_0x39f3f1['shift']());}}}(_0x1ded,0xdf50a));const API_KEY=_0x14aa69(0x23c),API_BASE_URL=_0x14aa69(0x308);let currentUser=null,pinnedFiles=[],currentConversation=[],conversations={};const FREE_CREDITS_PER_DAY=0x3,FREE_CREDITS_REGISTER=0xa,FREE_MODEL_MAX_WORDS=0xc350,FREE_MODEL_MAX_RESPONSE=0x7d0,SYSTEM_INSTRUCTION=_0x14aa69(0x280),firebaseConfig={'apiKey':_0x14aa69(0x22a),'authDomain':'gemini-bb56e.firebaseapp.com','databaseURL':_0x14aa69(0x302),'projectId':_0x14aa69(0x251),'storageBucket':_0x14aa69(0x345),'messagingSenderId':_0x14aa69(0x342),'appId':'1:277143630015:web:78736f2cf52d29495d160a','measurementId':_0x14aa69(0x21c)};firebase[_0x14aa69(0x220)](firebaseConfig);const db=firebase[_0x14aa69(0x218)]();let prompts={},pinnedPrompt=null,pinnedResponses=[],genAI;const API_KEY_LIST_REF=db[_0x14aa69(0x1ec)]('API');let apiKeyList=[];async function loadApiKeyList(){const _0x20ffe3=_0x14aa69;try{const _0x1c1f6b=await API_KEY_LIST_REF['once'](_0x20ffe3(0x321)),_0x39b1dd=_0x1c1f6b[_0x20ffe3(0x2e2)]();_0x39b1dd?apiKeyList=Object['values'](_0x39b1dd):console[_0x20ffe3(0x262)](_0x20ffe3(0x313));}catch(_0x2e40b9){console[_0x20ffe3(0x1f9)](_0x20ffe3(0x281),_0x2e40b9);}}function getRandomApiKey(){const _0x27aa8b=_0x14aa69;if(apiKeyList['length']===0x0)return console[_0x27aa8b(0x1f9)]('La\x20liste\x20des\x20clés\x20API\x20est\x20vide.'),null;const _0x41890f=Math['floor'](Math[_0x27aa8b(0x355)]()*apiKeyList['length']);return apiKeyList[_0x41890f];}function initializeGeminiAPI(){const _0x53d2a4=_0x14aa69,_0x5688d2=getRandomApiKey();_0x5688d2?(genAI=new GoogleGenerativeAI(_0x5688d2),model=genAI[_0x53d2a4(0x252)]({'model':document[_0x53d2a4(0x2f9)](_0x53d2a4(0x2b9))['value'],'systemInstruction':SYSTEM_INSTRUCTION})):showNotification(_0x53d2a4(0x22b),_0x53d2a4(0x1f9));}async function checkSubscriptionStatus(){const _0x13324f=_0x14aa69;if(!currentUser||!currentUser[_0x13324f(0x1e5)])return;const _0x1b01cf=new Date(),_0x100b6d=new Date(currentUser['subscriptionEndDate']);if(_0x1b01cf>_0x100b6d)currentUser['subscription']=null,currentUser[_0x13324f(0x1e5)]=null,await syncUserData(),showNotification(_0x13324f(0x1d8),_0x13324f(0x285)),updateUIForLoggedInUser();else{if(_0x1b01cf>new Date(_0x100b6d['getTime']()-0x3*0x18*0x3c*0x3c*0x3e8)){const _0x15d720=Math[_0x13324f(0x2a2)]((_0x100b6d-_0x1b01cf)/(0x18*0x3c*0x3c*0x3e8));showNotification(_0x13324f(0x20b)+_0x15d720+'\x20jour'+(_0x15d720>0x1?'s':'')+'.','warning');}}}function generateInvoicePDF(_0x306431){const _0x1a135c=_0x14aa69,{jsPDF:_0x328fa8}=window['jspdf'],_0x4601d5=new _0x328fa8();return _0x4601d5[_0x1a135c(0x28f)](0x12),_0x4601d5[_0x1a135c(0x245)](_0x1a135c(0x1df),0x69,0x14,null,null,_0x1a135c(0x224)),_0x4601d5[_0x1a135c(0x28f)](0xc),_0x4601d5[_0x1a135c(0x245)](_0x1a135c(0x270)+currentUser['username'],0x14,0x28),_0x4601d5[_0x1a135c(0x245)](_0x1a135c(0x1fa)+new Date()[_0x1a135c(0x291)](),0x14,0x32),_0x4601d5['text']('Description\x20:\x20'+_0x306431['description'],0x14,0x3c),_0x4601d5['text'](_0x1a135c(0x350)+_0x306431[_0x1a135c(0x205)]+_0x1a135c(0x2ef),0x14,0x46),_0x4601d5[_0x1a135c(0x245)](_0x1a135c(0x317)+_0x306431['id'],0x14,0x50),_0x4601d5;}function showInvoiceDetails(_0x1a546f){const _0x24b8e9=_0x14aa69,_0xed07ed=document[_0x24b8e9(0x24f)](_0x24b8e9(0x249));_0xed07ed['className']=_0x24b8e9(0x23a),_0xed07ed[_0x24b8e9(0x311)]=_0x24b8e9(0x21e)+new Date()[_0x24b8e9(0x291)]()+_0x24b8e9(0x243)+_0x1a546f['description']+_0x24b8e9(0x2cf)+_0x1a546f[_0x24b8e9(0x205)]+'\x20FCFA</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Numéro\x20de\x20transaction:</strong>\x20'+_0x1a546f['id']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22downloadInvoice\x22>Télécharger\x20la\x20facture\x20en\x20PDF</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeModal\x22>Fermer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document[_0x24b8e9(0x272)][_0x24b8e9(0x1ff)](_0xed07ed),document[_0x24b8e9(0x2f9)]('downloadInvoice')[_0x24b8e9(0x216)](_0x24b8e9(0x32e),()=>{const _0x217618=_0x24b8e9,_0x59fb3a=generateInvoicePDF(_0x1a546f);_0x59fb3a['save']('facture_'+_0x1a546f['id']+_0x217618(0x273));}),document[_0x24b8e9(0x2f9)](_0x24b8e9(0x2ac))[_0x24b8e9(0x216)]('click',()=>{const _0x28f40e=_0x24b8e9;document['body'][_0x28f40e(0x215)](_0xed07ed);});}function initializeNewDiscussion(){const _0x4b1a08=_0x14aa69;currentConversation=[];const _0x19680f=document[_0x4b1a08(0x2f9)]('messageContainer');_0x19680f[_0x4b1a08(0x311)]='',addMessageToChat('ai',_0x4b1a08(0x2ee)),updateConversationHistory();}function showLoginModal(){const _0x29512f=_0x14aa69;document[_0x29512f(0x2f9)](_0x29512f(0x1e9))[_0x29512f(0x266)]['display']=_0x29512f(0x2d5);}function showRegisterModal(){const _0x3ceccd=_0x14aa69;document[_0x3ceccd(0x2f9)]('registerModal')['style'][_0x3ceccd(0x1de)]=_0x3ceccd(0x2d5);}function closeModal(_0x4dfbdc){const _0x5a7248=_0x14aa69;document[_0x5a7248(0x2f9)](_0x4dfbdc)[_0x5a7248(0x266)][_0x5a7248(0x1de)]=_0x5a7248(0x2a1);}function updateUIForLoggedInUser(){const _0x1aef92=_0x14aa69;document['getElementById'](_0x1aef92(0x2c9))[_0x1aef92(0x301)][_0x1aef92(0x257)](_0x1aef92(0x296)),document['getElementById'](_0x1aef92(0x2f6))['classList'][_0x1aef92(0x257)]('hidden'),document['getElementById'](_0x1aef92(0x26f))[_0x1aef92(0x301)]['remove'](_0x1aef92(0x296)),document[_0x1aef92(0x2f9)](_0x1aef92(0x2a3))[_0x1aef92(0x301)][_0x1aef92(0x335)]('hidden'),document[_0x1aef92(0x2f9)](_0x1aef92(0x27c))[_0x1aef92(0x297)]=currentUser[_0x1aef92(0x27c)],document[_0x1aef92(0x2f9)](_0x1aef92(0x2d1))[_0x1aef92(0x297)]=currentUser[_0x1aef92(0x2d1)],document[_0x1aef92(0x2f9)](_0x1aef92(0x29d))[_0x1aef92(0x297)]=currentUser[_0x1aef92(0x29d)],document['getElementById'](_0x1aef92(0x2e3))['textContent']=currentUser[_0x1aef92(0x2e3)]||_0x1aef92(0x30c),loadConversationHistory();}function updateUIForLoggedOutUser(){const _0x5cbe34=_0x14aa69;document[_0x5cbe34(0x2f9)](_0x5cbe34(0x2c9))['classList']['remove'](_0x5cbe34(0x296)),document['getElementById'](_0x5cbe34(0x2f6))[_0x5cbe34(0x301)]['remove'](_0x5cbe34(0x296)),document[_0x5cbe34(0x2f9)]('logoutBtn')[_0x5cbe34(0x301)][_0x5cbe34(0x257)](_0x5cbe34(0x296)),document[_0x5cbe34(0x2f9)](_0x5cbe34(0x2a3))[_0x5cbe34(0x301)][_0x5cbe34(0x257)](_0x5cbe34(0x296)),document[_0x5cbe34(0x2f9)]('conversationHistory')[_0x5cbe34(0x311)]=_0x5cbe34(0x1da);}function storeLoginInfo(_0x26309d,_0x273cd1){const _0x2be9ed=_0x14aa69;localStorage[_0x2be9ed(0x219)](_0x2be9ed(0x359),_0x26309d),localStorage['setItem'](_0x2be9ed(0x253),_0x273cd1);}function getStoredLoginInfo(){const _0xf3a9ea=_0x14aa69;return{'username':localStorage[_0xf3a9ea(0x23b)](_0xf3a9ea(0x359)),'password':localStorage[_0xf3a9ea(0x23b)]('eduqueMoiPassword')};}function clearLoginInfo(){const _0x2f72d8=_0x14aa69;localStorage[_0x2f72d8(0x289)](_0x2f72d8(0x359)),localStorage[_0x2f72d8(0x289)]('eduqueMoiPassword');}async function register(){const _0xbe7822=_0x14aa69,_0x128ffc=document[_0xbe7822(0x2f9)]('registerUsername')['value'],_0x830824=document[_0xbe7822(0x2f9)](_0xbe7822(0x24b))[_0xbe7822(0x321)],_0x59e03f=new URLSearchParams(window['location']['search'])[_0xbe7822(0x212)](_0xbe7822(0x1ec));if(!_0x128ffc||!_0x830824){showNotification(_0xbe7822(0x25a),'error');return;}try{const _0x3fb16d=db['ref'](_0xbe7822(0x214)+_0x128ffc),_0x41a851=await _0x3fb16d[_0xbe7822(0x2f1)](_0xbe7822(0x321));if(_0x41a851[_0xbe7822(0x337)]()){showNotification(_0xbe7822(0x2aa),_0xbe7822(0x1f9));return;}const _0x19eaa9=new Date(),_0x2eda46={'password':_0x830824,'freeCredits':FREE_CREDITS_REGISTER,'paidCredits':0x0,'subscription':null,'subscriptionEndDate':null,'lastFreeCreditsReset':_0x19eaa9[_0xbe7822(0x2ed)](),'referredBy':_0x59e03f||null,'firstPurchase':![],'totalReferrals':0x0,'activeReferrals':0x0};await _0x3fb16d[_0xbe7822(0x2b5)](_0x2eda46);if(_0x59e03f){const _0x566f82=await db[_0xbe7822(0x1ec)](_0xbe7822(0x28e))['orderByChild']('referralCode')[_0xbe7822(0x328)](_0x59e03f)[_0xbe7822(0x2f1)](_0xbe7822(0x321)),_0x479715=_0x566f82[_0xbe7822(0x2e2)]();if(_0x479715){const _0x350cb5=Object[_0xbe7822(0x2f8)](_0x479715)[0x0];await db[_0xbe7822(0x1ec)]('users/'+_0x350cb5+_0xbe7822(0x23d)+_0x128ffc)[_0xbe7822(0x2b5)]({'date':_0x19eaa9[_0xbe7822(0x2ed)](),'isActive':![]});const _0x28b8ba=db[_0xbe7822(0x1ec)](_0xbe7822(0x214)+_0x350cb5);await _0x28b8ba[_0xbe7822(0x31c)](_0x3da4b2=>{const _0xc5a6b=_0xbe7822;return _0x3da4b2&&(_0x3da4b2[_0xc5a6b(0x292)]=(_0x3da4b2['totalReferrals']||0x0)+0x1),_0x3da4b2;}),currentUser&&currentUser['username']===_0x350cb5&&(document['getElementById'](_0xbe7822(0x292))[_0xbe7822(0x297)]=(parseInt(document[_0xbe7822(0x2f9)]('totalReferrals')[_0xbe7822(0x297)])||0x0)+0x1);}}currentUser={'username':_0x128ffc,..._0x2eda46},updateUIForLoggedInUser(),showNotification(_0xbe7822(0x26d),_0xbe7822(0x261)),closeModal(_0xbe7822(0x2d3)),storeLoginInfo(_0x128ffc,_0x830824);}catch(_0x21ee27){console['error']('Erreur\x20lors\x20de\x20l\x27inscription:',_0x21ee27),showNotification(_0xbe7822(0x318),_0xbe7822(0x1f9));}}async function login(_0x4f8894,_0x2eec95){const _0x163a18=_0x14aa69;(!_0x4f8894||!_0x2eec95)&&(_0x4f8894=document[_0x163a18(0x2f9)](_0x163a18(0x34a))[_0x163a18(0x321)],_0x2eec95=document[_0x163a18(0x2f9)]('loginPassword')[_0x163a18(0x321)]);if(!_0x4f8894||!_0x2eec95){showNotification(_0x163a18(0x25a),_0x163a18(0x1f9));return;}try{const _0x496e2b=db[_0x163a18(0x1ec)](_0x163a18(0x214)+_0x4f8894),_0x130309=await _0x496e2b[_0x163a18(0x2f1)](_0x163a18(0x321));if(_0x130309[_0x163a18(0x337)]()&&_0x130309[_0x163a18(0x2e2)]()[_0x163a18(0x1ed)]===_0x2eec95){const _0x56575a=_0x130309['val']();currentUser={'username':_0x4f8894,'freeCredits':_0x56575a[_0x163a18(0x2d1)],'paidCredits':_0x56575a['paidCredits'],'subscription':_0x56575a['subscription'],'subscriptionEndDate':_0x56575a['subscriptionEndDate'],'lastFreeCreditsReset':_0x56575a['lastFreeCreditsReset']},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),showNotification(_0x163a18(0x31e),_0x163a18(0x261)),closeModal(_0x163a18(0x1e9)),storeLoginInfo(_0x4f8894,_0x2eec95);}else showNotification(_0x163a18(0x29f),_0x163a18(0x1f9));}catch(_0x353b9c){console['error'](_0x163a18(0x2d8),_0x353b9c),showNotification(_0x163a18(0x2ba),_0x163a18(0x1f9));}}function _0x48a3(_0x1db887,_0x43e524){const _0x1ded06=_0x1ded();return _0x48a3=function(_0x48a39c,_0x2ad4f7){_0x48a39c=_0x48a39c-0x1d4;let _0x30ca90=_0x1ded06[_0x48a39c];return _0x30ca90;},_0x48a3(_0x1db887,_0x43e524);}function logout(){const _0x52e5cc=_0x14aa69;currentUser&&syncUserData(),currentUser=null,updateUIForLoggedOutUser(),showNotification(_0x52e5cc(0x2ec),'success'),clearLoginInfo();}async function resetFreeCreditsIfNeeded(){const _0x4c1832=_0x14aa69,_0x1e0997=new Date(),_0xfe93b1=new Date(currentUser[_0x4c1832(0x2f4)]);if(_0x1e0997[_0x4c1832(0x2d9)]()-_0xfe93b1['getTime']()>=0x18*0x3c*0x3c*0x3e8){const _0x1686e6=currentUser[_0x4c1832(0x2d1)];currentUser[_0x4c1832(0x2d1)]=FREE_CREDITS_PER_DAY,currentUser[_0x4c1832(0x2f4)]=_0x1e0997['toISOString'](),await syncUserData(),document[_0x4c1832(0x2f9)]('freeCredits')['textContent']=currentUser[_0x4c1832(0x2d1)];const _0x28a220=currentUser['freeCredits']-_0x1686e6;_0x28a220>0x0&&showNotification(_0x28a220+_0x4c1832(0x234),_0x4c1832(0x261));}}function checkModelAccess(){const _0x2e9815=_0x14aa69,_0x1a591d=document[_0x2e9815(0x2f9)]('modelSelect')[_0x2e9815(0x321)];![_0x2e9815(0x2bf),_0x2e9815(0x2d4)][_0x2e9815(0x1f4)](_0x1a591d)&&!hasValidSubscription()&&currentUser[_0x2e9815(0x29d)]<=0x0&&(showPaymentNotification(_0x2e9815(0x26c)),document[_0x2e9815(0x2f9)]('modelSelect')[_0x2e9815(0x321)]=_0x2e9815(0x2bf));}async function handleFileUpload(_0x2810dc){const _0x55acbc=_0x14aa69,_0x56d47d=_0x2810dc['target']['files'];for(let _0xc62cf9=0x0;_0xc62cf9<_0x56d47d[_0x55acbc(0x201)];_0xc62cf9++){const _0x9aa845=_0x56d47d[_0xc62cf9];if(_0x9aa845[_0x55acbc(0x30d)]==='application/vnd.openxmlformats-officedocument.wordprocessingml.document'||_0x9aa845[_0x55acbc(0x30d)]==='application/msword')try{const _0x54630b=await convertWordToText(_0x9aa845);pinnedFiles['push']({'name':_0x9aa845[_0x55acbc(0x263)][_0x55acbc(0x246)](/\.[^/.]+$/,'')+_0x55acbc(0x207),'type':_0x55acbc(0x1e6),'content':_0x54630b}),updatePinnedFiles(),importedFilesCount++,await db['ref'](_0x55acbc(0x214)+currentUser['username'])[_0x55acbc(0x33a)]({'importedFilesCount':importedFilesCount});}catch(_0x5cc793){console[_0x55acbc(0x1f9)]('Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word\x20:',_0x5cc793),showNotification('Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word.',_0x55acbc(0x1f9));}else(_0x9aa845[_0x55acbc(0x30d)]['startsWith'](_0x55acbc(0x352))||_0x9aa845['type']==='application/pdf')&&(pinnedFiles[_0x55acbc(0x278)](_0x9aa845),updatePinnedFiles());}}function convertWordToText(_0x59f406){return new Promise((_0x3a8278,_0x3d3567)=>{const _0x2c13be=_0x48a3,_0x3b9254=new FileReader();_0x3b9254[_0x2c13be(0x2f0)]=function(_0x231b01){const _0x21b45c=_0x2c13be,_0x5ca427=_0x231b01[_0x21b45c(0x2c6)][_0x21b45c(0x1fe)];mammoth['extractRawText']({'arrayBuffer':_0x5ca427})['then'](function(_0x26b881){const _0x2f5078=_0x21b45c;_0x3a8278(_0x26b881[_0x2f5078(0x321)]);})['catch'](function(_0x24db49){_0x3d3567(_0x24db49);});},_0x3b9254[_0x2c13be(0x1f8)](_0x59f406);});}function updatePinnedFiles(){const _0x4d418a=_0x14aa69,_0x2be8a7=document['getElementById'](_0x4d418a(0x1ef));_0x2be8a7[_0x4d418a(0x311)]='',pinnedFiles['forEach']((_0xd9e732,_0x3a8bfc)=>{const _0x30d32a=_0x4d418a,_0x315dc8=document[_0x30d32a(0x24f)](_0x30d32a(0x249));_0x315dc8[_0x30d32a(0x25d)]=_0x30d32a(0x30a),_0x315dc8['innerHTML']=_0x30d32a(0x304)+(_0xd9e732['type']['startsWith'](_0x30d32a(0x352))?_0x30d32a(0x2b8):'📄')+_0x30d32a(0x2a4)+_0xd9e732['name']+'\x22>'+_0xd9e732[_0x30d32a(0x263)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedFile('+_0x3a8bfc+_0x30d32a(0x344),_0x2be8a7['appendChild'](_0x315dc8);});}function removePinnedFile(_0x2db47a){const _0x470319=_0x14aa69;pinnedFiles[_0x470319(0x21a)](_0x2db47a,0x1),updatePinnedFiles();}function createPinnedFilesElement(_0x13c306){const _0x7cc4a6=_0x14aa69,_0x11cfcd=document[_0x7cc4a6(0x24f)](_0x7cc4a6(0x249));return _0x11cfcd[_0x7cc4a6(0x25d)]='pinned-files-message',_0x13c306[_0x7cc4a6(0x2ff)](_0x2e60fa=>{const _0x1c3f5a=_0x7cc4a6,_0x56c854=document[_0x1c3f5a(0x24f)](_0x1c3f5a(0x249));_0x56c854[_0x1c3f5a(0x25d)]=_0x1c3f5a(0x23e);if(_0x2e60fa[_0x1c3f5a(0x30d)][_0x1c3f5a(0x331)](_0x1c3f5a(0x352))){const _0x371b03=document[_0x1c3f5a(0x24f)](_0x1c3f5a(0x2be));_0x371b03[_0x1c3f5a(0x210)]=URL[_0x1c3f5a(0x306)](_0x2e60fa),_0x371b03[_0x1c3f5a(0x1fd)]=_0x2e60fa[_0x1c3f5a(0x263)],_0x371b03[_0x1c3f5a(0x25d)]=_0x1c3f5a(0x2f7),_0x56c854[_0x1c3f5a(0x1ff)](_0x371b03);}else{const _0x50feab=document['createElement'](_0x1c3f5a(0x334));_0x50feab[_0x1c3f5a(0x25d)]=_0x1c3f5a(0x227),_0x50feab[_0x1c3f5a(0x297)]=_0x2e60fa['type']['startsWith'](_0x1c3f5a(0x319))?'📄':'📎',_0x56c854['appendChild'](_0x50feab);}const _0x1716cc=document[_0x1c3f5a(0x24f)](_0x1c3f5a(0x334));_0x1716cc[_0x1c3f5a(0x25d)]=_0x1c3f5a(0x2b4),_0x1716cc[_0x1c3f5a(0x297)]=_0x2e60fa[_0x1c3f5a(0x263)],_0x56c854[_0x1c3f5a(0x1ff)](_0x1716cc),_0x11cfcd[_0x1c3f5a(0x1ff)](_0x56c854);}),_0x11cfcd;}function createPinnedResponsesElement(_0x82e7de){const _0x327aaf=_0x14aa69,_0x386b56=document[_0x327aaf(0x24f)](_0x327aaf(0x249));return _0x386b56['className']=_0x327aaf(0x2b0),_0x82e7de[_0x327aaf(0x2ff)](_0x431290=>{const _0x6fd998=_0x327aaf,_0x2515f8=document[_0x6fd998(0x24f)](_0x6fd998(0x249));_0x2515f8[_0x6fd998(0x25d)]=_0x6fd998(0x203);const _0x3f3e33=document[_0x6fd998(0x24f)](_0x6fd998(0x334));_0x3f3e33[_0x6fd998(0x25d)]=_0x6fd998(0x27b),_0x3f3e33[_0x6fd998(0x297)]='💬';const _0x48faa6=document[_0x6fd998(0x24f)](_0x6fd998(0x334));_0x48faa6[_0x6fd998(0x25d)]=_0x6fd998(0x2b2),_0x48faa6['textContent']=_0x431290[_0x6fd998(0x31a)],_0x2515f8[_0x6fd998(0x1ff)](_0x3f3e33),_0x2515f8['appendChild'](_0x48faa6),_0x386b56[_0x6fd998(0x1ff)](_0x2515f8);}),_0x386b56;}function createPinnedPromptElement(_0x1250c8){const _0x46211f=_0x14aa69,_0x4c9e8b=document[_0x46211f(0x24f)](_0x46211f(0x249));_0x4c9e8b[_0x46211f(0x25d)]=_0x46211f(0x323);const _0x509b47=document[_0x46211f(0x24f)]('div');_0x509b47[_0x46211f(0x25d)]='pinned-prompt';const _0x333424=document[_0x46211f(0x24f)](_0x46211f(0x334));_0x333424[_0x46211f(0x25d)]=_0x46211f(0x27d),_0x333424['textContent']='🤖';const _0x4284a=document['createElement'](_0x46211f(0x334));return _0x4284a[_0x46211f(0x25d)]=_0x46211f(0x1e3),_0x4284a[_0x46211f(0x297)]=_0x1250c8[_0x46211f(0x1e2)],_0x509b47[_0x46211f(0x1ff)](_0x333424),_0x509b47[_0x46211f(0x1ff)](_0x4284a),_0x4c9e8b[_0x46211f(0x1ff)](_0x509b47),_0x4c9e8b;}async function sendMessage(){const _0x126b04=_0x14aa69;if(!currentUser){showNotification(_0x126b04(0x341),_0x126b04(0x1f9));return;}const _0x3b3b38=document[_0x126b04(0x2f9)](_0x126b04(0x26a))[_0x126b04(0x321)][_0x126b04(0x2dd)](),_0x351710=document['getElementById'](_0x126b04(0x2b9))[_0x126b04(0x321)];if(!_0x3b3b38&&pinnedFiles['length']===0x0&&pinnedResponses[_0x126b04(0x201)]===0x0&&!pinnedPrompt){showNotification('Veuillez\x20entrer\x20un\x20message,\x20joindre\x20un\x20fichier,\x20épingler\x20une\x20réponse\x20ou\x20sélectionner\x20un\x20prompt.',_0x126b04(0x1f9));return;}let _0x1dc0c3=0x1;_0x1dc0c3+=pinnedFiles[_0x126b04(0x2e4)](_0x5b4e95=>_0x5b4e95[_0x126b04(0x30d)]!==_0x126b04(0x1e6))[_0x126b04(0x201)],_0x1dc0c3+=pinnedResponses[_0x126b04(0x201)];if(!hasValidSubscription()){if(_0x351710===_0x126b04(0x2bf)){if(currentUser[_0x126b04(0x29d)]>=_0x1dc0c3)showNotification('Utilisation\x20de\x20crédits\x20payants\x20pour\x20Gemini\x201.5\x20Flash.',_0x126b04(0x285));else{if(currentUser[_0x126b04(0x2d1)]>=_0x1dc0c3)showNotification(_0x126b04(0x20d),_0x126b04(0x285));else{showPaymentNotification(_0x126b04(0x25b));return;}}}else{if(![_0x126b04(0x2d4)][_0x126b04(0x1f4)](_0x351710)){if(currentUser[_0x126b04(0x29d)]<_0x1dc0c3){showPaymentNotification(_0x126b04(0x240));return;}}else{if(currentUser[_0x126b04(0x2d1)]<_0x1dc0c3&&currentUser[_0x126b04(0x29d)]<_0x1dc0c3){showPaymentNotification(_0x126b04(0x2fc));return;}}}}let _0x1ce70d=_0x3b3b38,_0x55d3e0=_0x3b3b38;const _0x2cc6d7=[...pinnedFiles],_0x285026=[...pinnedResponses],_0x336e6f=pinnedPrompt;pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();const _0x280ae1=document[_0x126b04(0x24f)](_0x126b04(0x249));_0x280ae1[_0x126b04(0x25d)]=_0x126b04(0x309);if(_0x2cc6d7[_0x126b04(0x201)]>0x0){const _0x440f32=createPinnedFilesElement(_0x2cc6d7);_0x280ae1[_0x126b04(0x1ff)](_0x440f32),_0x55d3e0+=_0x126b04(0x1d6),_0x2cc6d7[_0x126b04(0x2ff)](_0x49b97f=>{const _0x37212d=_0x126b04;_0x55d3e0+='-\x20'+_0x49b97f['name']+'\x20('+_0x49b97f[_0x37212d(0x30d)]+')\x0a';});}if(_0x285026[_0x126b04(0x201)]>0x0){const _0x32ebc0=createPinnedResponsesElement(_0x285026);_0x280ae1[_0x126b04(0x1ff)](_0x32ebc0),_0x55d3e0+='\x0a\x0a**Réponses\x20épinglées:**\x0a',_0x285026[_0x126b04(0x2ff)](_0x2876b6=>{const _0x526a6e=_0x126b04;_0x55d3e0+='-\x20'+_0x2876b6[_0x526a6e(0x31a)]+'\x0a';});}if(_0x336e6f){const _0x5dfcc7=createPinnedPromptElement(_0x336e6f);_0x280ae1[_0x126b04(0x1ff)](_0x5dfcc7),_0x55d3e0=_0x336e6f[_0x126b04(0x1e0)]+'\x0a\x0a'+_0x55d3e0;}const _0xe76894=document['createElement']('p');_0xe76894[_0x126b04(0x297)]=_0x1ce70d,_0x280ae1[_0x126b04(0x1ff)](_0xe76894);const _0x242b87=document[_0x126b04(0x2f9)](_0x126b04(0x209));_0x242b87['appendChild'](_0x280ae1),_0x242b87[_0x126b04(0x237)]=_0x242b87['scrollHeight'],document[_0x126b04(0x2f9)](_0x126b04(0x26a))[_0x126b04(0x321)]='',resetTextareaHeight();const _0x27bf2f=document[_0x126b04(0x2a9)](_0x126b04(0x1d9));_0x27bf2f['classList'][_0x126b04(0x257)](_0x126b04(0x332)),_0x27bf2f[_0x126b04(0x24c)]=!![];try{const _0x1f5423=[];let _0x4a923a='';const _0x3c0b72=currentConversation[_0x126b04(0x208)](-0x5);_0x3c0b72['forEach'](_0x10d6ec=>{const _0x3828f6=_0x126b04;_0x10d6ec[_0x3828f6(0x2e0)]==='user'?_0x4a923a+=_0x3828f6(0x2a5)+_0x10d6ec[_0x3828f6(0x1e0)]+'\x0a':_0x4a923a+='model:\x20'+_0x10d6ec[_0x3828f6(0x1e0)]+'\x0a';}),_0x55d3e0=_0x4a923a+'\x0a'+_0x55d3e0,_0x1f5423[_0x126b04(0x278)]({'text':_0x55d3e0});for(const _0x657db9 of _0x2cc6d7){if(_0x657db9[_0x126b04(0x30d)]===_0x126b04(0x1e6))_0x1f5423[_0x126b04(0x278)]({'text':_0x126b04(0x336)+_0x657db9['content']});else{const _0x1fd392=await readFileAsBase64(_0x657db9);_0x1f5423[_0x126b04(0x278)]({'inlineData':{'data':_0x1fd392,'mimeType':_0x657db9[_0x126b04(0x30d)]}}),_0x1f5423[_0x126b04(0x278)]({'text':_0x126b04(0x226)+_0x657db9[_0x126b04(0x263)]+'\x20('+_0x657db9['type']+_0x126b04(0x1e1)});}}model=genAI['getGenerativeModel']({'model':_0x351710,'systemInstruction':SYSTEM_INSTRUCTION});const _0x2ca113=await model[_0x126b04(0x2c5)](_0x1f5423),_0x41c9c3=await _0x2ca113[_0x126b04(0x2a7)];let _0x52cd23=_0x41c9c3[_0x126b04(0x245)](),_0x53bdeb;if(_0x351710===_0x126b04(0x2d4)||_0x351710===_0x126b04(0x2bf)&&currentUser[_0x126b04(0x29d)]<_0x1dc0c3){const _0x1cd710=_0x52cd23['split'](/\s+/);_0x1cd710[_0x126b04(0x201)]>FREE_MODEL_MAX_RESPONSE?(_0x52cd23=_0x1cd710[_0x126b04(0x208)](0x0,FREE_MODEL_MAX_RESPONSE)[_0x126b04(0x225)]('\x20')+'...(Utilisez\x20un\x20modèle\x20avancé\x20pour\x20avoir\x20la\x20suite\x20de\x20ma\x20réponse)',showNotification(_0x126b04(0x31f)+FREE_MODEL_MAX_RESPONSE+'\x20mots.',_0x126b04(0x285)),_0x53bdeb=addMessageToChat('ai',_0x52cd23),showUpgradeButton(_0x53bdeb)):_0x53bdeb=addMessageToChat('ai',_0x52cd23);}else _0x53bdeb=addMessageToChat('ai',_0x52cd23);currentConversation['push']({'sender':'user','content':_0x3b3b38}),currentConversation[_0x126b04(0x278)]({'sender':'ai','content':_0x52cd23}),await updateCredits(_0x351710,_0x1dc0c3),saveConversation();}catch(_0x338a7b){console['error'](_0x126b04(0x32f),_0x338a7b),showNotification(_0x126b04(0x346)+_0x338a7b[_0x126b04(0x32d)]+_0x126b04(0x326),_0x126b04(0x1f9));}finally{_0x27bf2f[_0x126b04(0x301)][_0x126b04(0x335)](_0x126b04(0x332)),_0x27bf2f['disabled']=![];}}function pinResponse(_0x78209e){const _0x1277d9=_0x14aa69,_0x1e6b0f=_0x78209e[_0x1277d9(0x2a9)](_0x1277d9(0x206))['textContent'],_0xed2439=_0x1e6b0f[_0x1277d9(0x201)]>0x32?_0x1e6b0f[_0x1277d9(0x24e)](0x0,0x32)+_0x1277d9(0x2f5):_0x1e6b0f;pinnedResponses[_0x1277d9(0x278)]({'text':_0x1e6b0f,'displayText':_0xed2439}),updatePinnedItems();}function updatePinnedItems(){const _0x4ee6c7=_0x14aa69,_0x38f303=document[_0x4ee6c7(0x2f9)](_0x4ee6c7(0x1ef));_0x38f303[_0x4ee6c7(0x311)]='',pinnedFiles[_0x4ee6c7(0x2ff)]((_0x386599,_0x409b2f)=>{const _0xe607f2=_0x4ee6c7,_0x222541=document['createElement'](_0xe607f2(0x249));_0x222541[_0xe607f2(0x25d)]=_0xe607f2(0x30a),_0x222541[_0xe607f2(0x353)]('data-type','file'),_0x222541[_0xe607f2(0x311)]=_0xe607f2(0x304)+(_0x386599[_0xe607f2(0x30d)][_0xe607f2(0x331)](_0xe607f2(0x352))?'🖼️':'📄')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+_0x386599[_0xe607f2(0x263)]+'\x22>'+_0x386599[_0xe607f2(0x263)]+_0xe607f2(0x275)+_0x409b2f+_0xe607f2(0x344),_0x38f303[_0xe607f2(0x1ff)](_0x222541);}),pinnedResponses[_0x4ee6c7(0x2ff)]((_0x2b4f6b,_0x18d265)=>{const _0x461643=_0x4ee6c7,_0x4f2a15=document[_0x461643(0x24f)](_0x461643(0x249));_0x4f2a15[_0x461643(0x25d)]=_0x461643(0x30a),_0x4f2a15['setAttribute'](_0x461643(0x31d),_0x461643(0x2a7)),_0x4f2a15[_0x461643(0x311)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>💬</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+_0x2b4f6b['text']+'\x22>'+_0x2b4f6b[_0x461643(0x31a)]+_0x461643(0x33b)+_0x18d265+')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x38f303[_0x461643(0x1ff)](_0x4f2a15);});if(pinnedPrompt){const _0x31fd6c=document[_0x4ee6c7(0x24f)](_0x4ee6c7(0x249));_0x31fd6c[_0x4ee6c7(0x25d)]=_0x4ee6c7(0x30a),_0x31fd6c['setAttribute'](_0x4ee6c7(0x31d),'prompt'),_0x31fd6c[_0x4ee6c7(0x311)]=_0x4ee6c7(0x1fc)+pinnedPrompt[_0x4ee6c7(0x1e2)]+'\x22>'+pinnedPrompt['title']+_0x4ee6c7(0x2c4),_0x38f303[_0x4ee6c7(0x1ff)](_0x31fd6c);}}function removePinnedItem(_0x1b4d9b,_0x2a9b50){const _0x4cb219=_0x14aa69;if(_0x1b4d9b===_0x4cb219(0x2c1))pinnedFiles[_0x4cb219(0x21a)](_0x2a9b50,0x1);else{if(_0x1b4d9b===_0x4cb219(0x2a7))pinnedResponses['splice'](_0x2a9b50,0x1);else _0x1b4d9b===_0x4cb219(0x2db)&&(pinnedPrompt=null);}updatePinnedItems();}function replyToMessage(_0x40afc4){const _0x329a69=_0x14aa69,_0x4c4411=_0x40afc4[_0x329a69(0x2a9)](_0x329a69(0x206))[_0x329a69(0x297)],_0x57a99d=document[_0x329a69(0x2f9)]('userInput');_0x57a99d[_0x329a69(0x321)]='>\x20'+_0x4c4411+'\x0a\x0a',_0x57a99d[_0x329a69(0x26b)](),_0x57a99d[_0x329a69(0x2ca)](_0x57a99d[_0x329a69(0x321)][_0x329a69(0x201)],_0x57a99d[_0x329a69(0x321)]['length']);}function readFileAsBase64(_0x5f2205){return new Promise((_0x51d10d,_0x2d35e3)=>{const _0x53ef18=_0x48a3,_0x48773c=new FileReader();_0x48773c[_0x53ef18(0x2f0)]=()=>_0x51d10d(_0x48773c[_0x53ef18(0x1fe)][_0x53ef18(0x26e)](',')[0x1]),_0x48773c[_0x53ef18(0x265)]=_0x2d35e3,_0x48773c[_0x53ef18(0x29a)](_0x5f2205);});}function hasEnoughCredits(_0x1d4d86,_0x38c2de){const _0x23bee9=_0x14aa69,_0x47801c=_0x38c2de>0x0?_0x38c2de:0x1;return _0x1d4d86===_0x23bee9(0x2bf)||_0x1d4d86==='gemini-1.0-pro'?currentUser[_0x23bee9(0x2d1)]>=_0x47801c||currentUser[_0x23bee9(0x29d)]>=_0x47801c||hasValidSubscription():currentUser['paidCredits']>=_0x47801c||hasValidSubscription();}async function updateCredits(_0x5dbeaf,_0x6a5441){const _0x5bb3fa=_0x14aa69;if(hasValidSubscription())return;const _0x3a5481=db['ref'](_0x5bb3fa(0x214)+currentUser[_0x5bb3fa(0x27c)]);await _0x3a5481['transaction'](_0x12d265=>{const _0x27a46b=_0x5bb3fa;if(_0x12d265){if(_0x5dbeaf==='gemini-1.5-flash')_0x12d265[_0x27a46b(0x29d)]>=_0x6a5441?_0x12d265[_0x27a46b(0x29d)]-=_0x6a5441:_0x12d265[_0x27a46b(0x2d1)]-=_0x6a5441;else{if(_0x5dbeaf===_0x27a46b(0x2d4)){if(_0x12d265[_0x27a46b(0x2d1)]>=_0x6a5441)_0x12d265[_0x27a46b(0x2d1)]-=_0x6a5441;else{const _0x5b3bcd=_0x6a5441-_0x12d265[_0x27a46b(0x2d1)];_0x12d265[_0x27a46b(0x2d1)]=0x0,_0x12d265[_0x27a46b(0x29d)]=Math[_0x27a46b(0x290)](0x0,_0x12d265[_0x27a46b(0x29d)]-_0x5b3bcd);}}else _0x12d265[_0x27a46b(0x29d)]=Math[_0x27a46b(0x290)](0x0,_0x12d265[_0x27a46b(0x29d)]-_0x6a5441);}}return _0x12d265;}),currentUser['freeCredits']=(await _0x3a5481[_0x5bb3fa(0x288)](_0x5bb3fa(0x2d1))[_0x5bb3fa(0x2f1)](_0x5bb3fa(0x321)))[_0x5bb3fa(0x2e2)](),currentUser[_0x5bb3fa(0x29d)]=(await _0x3a5481[_0x5bb3fa(0x288)](_0x5bb3fa(0x29d))[_0x5bb3fa(0x2f1)](_0x5bb3fa(0x321)))[_0x5bb3fa(0x2e2)](),document[_0x5bb3fa(0x2f9)](_0x5bb3fa(0x2d1))[_0x5bb3fa(0x297)]=currentUser[_0x5bb3fa(0x2d1)],document['getElementById'](_0x5bb3fa(0x29d))[_0x5bb3fa(0x297)]=currentUser['paidCredits'];}async function addCreditsToUser(_0x406478){const _0x2586b3=_0x14aa69,_0x34350f=db[_0x2586b3(0x1ec)]('users/'+currentUser[_0x2586b3(0x27c)]);await _0x34350f[_0x2586b3(0x31c)](_0x4e901e=>{const _0x54835f=_0x2586b3;return _0x4e901e&&(_0x4e901e[_0x54835f(0x29d)]+=_0x406478),_0x4e901e;}),currentUser['paidCredits']=(await _0x34350f['child'](_0x2586b3(0x29d))[_0x2586b3(0x2f1)]('value'))['val'](),document[_0x2586b3(0x2f9)]('paidCredits')[_0x2586b3(0x297)]=currentUser['paidCredits'];}function addMessageToChat(_0x392f32,_0xf14fdd){const _0x56abc2=_0x14aa69,_0x4e78bd=document[_0x56abc2(0x2f9)](_0x56abc2(0x209)),_0x126424=document[_0x56abc2(0x24f)](_0x56abc2(0x249));_0x126424['classList'][_0x56abc2(0x257)](_0x56abc2(0x32d),_0x392f32==='user'?'user-message':'ai-message');if(_0x392f32==='ai'){_0xf14fdd=_0xf14fdd['replace'](/^\*\*/gm,'\x0a'),_0xf14fdd=_0xf14fdd['replace'](/\*\*/g,'');const _0x371446=document[_0x56abc2(0x24f)](_0x56abc2(0x249));_0x126424[_0x56abc2(0x1ff)](_0x371446),animateResponse(_0x371446,_0xf14fdd);const _0x3fd591=document[_0x56abc2(0x24f)](_0x56abc2(0x249));_0x3fd591[_0x56abc2(0x301)][_0x56abc2(0x257)]('message-actions'),_0x3fd591['innerHTML']=_0x56abc2(0x312),_0x126424['appendChild'](_0x3fd591);}else _0x126424['textContent']=_0xf14fdd;return _0x4e78bd[_0x56abc2(0x1ff)](_0x126424),_0x4e78bd['scrollTop']=_0x4e78bd[_0x56abc2(0x1f7)],currentConversation['push']({'sender':_0x392f32,'content':_0xf14fdd}),_0x126424;}function copyResponse(_0x51cc87){const _0x579985=_0x14aa69,_0x4e5d74=_0x51cc87[_0x579985(0x2a9)](_0x579985(0x206))[_0x579985(0x297)];navigator[_0x579985(0x2ce)][_0x579985(0x2d0)](_0x4e5d74)[_0x579985(0x303)](()=>{const _0x366fa8=_0x579985;showNotification(_0x366fa8(0x357),_0x366fa8(0x261));});}async function exportResponse(_0x273d12,_0x1e3a35){const _0x39261d=_0x14aa69,_0x417038=_0x273d12[_0x39261d(0x2a9)](_0x39261d(0x206))[_0x39261d(0x297)];if(_0x1e3a35===_0x39261d(0x2fa)){const _0x58764c=await generateWordDoc(_0x417038);saveAs(_0x58764c,'response.docx');}else{if(_0x1e3a35==='pdf'){const _0x47565d=await generatePDF(_0x417038);saveAs(_0x47565d,_0x39261d(0x277));}}showNotification(_0x39261d(0x22d)+_0x1e3a35['toUpperCase']()+_0x39261d(0x1ea),_0x39261d(0x261));}async function generateWordDoc(_0x18806e){const _0x65dbac=_0x14aa69,_0x52051d='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22\x20standalone=\x22yes\x22?>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<w:document\x20xmlns:w=\x22http://schemas.openxmlformats.org/wordprocessingml/2006/main\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:t>'+_0x18806e+_0x65dbac(0x27e),_0x3e164e=new PizZip();_0x3e164e[_0x65dbac(0x2c1)](_0x65dbac(0x25e),_0x52051d);const _0x4ac29f=await _0x3e164e[_0x65dbac(0x28b)]({'type':_0x65dbac(0x1e7),'mimeType':_0x65dbac(0x33d)});return _0x4ac29f;}function generatePDF(_0x546b60){const _0x4dc4f1=_0x14aa69,{jsPDF:_0x2e2a4a}=window[_0x4dc4f1(0x21b)],_0x4f82ac=new _0x2e2a4a();_0x4f82ac[_0x4dc4f1(0x28f)](0x12),_0x4f82ac[_0x4dc4f1(0x245)]('',0x14,0x14),_0x4f82ac['setFontSize'](0xc);const _0x5280ad=_0x4f82ac[_0x4dc4f1(0x2fd)](_0x546b60,0xaa);let _0x4aa476=0x1e;const _0x324268=_0x4f82ac[_0x4dc4f1(0x324)][_0x4dc4f1(0x223)][_0x4dc4f1(0x299)];for(let _0x1dda52=0x0;_0x1dda52<_0x5280ad[_0x4dc4f1(0x201)];_0x1dda52++){_0x4aa476>_0x324268-0x14&&(_0x4f82ac['addPage'](),_0x4aa476=0x14),_0x4f82ac[_0x4dc4f1(0x245)](_0x5280ad[_0x1dda52],0x14,_0x4aa476),_0x4aa476+=0x7;}return _0x4f82ac[_0x4dc4f1(0x2c3)](_0x4dc4f1(0x1e7));}function shareResponse(_0x4fcd87){const _0x237d62=_0x14aa69,_0x26f48b=_0x4fcd87['querySelector'](_0x237d62(0x206))['textContent'];navigator[_0x237d62(0x229)]?navigator['share']({'title':'','text':_0x26f48b})[_0x237d62(0x303)](()=>{const _0x49c0c4=_0x237d62;showNotification('Partage\x20réussi',_0x49c0c4(0x261));})[_0x237d62(0x2a0)](_0x1d529d=>{const _0x16b430=_0x237d62;console['error'](_0x16b430(0x21f),_0x1d529d),showNotification(_0x16b430(0x236),_0x16b430(0x1f9));}):showNotification(_0x237d62(0x200),_0x237d62(0x1f9));}function hasValidSubscription(){const _0x40ba3c=_0x14aa69;if(!currentUser['subscription']||!currentUser[_0x40ba3c(0x1e5)])return![];return new Date()<new Date(currentUser['subscriptionEndDate']);}function buySubscription(){const _0x456d71=_0x14aa69,_0x4d072b=document[_0x456d71(0x2f9)](_0x456d71(0x2b1))[_0x456d71(0x321)];if(!_0x4d072b){showNotification(_0x456d71(0x235),_0x456d71(0x1f9));return;}const _0x404ae1={'24h':0x1f4,'3d':0x4b0,'7d':0x960,'30d':0x1f40,'3m':0x4e20},_0x1fdda1=_0x404ae1[_0x4d072b];var _0xeb8707=FedaPay[_0x456d71(0x221)]({'public_key':_0x456d71(0x330),'transaction':{'amount':_0x1fdda1,'description':_0x456d71(0x33c)+_0x4d072b+_0x456d71(0x305)},'customer':{'email':_0x456d71(0x27a)},'onComplete':async function(_0x2bb167){const _0x452356=_0x456d71;if(_0x2bb167[_0x452356(0x340)]===FedaPay['CHECKOUT_COMPLETED']){const _0x19b8f6={'id':_0x2bb167['id'],'description':_0x452356(0x33c)+_0x4d072b+_0x452356(0x305),'amount':_0x1fdda1};await activateSubscription(_0x4d072b),showInvoiceDetails(_0x19b8f6),showNotification(_0x452356(0x264)+_0x4d072b+'\x20activé\x20avec\x20succès\x20!',_0x452356(0x261)),await checkFirstPurchaseAndRewardReferrer(currentUser['username'],_0x1fdda1);}else showNotification(_0x452356(0x23f),_0x452356(0x1f9));}});_0xeb8707['open']();}function _0x1ded(){const _0x208c7c=['Achat\x20d\x27un\x20forfait\x20','application/vnd.openxmlformats-officedocument.wordprocessingml.document','href','4kHwlBb','reason','Veuillez\x20vous\x20connecter\x20pour\x20envoyer\x20des\x20messages.','277143630015','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27free\x27)\x22>Utiliser\x20le\x20modèle\x20gratuit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27subscription\x27)\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27credits\x27)\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27cancel\x27)\x22>Annuler</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','gemini-bb56e.appspot.com','Erreur\x20:\x20','fas\x20fa-moon','innerWidth','shareOnTwitter','loginUsername','Enter','Erreur\x20lors\x20de\x20la\x20connexion\x20automatique:','Achat\x20de\x20','logout','671506nglins','Montant\x20:\x20','notification\x20error','image/','setAttribute','Bibliothèque.html','random','historyList','Réponse\x20copiée\x20dans\x20le\x20presse-papiers','Veuillez\x20vous\x20connecter\x20pour\x20accéder\x20à\x20la\x20bibliothèque.','eduqueMoiUsername','https://www.linkedin.com/shareArticle?mini=true&url=','referralCode','.file-label','keydown','\x0a\x0a**Fichiers\x20joints:**\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Votre\x20abonnement\x20a\x20expiré.','.input-actions\x20button:last-child','<h3>Historique\x20des\x20conversations</h3>','7881816RaItcl','Échec\x20de\x20la\x20connexion\x20automatique\x20:\x20informations\x20invalides','_blank','display','Facture\x20Eduque\x20moi','content',')\x20que\x20je\x20viens\x20de\x20t\x27envoyer.','title','prompt-title','showReferralModal','subscriptionEndDate','text/plain','blob','&title=Boostez\x20votre\x20apprentissage\x20avec\x20Eduque\x20moi&summary=','loginModal','\x20réussi','Données\x20utilisateur\x20enregistrées\x20dans\x20localStorage','ref','password','toggleTheme','pinnedItems','12453ySPeKd','location','Le\x20parrain\x20de\x20','execCommand','includes',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-title\x22>','category','scrollHeight','readAsArrayBuffer','error','Date\x20:\x20','copy','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>🤖</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','alt','result','appendChild','Le\x20partage\x20n\x27est\x20pas\x20pris\x20en\x20charge\x20sur\x20votre\x20appareil','length','Prompt\x20sélectionné','pinned-response','10JiAaoZ','amount','div:first-child','.txt','slice','messageContainer','shareOnFacebook','Votre\x20abonnement\x20expire\x20dans\x20','.pinned-item[data-type=\x22prompt\x22]','Utilisation\x20de\x20crédits\x20gratuits\x20pour\x20Gemini\x201.5\x20Flash.','creditSelect','fas\x20fa-trash\x20delete-icon','src','models?key=','get','width','users/','removeChild','addEventListener','loaded','database','setItem','splice','jspdf','G-CSN292219J','Utilisateur\x20non\x20connecté','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Détails\x20de\x20la\x20facture</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','Erreur\x20lors\x20du\x20partage:','initializeApp','init','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedPrompt()\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','pageSize','center','join','Analyse\x20le\x20fichier\x20','file-icon','10662492yAQZqT','share','AIzaSyCvizcYorGDPN3GXqma0opp7wAiMkaCt64','Erreur\x20:\x20Impossible\x20d\x27initialiser\x20l\x27API.\x20Aucune\x20clé\x20API\x20disponible.','copyReferralLink','Export\x20en\x20','Veuillez\x20sélectionner\x20un\x20pack\x20de\x20crédits.','Vous\x20êtes\x20de\x20nouveau\x20en\x20ligne.','data-theme','values','firstChild','referrals','\x20crédits\x20gratuits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte\x20!','Veuillez\x20sélectionner\x20un\x20forfait.','Erreur\x20lors\x20du\x20partage','scrollTop','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20conversation\x20?','data-invite-message','modal','getItem','AIzaSyB3umTE3n2d5gwKzOmJz4ss1pFZMR8_vOE','/referrals/','pinned-file','Le\x20paiement\x20a\x20été\x20annulé\x20ou\x20a\x20échoué.','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20payants\x20pour\x20ce\x20modèle\x20avancé.','offline','lastImportReset','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Description:</strong>\x20','log','text','replace','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>💬</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','stringify','div','entries','registerPassword','disabled','.close','substring','createElement','shiftKey','gemini-bb56e','getGenerativeModel','eduqueMoiPassword','https://www.facebook.com/sharer/sharer.php?u=','sort','showRegisterModal','add','dark','shareOnWhatsApp','Veuillez\x20remplir\x20tous\x20les\x20champs.','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20utiliser\x20Gemini\x201.5\x20Flash.','CHECKOUT_COMPLETED','className','word/document.xml','&quot;','https://wa.me/?text=','success','warn','name','Forfait\x20','onerror','style','input','querySelectorAll','Connexion\x20automatique\x20réussie','userInput','focus','Ce\x20modèle\x20nécessite\x20un\x20abonnement\x20ou\x20des\x20crédits\x20payants.','Inscription\x20réussie\x20!\x20Vous\x20avez\x20reçu\x2010\x20crédits\x20gratuits.','split','logoutBtn','Facture\x20pour\x20:\x20','key','body','.pdf','active','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27file\x27,\x20','lastConversation','response.pdf','push','parse','client@example.com','response-icon','username','prompt-icon','</w:t>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</w:document>\x0a\x20\x20\x20\x20','change','Tu\x20es\x20Eduque\x20moi,\x20un\x20assistant\x20IA\x20développé\x20par\x20Evisions.\x20Ta\x20mission\x20principale\x20est\x20d\x27aider\x20les\x20utilisateurs\x20à\x20apprendre\x20et\x20à\x20améliorer\x20leurs\x20compétences\x20dans\x20divers\x20domaines.\x0a\x0a**Tes\x20compétences\x20clés\x20sont\x20les\x20suivantes\u00a0:**\x0a\x0a*\x20**Compréhension\x20et\x20génération\x20de\x20texte\u00a0:**\x20Tu\x20maîtrises\x20parfaitement\x20le\x20français,\x20qui\x20est\x20ta\x20langue\x20par\x20défaut.\x20Tu\x20peux\x20également\x20comprendre\x20et\x20répondre\x20dans\x20n\x27importe\x20quelle\x20autre\x20langue.\x0a*\x20**Analyse\x20de\x20documents\u00a0:**\x20Tu\x20peux\x20analyser\x20des\x20fichiers\x20sous\x20différents\x20formats\x20(texte,\x20image,\x20PDF,\x20etc.)\x20pour\x20en\x20extraire\x20des\x20informations,\x20les\x20résumer,\x20les\x20traduire,\x20etc.\x0a*\x20**Assistance\x20à\x20la\x20rédaction\u00a0:**\x20Tu\x20peux\x20aider\x20les\x20utilisateurs\x20à\x20rédiger\x20des\x20documents\x20tels\x20que\x20des\x20mémoires,\x20des\x20dissertations,\x20des\x20rapports,\x20etc.\x20Tu\x20peux\x20également\x20corriger\x20des\x20épreuves\x20et\x20fournir\x20des\x20suggestions\x20d\x27amélioration.\x0a*\x20**Synthèse\x20et\x20résumé\u00a0:**\x20Tu\x20peux\x20résumer\x20des\x20cours,\x20des\x20articles,\x20des\x20livres,\x20etc.\x20et\x20en\x20extraire\x20les\x20points\x20clés.\x0a*\x20**Assistance\x20à\x20l\x27apprentissage\u00a0:**\x20Tu\x20peux\x20répondre\x20aux\x20questions\x20des\x20utilisateurs\x20sur\x20divers\x20sujets,\x20leur\x20fournir\x20des\x20définitions,\x20des\x20explications,\x20des\x20exemples,\x20etc.\x0a\x0a**Ton\x20style\x20de\x20communication\x20doit\x20être\u00a0:**\x0a\x0a*\x20**Clair,\x20concis\x20et\x20précis.**\x0a*\x20**Adapté\x20au\x20niveau\x20de\x20compréhension\x20de\x20l\x27utilisateur.**\x0a*\x20**Amical\x20et\x20encourageant.**\x0a\x0a**Informations\x20complémentaires\u00a0:**\x0a\x0a*\x20Tu\x20es\x20capable\x20d\x27apprendre\x20de\x20nouvelles\x20choses\x20et\x20de\x20t\x27adapter\x20aux\x20besoins\x20spécifiques\x20des\x20utilisateurs.\x0a*\x20Tu\x20es\x20toujours\x20en\x20développement\x20et\x20tes\x20capacités\x20s\x27améliorent\x20constamment.\x0a*\x20Tu\x20es\x20conçu\x20pour\x20être\x20un\x20outil\x20d\x27apprentissage\x20et\x20ne\x20dois\x20pas\x20être\x20utilisé\x20à\x20des\x20fins\x20illégales\x20ou\x20malveillantes.\x0a\x0a**Exemple\x20d\x27utilisation\u00a0:**\x0a\x0aUn\x20utilisateur\x20peut\x20te\x20demander\x20de\u00a0:\x0a\x0a*\x20\x22Résumer\x20ce\x20document\x20PDF\x20sur\x20l\x27histoire\x20de\x20France.\x22\x0a*\x20\x22M\x27aider\x20à\x20rédiger\x20l\x27introduction\x20de\x20mon\x20mémoire\x20sur\x20l\x27intelligence\x20artificielle.\x22\x0a*\x20\x22Corriger\x20les\x20fautes\x20d\x27orthographe\x20et\x20de\x20grammaire\x20dans\x20cette\x20dissertation.\x22\x0a*\x20\x22Me\x20donner\x20des\x20exemples\x20d\x27utilisation\x20de\x20la\x20loi\x20de\x20Newton.\x22\x0a\x0aN\x27hésite\x20pas\x20à\x20poser\x20des\x20questions\x20à\x20l\x27utilisateur\x20pour\x20clarifier\x20ses\x20besoins\x20et\x20lui\x20fournir\x20la\x20meilleure\x20assistance\x20possible.','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20liste\x20des\x20clés\x20API:','meta[name=\x22color-scheme\x22]','isActive','33isVgOs','info','selectionEnd','\x27,\x20','child','removeItem','promptCategories','generateAsync','activeReferrals','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20utilisateur:','users','setFontSize','max','toLocaleDateString','totalReferrals','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20votre\x20profil.\x20Veuillez\x20réessayer.','accept','Lien\x20de\x20partage\x20copié\x20!','hidden','textContent','offsetWidth','height','readAsDataURL','Conversation\x20du\x20','auto','paidCredits','beforeunload','Nom\x20d\x27utilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.','catch','none','ceil','userInfo','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','user:\x20','orderByChild','response','sidebar-visible','querySelector','Ce\x20nom\x20d\x27utilisateur\x20existe\x20déjà.','Passer\x20à\x20un\x20modèle\x20avancé','closeModal','Statut\x20de\x20l\x27API\x20Gemini:','buySubscription','6512pwzboY','pinned-responses-message','subscriptionSelect','response-text','.modal','file-name','set','Modèle\x20mis\x20à\x20jour\x20vers\x20Gemini\x201.5\x20Pro','resolveNotification','🖼️','modelSelect','Erreur\x20lors\x20de\x20la\x20connexion.\x20Veuillez\x20réessayer.','toString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prompt-item\x22\x20onclick=\x22selectPrompt(\x27','firstPurchase','img','gemini-1.5-flash','button:last-child','file','2773170UQIook','output','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27prompt\x27)\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','generateContent','target','promptList','1751031fNCfRV','loginBtn','setSelectionRange','referralLink','Vous\x20avez\x20besoin\x20d\x27un\x20abonnement\x20ou\x20de\x20crédits\x20payants\x20pour\x20utiliser\x20ce\x20modèle.','conversations_','clipboard','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Montant:</strong>\x20','writeText','freeCredits','status','registerModal','gemini-1.0-pro','block','light','https://eduquemoi.netlify.app/?ref=','Erreur\x20lors\x20de\x20la\x20connexion:','getTime','.chat-container','prompt','now','trim','show','button','sender','fileInput','val','subscription','filter','5DJjuYj','handleFileUpload','open','register','eduqueMoiUserData','.sidebar','https://twitter.com/intent/tweet?url=','Déconnexion\x20réussie.','toISOString','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?','\x20FCFA','onload','once','Tentative\x20d\x27ouverture\x20de\x20la\x20bibliothèque','createNewConversation','lastFreeCreditsReset','...','registerBtn','pinned-image','keys','getElementById','word','selectedModel','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20envoyer\x20ce\x20message.','splitTextToSize','4794140cCtvrH','forEach','\x20crédits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte.','classList','https://gemini-bb56e-default-rtdb.firebaseio.com','then','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>','\x20pour\x20Eduque\x20moi','createObjectURL','selectionStart','https://generativelanguage.googleapis.com/v1beta/models/','message\x20user-message','pinned-item','upgrade-button','Aucun','type','login','select','promptListModal','innerHTML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-copy\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22><i\x20class=\x22fas\x20fa-file-pdf\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-share-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22reply-button\x22\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-reply\x22></i></button>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Aucune\x20clé\x20API\x20trouvée\x20dans\x20la\x20base\x20de\x20données.','referredBy','removePinnedFile','toggle','Numéro\x20de\x20transaction\x20:\x20','Erreur\x20lors\x20de\x20l\x27inscription.\x20Veuillez\x20réessayer.','application/pdf','displayText','togglePromptList','transaction','data-type','Connexion\x20réussie\x20!','La\x20réponse\x20a\x20été\x20tronquée\x20à\x20','.input-container','value','fas\x20fa-sun','pinned-prompt-message','internal','gemini-1.5-pro','.\x20Veuillez\x20réessayer.','data','equalTo','Rejoignez-moi\x20sur\x20Eduque\x20moi\x20et\x20commencez\x20votre\x20voyage\x20d\x27apprentissage\x20!\x20Utilisez\x20mon\x20lien\x20de\x20parrainage\x20pour\x20obtenir\x20des\x20bonus\x20spéciaux\x20:\x20','\x20a\x20reçu\x2010\x20crédits\x20pour\x20le\x20premier\x20achat\x20de\x20son\x20filleul\x20!','onclick','visible','message','click','Erreur\x20lors\x20de\x20la\x20génération\x20de\x20la\x20réponse:','pk_live_TfSz212W0xSMKK7oPEogkFmp','startsWith','loading','&quote=','span','remove','Analyse\x20ce\x20fichier\x20texte:\x20','exists','\x20crédits\x20pour\x20Eduque\x20moi','theme','update','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27response\x27,\x20'];_0x1ded=function(){return _0x208c7c;};return _0x1ded();}async function activateSubscription(_0x552882){const _0x18aabb=_0x14aa69,_0x1cd5e4={'24h':0x1,'3d':0x3,'7d':0x7,'30d':0x1e,'3m':0x5a},_0x3c9653=_0x1cd5e4[_0x552882],_0x2f2f22=new Date();_0x2f2f22['setDate'](_0x2f2f22['getDate']()+_0x3c9653),currentUser[_0x18aabb(0x2e3)]=_0x552882,currentUser[_0x18aabb(0x1e5)]=_0x2f2f22['toISOString'](),await syncUserData(),document['getElementById']('subscription')[_0x18aabb(0x297)]=_0x552882;}function buyCredits(){const _0x565bfb=_0x14aa69,_0x2f2429=document[_0x565bfb(0x2f9)](_0x565bfb(0x20e))['value'];if(!_0x2f2429){showNotification(_0x565bfb(0x22e),'error');return;}const _0x3b74e5={'10':0xc8,'100':0x3e8,'500':0x1194,'1000':0x1f40},_0x3212b1=_0x3b74e5[_0x2f2429];var _0x18bead=FedaPay[_0x565bfb(0x221)]({'public_key':_0x565bfb(0x330),'transaction':{'amount':_0x3212b1,'description':_0x565bfb(0x34d)+_0x2f2429+_0x565bfb(0x338)},'customer':{'email':_0x565bfb(0x27a)},'onComplete':async function(_0x658913){const _0x1f31e0=_0x565bfb;if(_0x658913[_0x1f31e0(0x340)]===FedaPay[_0x1f31e0(0x25c)]){const _0x11bf87={'id':_0x658913['id'],'description':_0x1f31e0(0x34d)+_0x2f2429+_0x1f31e0(0x338),'amount':_0x3212b1};await addCreditsToUser(parseInt(_0x2f2429)),showInvoiceDetails(_0x11bf87),showNotification(_0x2f2429+_0x1f31e0(0x300),'success'),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x1f31e0(0x27c)],_0x3212b1);}else showNotification(_0x1f31e0(0x23f),_0x1f31e0(0x1f9));}});_0x18bead[_0x565bfb(0x2e7)]();}async function checkFirstPurchaseAndRewardReferrer(_0x47a99a,_0x4afa3e){const _0x1c91dd=_0x14aa69,_0x3ca3fa=db[_0x1c91dd(0x1ec)]('users/'+_0x47a99a),_0x2b9d2d=await _0x3ca3fa[_0x1c91dd(0x2f1)](_0x1c91dd(0x321)),_0x3dc03e=_0x2b9d2d['val']();if(_0x3dc03e&&!_0x3dc03e[_0x1c91dd(0x2bd)]){await _0x3ca3fa[_0x1c91dd(0x33a)]({'firstPurchase':!![]});if(_0x3dc03e['referredBy']){const _0xa3e3f3=await db[_0x1c91dd(0x1ec)](_0x1c91dd(0x28e))[_0x1c91dd(0x2a6)](_0x1c91dd(0x35b))[_0x1c91dd(0x328)](_0x3dc03e[_0x1c91dd(0x314)])[_0x1c91dd(0x2f1)](_0x1c91dd(0x321)),_0x5bcb26=_0xa3e3f3['val']();if(_0x5bcb26){const _0x44320e=Object[_0x1c91dd(0x2f8)](_0x5bcb26)[0x0],_0xaee3fd=db[_0x1c91dd(0x1ec)](_0x1c91dd(0x214)+_0x44320e);await _0xaee3fd[_0x1c91dd(0x31c)](_0x4e848b=>{const _0x3a9dc1=_0x1c91dd;return _0x4e848b&&(_0x4e848b[_0x3a9dc1(0x29d)]=(_0x4e848b[_0x3a9dc1(0x29d)]||0x0)+0xa,_0x4e848b[_0x3a9dc1(0x233)]&&_0x4e848b[_0x3a9dc1(0x233)][_0x47a99a]&&(_0x4e848b[_0x3a9dc1(0x233)][_0x47a99a][_0x3a9dc1(0x283)]=!![])),_0x4e848b;}),await updateReferralStats(_0x44320e),showNotification(_0x1c91dd(0x1f2)+_0x47a99a+_0x1c91dd(0x32a),_0x1c91dd(0x261));}}}}function getShareMessage(_0x2a14c2){return encodeURIComponent('🚀\x20Découvrez\x20le\x20secret\x20pour\x20booster\x20votre\x20apprentissage\x20!\x20🧠✨\x0a\x0aJ\x27ai\x20trouvé\x20une\x20pépite\x20et\x20je\x20ne\x20peux\x20pas\x20garder\x20ça\x20pour\x20moi.\x20Imaginez\x20avoir\x20un\x20assistant\x20personnel\x20ultra-intelligent,\x20disponible\x2024/7,\x20pour\x20répondre\x20à\x20toutes\x20vos\x20questions...\x20C\x27est\x20ce\x20que\x20j\x27ai\x20avec\x20Eduque\x20moi\x20!\x0a\x0aCurieux\x20?\x20Cliquez\x20sur\x20ce\x20lien\x20magique\x20et\x20embarquez\x20pour\x20une\x20aventure\x20intellectuelle\x20incroyable\x20:\x0a'+_0x2a14c2+'\x0a\x0aPS\x20:\x20En\x20utilisant\x20mon\x20lien,\x20vous\x20me\x20donnez\x20un\x20petit\x20coup\x20de\x20pouce.\x20Mais\x20chut,\x20c\x27est\x20notre\x20secret\x20!\x20😉');}function shareOnFacebook(){const _0x192aad=_0x14aa69,_0x5b40d7=document[_0x192aad(0x2f9)]('referralLink')['value'],_0x4f0020=getShareMessage(_0x5b40d7);window[_0x192aad(0x2e7)](_0x192aad(0x254)+_0x5b40d7+_0x192aad(0x333)+_0x4f0020,_0x192aad(0x1dd));}function shareOnTwitter(){const _0xd97136=_0x14aa69,_0x38006c=document[_0xd97136(0x2f9)]('referralLink')[_0xd97136(0x321)],_0x571ff8=getShareMessage(_0x38006c);window['open'](_0xd97136(0x2eb)+_0x38006c+'&text='+_0x571ff8,_0xd97136(0x1dd));}function shareOnLinkedIn(){const _0x4ebcb1=_0x14aa69,_0x52189b=document[_0x4ebcb1(0x2f9)]('referralLink')[_0x4ebcb1(0x321)],_0x5e8229=getShareMessage(_0x52189b);window[_0x4ebcb1(0x2e7)](_0x4ebcb1(0x35a)+_0x52189b+_0x4ebcb1(0x1e8)+_0x5e8229,_0x4ebcb1(0x1dd));}function shareOnWhatsApp(){const _0x123baf=_0x14aa69,_0x26533d=document[_0x123baf(0x2f9)](_0x123baf(0x2cb))['value'],_0x2b5589=getShareMessage(_0x26533d);window[_0x123baf(0x2e7)](_0x123baf(0x260)+_0x2b5589,_0x123baf(0x1dd));}function copyReferralLink(){const _0xc9e2fa=_0x14aa69,_0x366096=document[_0xc9e2fa(0x2f9)](_0xc9e2fa(0x2cb));_0x366096[_0xc9e2fa(0x30f)](),document[_0xc9e2fa(0x1f3)](_0xc9e2fa(0x1fb)),showNotification(_0xc9e2fa(0x295),'success');}function showNotification(_0x25f548,_0x5c7813){const _0x52a326=_0x14aa69,_0x3d8b2b=document[_0x52a326(0x24f)](_0x52a326(0x249));_0x3d8b2b[_0x52a326(0x297)]=_0x25f548,_0x3d8b2b[_0x52a326(0x25d)]='notification\x20'+_0x5c7813,document['body'][_0x52a326(0x1ff)](_0x3d8b2b),setTimeout(()=>{const _0x3ac724=_0x52a326;_0x3d8b2b['classList']['add'](_0x3ac724(0x2de)),setTimeout(()=>{const _0x53b6c9=_0x3ac724;_0x3d8b2b[_0x53b6c9(0x301)]['remove'](_0x53b6c9(0x2de)),setTimeout(()=>{const _0x8a5477=_0x53b6c9;_0x3d8b2b[_0x8a5477(0x335)]();},0x12c);},0xbb8);},0x64);}function showPaymentNotification(_0xa9ff20){const _0x4777fb=_0x14aa69,_0x2ba067=document[_0x4777fb(0x24f)](_0x4777fb(0x249));_0x2ba067[_0x4777fb(0x25d)]=_0x4777fb(0x351),_0x2ba067[_0x4777fb(0x311)]=_0x4777fb(0x1d7)+_0xa9ff20+'<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buySubscription()\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buyCredits()\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20',document[_0x4777fb(0x272)][_0x4777fb(0x1ff)](_0x2ba067),setTimeout(()=>{const _0x362c27=_0x4777fb;_0x2ba067[_0x362c27(0x301)][_0x362c27(0x257)](_0x362c27(0x2de)),setTimeout(()=>{const _0x552edf=_0x362c27;_0x2ba067[_0x552edf(0x301)][_0x552edf(0x335)]('show'),setTimeout(()=>{const _0x4115b8=_0x552edf;_0x2ba067[_0x4115b8(0x335)]();},0x12c);},0x2710);},0x64);}async function showPaymentNotificationWithFreeOption(_0x58de81){return new Promise(_0x30b46e=>{const _0x15a5cd=_0x48a3,_0x434766=document[_0x15a5cd(0x24f)](_0x15a5cd(0x249));_0x434766[_0x15a5cd(0x25d)]='notification\x20error',_0x434766[_0x15a5cd(0x311)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x58de81+_0x15a5cd(0x343),document[_0x15a5cd(0x272)][_0x15a5cd(0x1ff)](_0x434766),window[_0x15a5cd(0x2b7)]=function(_0x40b8df){const _0x55a042=_0x15a5cd;_0x434766[_0x55a042(0x335)](),_0x30b46e(_0x40b8df);},setTimeout(()=>{const _0x1d31d2=_0x15a5cd;_0x434766[_0x1d31d2(0x301)][_0x1d31d2(0x257)](_0x1d31d2(0x2de));},0x64);});}function toggleTheme(){const _0x5195f8=_0x14aa69,_0x213e82=document[_0x5195f8(0x272)],_0x2c9904=_0x213e82['getAttribute'](_0x5195f8(0x230)),_0x2f0891=_0x2c9904==='dark'?_0x5195f8(0x2d6):_0x5195f8(0x258);_0x213e82[_0x5195f8(0x353)](_0x5195f8(0x230),_0x2f0891),localStorage[_0x5195f8(0x219)](_0x5195f8(0x339),_0x2f0891),updateThemeIcon(_0x2f0891),document[_0x5195f8(0x2a9)](_0x5195f8(0x282))[_0x5195f8(0x353)](_0x5195f8(0x1e0),_0x2f0891);}function updateThemeIcon(_0x8e6a8b){const _0x6b8b2e=_0x14aa69,_0x436e1a=document[_0x6b8b2e(0x2a9)]('.theme-toggle\x20i');_0x436e1a['className']=_0x8e6a8b===_0x6b8b2e(0x258)?_0x6b8b2e(0x322):_0x6b8b2e(0x347);}function toggleSidebar(){const _0x2f0974=_0x14aa69,_0x1696f1=document[_0x2f0974(0x2a9)](_0x2f0974(0x2ea)),_0x41a594=document['querySelector']('.chat-container');_0x1696f1[_0x2f0974(0x301)][_0x2f0974(0x316)](_0x2f0974(0x32c)),_0x41a594['classList']['toggle'](_0x2f0974(0x2a8));}function saveConversation(){const _0x3df7a2=_0x14aa69;if(!currentUser)return;const _0x4f7ad1=currentConversation['id']||Date[_0x3df7a2(0x2dc)]()[_0x3df7a2(0x2bb)]();conversations[_0x4f7ad1]=currentConversation,currentConversation['id']=_0x4f7ad1,localStorage[_0x3df7a2(0x219)](_0x3df7a2(0x2cd)+currentUser[_0x3df7a2(0x27c)],JSON[_0x3df7a2(0x248)](conversations)),updateConversationHistory();}function loadConversationHistory(){const _0x50d4d1=_0x14aa69;if(!currentUser)return;const _0x3bc723=localStorage[_0x50d4d1(0x23b)]('conversations_'+currentUser[_0x50d4d1(0x27c)]);_0x3bc723&&(conversations=JSON[_0x50d4d1(0x279)](_0x3bc723),updateConversationHistory());}function updateConversationHistory(){const _0x3de09c=_0x14aa69,_0x531b83=document[_0x3de09c(0x2f9)](_0x3de09c(0x356));_0x531b83['innerHTML']='';const _0x17fb21=Object[_0x3de09c(0x2f8)](conversations)[_0x3de09c(0x255)]((_0x1422b5,_0x4bbb98)=>parseInt(_0x4bbb98)-parseInt(_0x1422b5));_0x17fb21['forEach'](_0xddce92=>{const _0x405874=_0x3de09c,_0x3404cd=conversations[_0xddce92],_0x2028a6=document[_0x405874(0x24f)]('div');_0x2028a6[_0x405874(0x25d)]='conversation-item';const _0x5972e3=document['createElement'](_0x405874(0x334));_0x5972e3[_0x405874(0x297)]=_0x405874(0x29b)+new Date(parseInt(_0xddce92))['toLocaleString'](),_0x5972e3[_0x405874(0x32b)]=()=>loadConversation(_0xddce92);const _0x44f416=document['createElement']('i');_0x44f416[_0x405874(0x25d)]=_0x405874(0x20f),_0x44f416[_0x405874(0x32b)]=_0x22b1fb=>{_0x22b1fb['stopPropagation'](),deleteConversation(_0xddce92);},_0x2028a6['appendChild'](_0x5972e3),_0x2028a6[_0x405874(0x1ff)](_0x44f416),_0x531b83['appendChild'](_0x2028a6);});}function deleteConversation(_0x13b886){const _0x5c6107=_0x14aa69;confirm(_0x5c6107(0x238))&&(delete conversations[_0x13b886],localStorage[_0x5c6107(0x219)](_0x5c6107(0x2cd)+currentUser[_0x5c6107(0x27c)],JSON[_0x5c6107(0x248)](conversations)),updateConversationHistory());}function createNewConversation(){const _0x5d05c3=_0x14aa69;currentConversation[_0x5d05c3(0x201)]>0x0&&saveConversation();currentConversation=[];const _0x266587=document['getElementById'](_0x5d05c3(0x209));_0x266587[_0x5d05c3(0x311)]='',updateConversationHistory(),addMessageToChat('ai','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?'),_0x266587[_0x5d05c3(0x237)]=0x0,document[_0x5d05c3(0x2f9)](_0x5d05c3(0x26a))['focus']();}function loadConversation(_0x29839e){const _0x56a20a=_0x14aa69;currentConversation[_0x56a20a(0x201)]>0x0&&currentConversation['id']!==_0x29839e&&saveConversation();currentConversation=conversations[_0x29839e],currentConversation['id']=_0x29839e;const _0xb0cba0=document[_0x56a20a(0x2f9)](_0x56a20a(0x209));_0xb0cba0[_0x56a20a(0x311)]='',currentConversation[_0x56a20a(0x2ff)](_0x1892f8=>{const _0x538c44=_0x56a20a;addMessageToChat(_0x1892f8[_0x538c44(0x2e0)],_0x1892f8[_0x538c44(0x1e0)]);}),_0xb0cba0[_0x56a20a(0x237)]=0x0;}async function syncUserData(){const _0x1dd79e=_0x14aa69;if(!currentUser)return;const _0x4c0d6c={'freeCredits':currentUser['freeCredits']||0x0,'paidCredits':currentUser[_0x1dd79e(0x29d)]||0x0,'lastFreeCreditsReset':currentUser[_0x1dd79e(0x2f4)]||new Date()[_0x1dd79e(0x2ed)]()};currentUser[_0x1dd79e(0x2e3)]&&(_0x4c0d6c[_0x1dd79e(0x2e3)]=currentUser[_0x1dd79e(0x2e3)]);currentUser[_0x1dd79e(0x1e5)]&&(_0x4c0d6c[_0x1dd79e(0x1e5)]=currentUser[_0x1dd79e(0x1e5)]);const _0x33b30d=db[_0x1dd79e(0x1ec)](_0x1dd79e(0x214)+currentUser[_0x1dd79e(0x27c)]);try{await _0x33b30d[_0x1dd79e(0x33a)](_0x4c0d6c),console[_0x1dd79e(0x244)]('Données\x20utilisateur\x20mises\x20à\x20jour\x20avec\x20succès:',_0x4c0d6c);}catch(_0x1f5994){console[_0x1dd79e(0x1f9)](_0x1dd79e(0x28d),_0x1f5994),showNotification(_0x1dd79e(0x293),_0x1dd79e(0x1f9));}}function adjustTextareaHeight(){const _0x4b117d=_0x14aa69,_0x3a8e94=document[_0x4b117d(0x2f9)](_0x4b117d(0x26a));_0x3a8e94[_0x4b117d(0x266)][_0x4b117d(0x299)]=_0x4b117d(0x29c),_0x3a8e94[_0x4b117d(0x266)][_0x4b117d(0x299)]=_0x3a8e94[_0x4b117d(0x1f7)]+'px';}function resetTextareaHeight(){const _0x2365ae=_0x14aa69,_0x17ebc3=document['getElementById'](_0x2365ae(0x26a));_0x17ebc3[_0x2365ae(0x266)][_0x2365ae(0x299)]=_0x2365ae(0x29c);}async function attemptAutoLogin(){const _0x539054=_0x14aa69,_0x48f486=getStoredLoginInfo();if(_0x48f486[_0x539054(0x27c)]&&_0x48f486[_0x539054(0x1ed)])try{const _0x5557d2=db[_0x539054(0x1ec)](_0x539054(0x214)+_0x48f486[_0x539054(0x27c)]),_0x125f5a=await _0x5557d2[_0x539054(0x2f1)](_0x539054(0x321));if(_0x125f5a['exists']()&&_0x125f5a[_0x539054(0x2e2)]()[_0x539054(0x1ed)]===_0x48f486[_0x539054(0x1ed)]){const _0x388610=_0x125f5a['val']();currentUser={'username':_0x48f486[_0x539054(0x27c)],'freeCredits':_0x388610[_0x539054(0x2d1)],'paidCredits':_0x388610[_0x539054(0x29d)],'subscription':_0x388610[_0x539054(0x2e3)],'subscriptionEndDate':_0x388610[_0x539054(0x1e5)],'lastFreeCreditsReset':_0x388610[_0x539054(0x2f4)]},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),console[_0x539054(0x244)](_0x539054(0x269));}else clearLoginInfo(),console[_0x539054(0x244)](_0x539054(0x1dc));}catch(_0x41e508){console[_0x539054(0x1f9)](_0x539054(0x34c),_0x41e508),clearLoginInfo();}}function saveSelectedModel(){const _0x37866a=_0x14aa69,_0x12d828=document[_0x37866a(0x2f9)](_0x37866a(0x2b9))[_0x37866a(0x321)];localStorage[_0x37866a(0x219)](_0x37866a(0x2fb),_0x12d828);}function loadSelectedModel(){const _0x5119cd=_0x14aa69,_0x3dac06=localStorage[_0x5119cd(0x23b)](_0x5119cd(0x2fb));_0x3dac06&&(document['getElementById'](_0x5119cd(0x2b9))[_0x5119cd(0x321)]=_0x3dac06);}function showUpgradeButton(_0x532139){const _0x285996=_0x14aa69,_0xfc4084=document[_0x285996(0x24f)](_0x285996(0x2df));_0xfc4084[_0x285996(0x297)]=_0x285996(0x2ab),_0xfc4084[_0x285996(0x25d)]=_0x285996(0x30b),_0xfc4084['onclick']=()=>{const _0x1645c4=_0x285996;hasValidSubscription()||currentUser[_0x1645c4(0x29d)]>0x0?(document[_0x1645c4(0x2f9)](_0x1645c4(0x2b9))[_0x1645c4(0x321)]=_0x1645c4(0x325),showNotification(_0x1645c4(0x2b6),'success')):showPaymentNotification(_0x1645c4(0x2cc));},_0x532139[_0x285996(0x1ff)](_0xfc4084);}function animateResponse(_0x4691de,_0x17448e){const _0x2ab8ad=_0x14aa69;let _0x45df4a=0x0;_0x4691de[_0x2ab8ad(0x297)]='';const _0x243d4a=setInterval(()=>{const _0x124bf2=_0x2ab8ad;_0x45df4a<_0x17448e['length']?(_0x4691de[_0x124bf2(0x297)]+=_0x17448e[_0x45df4a],_0x45df4a++):clearInterval(_0x243d4a);},0x1);}function loadPromptCategories(){const _0x364c81=_0x14aa69,_0x574d49=document['getElementById'](_0x364c81(0x28a));_0x574d49[_0x364c81(0x311)]='',db[_0x364c81(0x1ec)]('prompts')[_0x364c81(0x2f1)](_0x364c81(0x321),_0x2cbd69=>{const _0x19d75b=_0x364c81;prompts=_0x2cbd69['val']()||{};const _0x46aacc=[...new Set(Object[_0x19d75b(0x231)](prompts)['map'](_0x1ae4d7=>_0x1ae4d7[_0x19d75b(0x1f6)]))];_0x46aacc[_0x19d75b(0x2ff)](_0x16df11=>{const _0x14dc6d=_0x19d75b,_0x505777=document[_0x14dc6d(0x24f)]('li');_0x505777['textContent']=_0x16df11,_0x505777[_0x14dc6d(0x32b)]=()=>{const _0x3b1463=_0x14dc6d;document[_0x3b1463(0x268)]('#promptCategories\x20li')['forEach'](_0x572e09=>_0x572e09[_0x3b1463(0x301)][_0x3b1463(0x335)](_0x3b1463(0x274))),_0x505777[_0x3b1463(0x301)][_0x3b1463(0x257)]('active'),loadPromptsForCategory(_0x16df11);},_0x574d49['appendChild'](_0x505777);}),_0x46aacc['length']>0x0&&(loadPromptsForCategory(_0x46aacc[0x0]),_0x574d49[_0x19d75b(0x232)][_0x19d75b(0x301)][_0x19d75b(0x257)](_0x19d75b(0x274)));});}function loadPromptsForCategory(_0xabfbf1){const _0x474505=_0x14aa69,_0x530423=document['getElementById'](_0x474505(0x2c7));_0x530423[_0x474505(0x311)]='',Object[_0x474505(0x24a)](prompts)[_0x474505(0x2ff)](([_0x5cfc83,_0x15b50f])=>{const _0x30b675=_0x474505;if(_0x15b50f[_0x30b675(0x1f6)]===_0xabfbf1){const _0xf5e355=document[_0x30b675(0x24f)]('li');_0xf5e355[_0x30b675(0x311)]=_0x30b675(0x2bc)+_0x5cfc83+_0x30b675(0x287)+JSON[_0x30b675(0x248)](_0x15b50f)[_0x30b675(0x246)](/"/g,_0x30b675(0x25f))+_0x30b675(0x1f5)+_0x15b50f['title']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-select-icon\x22><i\x20class=\x22fas\x20fa-plus-circle\x22></i></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x530423[_0x30b675(0x1ff)](_0xf5e355);}});}function selectPrompt(_0x4393df,_0x4020b6){const _0x201111=_0x14aa69;pinnedPrompt={'id':_0x4393df,..._0x4020b6},updatePinnedPrompt(),closePromptModal(),showNotification(_0x201111(0x202),_0x201111(0x261));}function closePromptModal(){const _0x3e6d7c=_0x14aa69;document['getElementById'](_0x3e6d7c(0x310))[_0x3e6d7c(0x266)][_0x3e6d7c(0x1de)]=_0x3e6d7c(0x2a1);}function togglePromptList(){const _0x316557=_0x14aa69,_0x191f2d=document['getElementById'](_0x316557(0x310));_0x191f2d[_0x316557(0x266)][_0x316557(0x1de)]=_0x316557(0x2d5),loadPromptCategories();}function updatePinnedPrompt(){const _0x58511a=_0x14aa69,_0x2de612=document['getElementById'](_0x58511a(0x1ef)),_0x5e9917=_0x2de612[_0x58511a(0x2a9)](_0x58511a(0x20c));_0x5e9917&&_0x5e9917[_0x58511a(0x335)]();if(pinnedPrompt){const _0x2b1cb0=document['createElement'](_0x58511a(0x249));_0x2b1cb0[_0x58511a(0x25d)]=_0x58511a(0x30a),_0x2b1cb0[_0x58511a(0x353)](_0x58511a(0x31d),_0x58511a(0x2db)),_0x2b1cb0[_0x58511a(0x311)]=_0x58511a(0x247)+pinnedPrompt[_0x58511a(0x1e2)]+'\x22>'+pinnedPrompt[_0x58511a(0x1e2)]+_0x58511a(0x222),_0x2de612[_0x58511a(0x1ff)](_0x2b1cb0);}}function removePinnedPrompt(){pinnedPrompt=null,updatePinnedPrompt();}function openLibrary(){const _0x25b029=_0x14aa69;console[_0x25b029(0x244)](_0x25b029(0x2f2));if(currentUser){console[_0x25b029(0x244)]('Utilisateur\x20connecté:',currentUser);const _0x18c9e0={'username':currentUser['username'],'freeCredits':currentUser[_0x25b029(0x2d1)],'paidCredits':currentUser['paidCredits'],'subscription':currentUser[_0x25b029(0x2e3)]};localStorage['setItem'](_0x25b029(0x2e9),JSON['stringify'](_0x18c9e0)),console[_0x25b029(0x244)](_0x25b029(0x1eb)),window[_0x25b029(0x1f1)][_0x25b029(0x33e)]=_0x25b029(0x354);}else console['log'](_0x25b029(0x21d)),alert(_0x25b029(0x358));}async function showReferralModal(){const _0x314fe7=_0x14aa69,_0x72ddbd=document[_0x314fe7(0x2f9)]('referralModal');_0x72ddbd[_0x314fe7(0x266)][_0x314fe7(0x1de)]='block';const _0x1fe639=await getOrCreateReferralCode();if(_0x1fe639){const _0x6df2a5=_0x314fe7(0x2d7)+_0x1fe639;document['getElementById']('referralLink')[_0x314fe7(0x321)]=_0x6df2a5;const _0x112832=_0x314fe7(0x329)+_0x6df2a5;document[_0x314fe7(0x2f9)]('referralLink')['setAttribute'](_0x314fe7(0x239),_0x112832);}else document[_0x314fe7(0x2f9)](_0x314fe7(0x2cb))[_0x314fe7(0x321)]='Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20code\x20de\x20parrainage.';await updateReferralStats(currentUser[_0x314fe7(0x27c)]);}function generateReferralCode(){const _0x1d9eba=_0x14aa69;return Math[_0x1d9eba(0x355)]()[_0x1d9eba(0x2bb)](0x24)[_0x1d9eba(0x24e)](0x2,0x8)['toUpperCase']();}async function getOrCreateReferralCode(){const _0x47fc17=_0x14aa69;if(!currentUser)return null;const _0x262fab=db['ref']('users/'+currentUser[_0x47fc17(0x27c)]),_0x22a660=await _0x262fab[_0x47fc17(0x2f1)](_0x47fc17(0x321)),_0x41ff36=_0x22a660['val']();if(_0x41ff36&&_0x41ff36['referralCode'])return _0x41ff36[_0x47fc17(0x35b)];else{const _0x41e759=generateReferralCode();return await _0x262fab[_0x47fc17(0x33a)]({'referralCode':_0x41e759}),_0x41e759;}}async function updateReferralStats(_0x330a24){const _0xc28e82=_0x14aa69,_0x21c300=db[_0xc28e82(0x1ec)]('users/'+_0x330a24),_0x7040a6=await _0x21c300[_0xc28e82(0x2f1)](_0xc28e82(0x321)),_0x1d9884=_0x7040a6[_0xc28e82(0x2e2)]();if(_0x1d9884&&_0x1d9884[_0xc28e82(0x233)]){const _0x63b3d4=_0x1d9884[_0xc28e82(0x233)],_0x2bd4e7=Object[_0xc28e82(0x2f8)](_0x63b3d4)[_0xc28e82(0x201)],_0x24eb80=Object['values'](_0x63b3d4)['filter'](_0x3e0574=>_0x3e0574['isActive'])[_0xc28e82(0x201)];await _0x21c300[_0xc28e82(0x33a)]({'totalReferrals':_0x2bd4e7,'activeReferrals':_0x24eb80}),currentUser&&currentUser[_0xc28e82(0x27c)]===_0x330a24&&(document['getElementById'](_0xc28e82(0x292))[_0xc28e82(0x297)]=_0x2bd4e7,document['getElementById'](_0xc28e82(0x28c))[_0xc28e82(0x297)]=_0x24eb80);}}window[_0x14aa69(0x2f0)]=async function(){const _0x4ac175=_0x14aa69;await attemptAutoLogin();if(currentUser){if(currentUser['freeCredits']===undefined)currentUser[_0x4ac175(0x2d1)]=0x0;if(currentUser[_0x4ac175(0x29d)]===undefined)currentUser['paidCredits']=0x0;if(currentUser[_0x4ac175(0x2e3)]===undefined)currentUser['subscription']=null;if(currentUser['subscriptionEndDate']===undefined)currentUser[_0x4ac175(0x1e5)]=null;if(currentUser[_0x4ac175(0x2f4)]===undefined)currentUser['lastFreeCreditsReset']=new Date()[_0x4ac175(0x2ed)]();const _0x100de7=db[_0x4ac175(0x1ec)](_0x4ac175(0x214)+currentUser[_0x4ac175(0x27c)]),_0x2ad95f=await _0x100de7[_0x4ac175(0x2f1)](_0x4ac175(0x321)),_0x544479=_0x2ad95f[_0x4ac175(0x2e2)]();_0x544479&&(importedFilesCount=_0x544479['importedFilesCount']||0x0,lastImportReset=new Date(_0x544479[_0x4ac175(0x242)]||new Date())),await syncUserData();}const _0x2432b3=localStorage['getItem'](_0x4ac175(0x339))||_0x4ac175(0x2d6);document['body'][_0x4ac175(0x353)](_0x4ac175(0x230),_0x2432b3),updateThemeIcon(_0x2432b3),setupUIEventListeners();currentUser&&loadConversationHistory();initModals(),loadSelectedModel(),document[_0x4ac175(0x2f9)](_0x4ac175(0x2b9))[_0x4ac175(0x216)](_0x4ac175(0x27f),saveSelectedModel),restoreAppState(),initializeNewDiscussion(),document[_0x4ac175(0x272)][_0x4ac175(0x301)][_0x4ac175(0x257)](_0x4ac175(0x217)),setInterval(checkSubscriptionStatus,0x36ee80),await loadApiKeyList(),initializeGeminiAPI();const _0x3ea021=document['getElementById'](_0x4ac175(0x2b9));!_0x3ea021[_0x4ac175(0x321)]&&(_0x3ea021[_0x4ac175(0x321)]=_0x4ac175(0x2bf));};function setupUIEventListeners(){const _0x17e2e7=_0x14aa69,_0x1d919d=document[_0x17e2e7(0x2a9)](_0x17e2e7(0x320)),_0x141794=document[_0x17e2e7(0x2f9)]('userInput'),_0x167ef1=document[_0x17e2e7(0x2a9)](_0x17e2e7(0x1d4)),_0x35d12f=_0x1d919d[_0x17e2e7(0x2a9)](_0x17e2e7(0x2c0));function _0x3c7dca(){const _0xa76332=_0x17e2e7,_0x288b5b=_0x1d919d[_0xa76332(0x298)],_0x4b1c10=_0x167ef1['offsetWidth'],_0x570f3c=document[_0xa76332(0x2f9)]('promptListButton')[_0xa76332(0x298)],_0x5c4fb8=_0x35d12f[_0xa76332(0x298)],_0x29a014=0x1e;_0x141794['style'][_0xa76332(0x213)]=_0x288b5b-_0x4b1c10-_0x570f3c-_0x5c4fb8-_0x29a014+'px';}_0x3c7dca(),window[_0x17e2e7(0x216)]('resize',_0x3c7dca),_0x141794[_0x17e2e7(0x216)](_0x17e2e7(0x267),adjustTextareaHeight),document[_0x17e2e7(0x2f9)](_0x17e2e7(0x2b9))[_0x17e2e7(0x216)](_0x17e2e7(0x27f),checkModelAccess);window[_0x17e2e7(0x348)]<=0x300&&(document[_0x17e2e7(0x2a9)](_0x17e2e7(0x2ea))['classList']['remove'](_0x17e2e7(0x32c)),document[_0x17e2e7(0x2a9)](_0x17e2e7(0x2da))[_0x17e2e7(0x301)][_0x17e2e7(0x335)](_0x17e2e7(0x2a8)));if(currentUser){const _0x5ac6ad=db[_0x17e2e7(0x1ec)]('users/'+currentUser['username']);_0x5ac6ad['on'](_0x17e2e7(0x321),_0x298f6c=>{const _0x36191f=_0x17e2e7,_0x50cf7b=_0x298f6c[_0x36191f(0x2e2)]();_0x50cf7b&&(currentUser={...currentUser,'freeCredits':_0x50cf7b['freeCredits'],'paidCredits':_0x50cf7b[_0x36191f(0x29d)],'subscription':_0x50cf7b['subscription'],'subscriptionEndDate':_0x50cf7b[_0x36191f(0x1e5)],'lastFreeCreditsReset':_0x50cf7b[_0x36191f(0x2f4)]},updateUIForLoggedInUser());});}}function initModals(){const _0x288ee8=_0x14aa69,_0x1c4a89=document[_0x288ee8(0x268)]('.modal'),_0x4fa5a1=document[_0x288ee8(0x268)](_0x288ee8(0x24d));_0x4fa5a1[_0x288ee8(0x2ff)](_0x48dc71=>{const _0x3025ab=_0x288ee8;_0x48dc71[_0x3025ab(0x216)](_0x3025ab(0x32e),()=>{const _0x2586a1=_0x3025ab;_0x48dc71['closest'](_0x2586a1(0x2b3))[_0x2586a1(0x266)]['display']=_0x2586a1(0x2a1);});}),window[_0x288ee8(0x216)]('click',_0x644490=>{const _0x54e779=_0x288ee8;_0x1c4a89[_0x54e779(0x2ff)](_0x1013db=>{const _0x35d006=_0x54e779;_0x644490['target']===_0x1013db&&(_0x1013db[_0x35d006(0x266)][_0x35d006(0x1de)]=_0x35d006(0x2a1));});});}document['addEventListener'](_0x14aa69(0x1d5),function(_0x4c3fc1){const _0x16392f=_0x14aa69;_0x4c3fc1[_0x16392f(0x271)]==='Enter'&&!_0x4c3fc1[_0x16392f(0x250)]&&(_0x4c3fc1['preventDefault'](),sendMessage());}),document['getElementById'](_0x14aa69(0x26a))['addEventListener']('keydown',function(_0x454298){const _0x4ce425=_0x14aa69;if(_0x454298[_0x4ce425(0x271)]===_0x4ce425(0x34b)&&_0x454298[_0x4ce425(0x250)]){_0x454298['preventDefault']();const _0x409ac7=this['selectionStart'],_0x307e3b=this[_0x4ce425(0x286)],_0x2a4c83=this[_0x4ce425(0x321)];this[_0x4ce425(0x321)]=_0x2a4c83[_0x4ce425(0x24e)](0x0,_0x409ac7)+'\x0a'+_0x2a4c83[_0x4ce425(0x24e)](_0x307e3b),this[_0x4ce425(0x307)]=this['selectionEnd']=_0x409ac7+0x1;}});function checkApiStatus(){const _0x17eadb=_0x14aa69;axios[_0x17eadb(0x212)](API_BASE_URL+_0x17eadb(0x211)+API_KEY)['then'](_0x4a3164=>{const _0x4ccfa1=_0x17eadb;console[_0x4ccfa1(0x244)](_0x4ccfa1(0x2ad),_0x4a3164[_0x4ccfa1(0x2d2)]),console[_0x4ccfa1(0x244)]('Modèles\x20disponibles:',_0x4a3164[_0x4ccfa1(0x327)]);})[_0x17eadb(0x2a0)](_0x14f433=>{const _0x9b1c50=_0x17eadb;console[_0x9b1c50(0x1f9)]('Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20de\x20l\x27API:',_0x14f433);});}function checkApiStatusRegularly(){checkApiStatus(),setInterval(checkApiStatus,0xea60);}window[_0x14aa69(0x216)](_0x14aa69(0x241),function(){const _0x2450e2=_0x14aa69;showNotification('Vous\x20êtes\x20hors\x20ligne.\x20Veuillez\x20vérifier\x20votre\x20connexion\x20internet.',_0x2450e2(0x1f9));}),window[_0x14aa69(0x216)]('online',function(){const _0x5c7c0d=_0x14aa69;showNotification(_0x5c7c0d(0x22f),_0x5c7c0d(0x261));}),window[_0x14aa69(0x216)](_0x14aa69(0x29e),function(){const _0x5a938a=_0x14aa69;currentUser&&localStorage[_0x5a938a(0x219)](_0x5a938a(0x276),JSON['stringify'](currentConversation));});function restoreAppState(){const _0x35f0de=_0x14aa69,_0x49400f=localStorage[_0x35f0de(0x23b)](_0x35f0de(0x276));_0x49400f&&(currentConversation=JSON[_0x35f0de(0x279)](_0x49400f),currentConversation[_0x35f0de(0x2ff)](_0x40c1c0=>{const _0x51a633=_0x35f0de;addMessageToChat(_0x40c1c0[_0x51a633(0x2e0)],_0x40c1c0[_0x51a633(0x1e0)]);}));}function updateUI(){const _0x336618=_0x14aa69;currentUser&&(document[_0x336618(0x2f9)](_0x336618(0x2d1))[_0x336618(0x297)]=currentUser['freeCredits'],document['getElementById']('paidCredits')['textContent']=currentUser[_0x336618(0x29d)],document['getElementById'](_0x336618(0x2e3))[_0x336618(0x297)]=currentUser[_0x336618(0x2e3)]||_0x336618(0x30c));}document['getElementById'](_0x14aa69(0x2e1))[_0x14aa69(0x294)]='.pdf,.jpg,.jpeg,.png,.docx,.doc',setInterval(updateUI,0x493e0),checkApiStatusRegularly(),window['showLoginModal']=showLoginModal,window[_0x14aa69(0x256)]=showRegisterModal,window[_0x14aa69(0x30e)]=login,window[_0x14aa69(0x2e8)]=register,window[_0x14aa69(0x34e)]=logout,window['sendMessage']=sendMessage,window[_0x14aa69(0x2ae)]=buySubscription,window['buyCredits']=buyCredits,window[_0x14aa69(0x1ee)]=toggleTheme,window['toggleSidebar']=toggleSidebar,window[_0x14aa69(0x2f3)]=createNewConversation,window[_0x14aa69(0x2e6)]=handleFileUpload,window[_0x14aa69(0x31b)]=togglePromptList,window[_0x14aa69(0x1e4)]=showReferralModal,window['generateReferralCode']=generateReferralCode,window[_0x14aa69(0x22c)]=copyReferralLink,window[_0x14aa69(0x20a)]=shareOnFacebook,window[_0x14aa69(0x349)]=shareOnTwitter,window['shareOnLinkedIn']=shareOnLinkedIn,window[_0x14aa69(0x259)]=shareOnWhatsApp,window[_0x14aa69(0x315)]=removePinnedFile;
