const _0x41eae6=_0x444a;(function(_0x683b98,_0x5c3e87){const _0x135198=_0x444a,_0x1f4865=_0x683b98();while(!![]){try{const _0x1c9c8b=-parseInt(_0x135198(0x26c))/0x1*(-parseInt(_0x135198(0x25d))/0x2)+parseInt(_0x135198(0x22c))/0x3*(parseInt(_0x135198(0x144))/0x4)+parseInt(_0x135198(0x194))/0x5+parseInt(_0x135198(0x24f))/0x6+-parseInt(_0x135198(0x149))/0x7*(parseInt(_0x135198(0xed))/0x8)+parseInt(_0x135198(0x15a))/0x9+-parseInt(_0x135198(0x161))/0xa;if(_0x1c9c8b===_0x5c3e87)break;else _0x1f4865['push'](_0x1f4865['shift']());}catch(_0x41e457){_0x1f4865['push'](_0x1f4865['shift']());}}}(_0x5516,0x28122));function _0x444a(_0x3fffc8,_0x4948ae){const _0x551662=_0x5516();return _0x444a=function(_0x444a53,_0x50c4f5){_0x444a53=_0x444a53-0xe1;let _0x3ed89c=_0x551662[_0x444a53];return _0x3ed89c;},_0x444a(_0x3fffc8,_0x4948ae);}const API_KEY=_0x41eae6(0x24a),API_BASE_URL=_0x41eae6(0x272);let currentUser=null,pinnedFiles=[],currentConversation=[],conversations={};const FREE_CREDITS_PER_DAY=0xa,FREE_MODEL_MAX_WORDS=0x32,FREE_MODEL_MAX_RESPONSE=0x64,SYSTEM_INSTRUCTION='Tu\x20es\x20un\x20assistant\x20IA\x20nommé\x20Eduque\x20moi\x20crée\x20par\x20Evisions.\x20language\x20par\x20defaut\x20:\x20Français.\x20Tu\x20voir\x20et\x20analyser\x20travailler\x20avec\x20des\x20fichiers\x20(un\x20ou\x20plusieurs\x20fichiers\x20sous\x20differents\x20formats),\x20rediger\x20un\x20memoire\x20,\x20corriger\x20une\x20epreuve\x20,\x20resumer\x20un\x20cours\x20et\x20bien\x20plus\x20encore.\x20tu\x20peux\x20repondre\x20et\x20comprendre\x20dans\x20n\x27importe\x20quel\x20autre\x20langue\x20en\x20dehors\x20du\x20Français',firebaseConfig={'apiKey':_0x41eae6(0x1a9),'authDomain':'gemini-bb56e.firebaseapp.com','databaseURL':_0x41eae6(0x202),'projectId':_0x41eae6(0x214),'storageBucket':_0x41eae6(0x24b),'messagingSenderId':_0x41eae6(0x164),'appId':_0x41eae6(0x222),'measurementId':_0x41eae6(0x12e)};firebase[_0x41eae6(0x1af)](firebaseConfig);const db=firebase[_0x41eae6(0xf8)]();let prompts={},pinnedPrompt=null,pinnedResponses=[],genAI;const API_KEY_LIST_REF=db[_0x41eae6(0x203)]('API');let apiKeyList=[];async function loadApiKeyList(){const _0x4e39a4=_0x41eae6;try{const _0x37df87=await API_KEY_LIST_REF['once'](_0x4e39a4(0x250)),_0x16f078=_0x37df87[_0x4e39a4(0x1e7)]();_0x16f078?apiKeyList=Object[_0x4e39a4(0x10a)](_0x16f078):console[_0x4e39a4(0x1c4)](_0x4e39a4(0x1cb));}catch(_0x466166){console['error']('Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20liste\x20des\x20clés\x20API:',_0x466166);}}function getRandomApiKey(){const _0x562a0b=_0x41eae6;if(apiKeyList[_0x562a0b(0x1f3)]===0x0)return console['error']('La\x20liste\x20des\x20clés\x20API\x20est\x20vide.'),null;const _0x411eef=Math[_0x562a0b(0x190)](Math['random']()*apiKeyList['length']);return apiKeyList[_0x411eef];}function initializeGeminiAPI(){const _0xcee241=_0x41eae6,_0x10a9ff=getRandomApiKey();_0x10a9ff?(genAI=new GoogleGenerativeAI(_0x10a9ff),model=genAI[_0xcee241(0x21a)]({'model':document[_0xcee241(0x211)](_0xcee241(0x18a))[_0xcee241(0x250)],'systemInstruction':SYSTEM_INSTRUCTION})):showNotification(_0xcee241(0x1b9),_0xcee241(0x23d));}async function checkSubscriptionStatus(){const _0x59aa34=_0x41eae6;if(!currentUser||!currentUser['subscriptionEndDate'])return;const _0x1f7fa7=new Date(),_0x4ab8f6=new Date(currentUser[_0x59aa34(0x260)]);if(_0x1f7fa7>_0x4ab8f6)currentUser[_0x59aa34(0x1dc)]=null,currentUser[_0x59aa34(0x260)]=null,await syncUserData(),showNotification('Votre\x20abonnement\x20a\x20expiré.',_0x59aa34(0xe9)),updateUIForLoggedInUser();else{if(_0x1f7fa7>new Date(_0x4ab8f6[_0x59aa34(0x128)]()-0x3*0x18*0x3c*0x3c*0x3e8)){const _0x3ac075=Math['ceil']((_0x4ab8f6-_0x1f7fa7)/(0x18*0x3c*0x3c*0x3e8));showNotification(_0x59aa34(0x236)+_0x3ac075+_0x59aa34(0x267)+(_0x3ac075>0x1?'s':'')+'.','warning');}}}function generateInvoicePDF(_0x20a2be){const _0x3171e7=_0x41eae6,{jsPDF:_0x1e51a7}=window[_0x3171e7(0x1ea)],_0x43fa61=new _0x1e51a7();return _0x43fa61[_0x3171e7(0x182)](0x12),_0x43fa61[_0x3171e7(0x12b)](_0x3171e7(0x266),0x69,0x14,null,null,'center'),_0x43fa61['setFontSize'](0xc),_0x43fa61['text'](_0x3171e7(0x199)+currentUser['username'],0x14,0x28),_0x43fa61[_0x3171e7(0x12b)](_0x3171e7(0x184)+new Date()[_0x3171e7(0x189)](),0x14,0x32),_0x43fa61[_0x3171e7(0x12b)](_0x3171e7(0x1a2)+_0x20a2be['description'],0x14,0x3c),_0x43fa61[_0x3171e7(0x12b)]('Montant\x20:\x20'+_0x20a2be[_0x3171e7(0x228)]+_0x3171e7(0x183),0x14,0x46),_0x43fa61['text'](_0x3171e7(0x15c)+_0x20a2be['id'],0x14,0x50),_0x43fa61;}function showInvoiceDetails(_0x471eee){const _0x3a7f92=_0x41eae6,_0x2746a9=document[_0x3a7f92(0x131)](_0x3a7f92(0x234));_0x2746a9[_0x3a7f92(0x1c0)]=_0x3a7f92(0x22a),_0x2746a9[_0x3a7f92(0x23e)]=_0x3a7f92(0x254)+new Date()[_0x3a7f92(0x189)]()+_0x3a7f92(0x153)+_0x471eee[_0x3a7f92(0xfc)]+_0x3a7f92(0x17a)+_0x471eee[_0x3a7f92(0x228)]+_0x3a7f92(0x18b)+_0x471eee['id']+_0x3a7f92(0x140),document[_0x3a7f92(0x212)][_0x3a7f92(0x143)](_0x2746a9),document['getElementById'](_0x3a7f92(0x24c))[_0x3a7f92(0x120)](_0x3a7f92(0x1eb),()=>{const _0x3f8232=_0x3a7f92,_0x3c1e48=generateInvoicePDF(_0x471eee);_0x3c1e48[_0x3f8232(0xee)](_0x3f8232(0x146)+_0x471eee['id']+'.pdf');}),document['getElementById'](_0x3a7f92(0x20b))[_0x3a7f92(0x120)](_0x3a7f92(0x1eb),()=>{const _0x184def=_0x3a7f92;document[_0x184def(0x212)]['removeChild'](_0x2746a9);});}function initializeNewDiscussion(){const _0x343899=_0x41eae6;currentConversation=[];const _0x3ef86d=document[_0x343899(0x211)](_0x343899(0x12d));_0x3ef86d['innerHTML']='',addMessageToChat('ai',_0x343899(0x26e)),updateConversationHistory();}function showLoginModal(){const _0x1b4882=_0x41eae6;document[_0x1b4882(0x211)](_0x1b4882(0x1fe))[_0x1b4882(0x1c7)][_0x1b4882(0x169)]=_0x1b4882(0xe8);}function showRegisterModal(){const _0x4e559d=_0x41eae6;document[_0x4e559d(0x211)](_0x4e559d(0x197))[_0x4e559d(0x1c7)][_0x4e559d(0x169)]=_0x4e559d(0xe8);}function closeModal(_0x474850){const _0x4e7476=_0x41eae6;document[_0x4e7476(0x211)](_0x474850)['style'][_0x4e7476(0x169)]=_0x4e7476(0x107);}function updateUIForLoggedInUser(){const _0x45e2ce=_0x41eae6;document['getElementById'](_0x45e2ce(0xf1))[_0x45e2ce(0x23b)]['add'](_0x45e2ce(0x157)),document[_0x45e2ce(0x211)](_0x45e2ce(0x137))[_0x45e2ce(0x23b)][_0x45e2ce(0x1b0)](_0x45e2ce(0x157)),document['getElementById'](_0x45e2ce(0x1ff))[_0x45e2ce(0x23b)][_0x45e2ce(0x18d)]('hidden'),document[_0x45e2ce(0x211)](_0x45e2ce(0x166))[_0x45e2ce(0x23b)]['remove'](_0x45e2ce(0x157)),document['getElementById'](_0x45e2ce(0x1d5))['textContent']=currentUser['username'],document[_0x45e2ce(0x211)](_0x45e2ce(0x1f1))[_0x45e2ce(0x119)]=currentUser[_0x45e2ce(0x1f1)],document[_0x45e2ce(0x211)](_0x45e2ce(0x1ce))[_0x45e2ce(0x119)]=currentUser['paidCredits'],document[_0x45e2ce(0x211)](_0x45e2ce(0x1dc))[_0x45e2ce(0x119)]=currentUser[_0x45e2ce(0x1dc)]||_0x45e2ce(0x11b),loadConversationHistory();}function updateUIForLoggedOutUser(){const _0x1672e8=_0x41eae6;document[_0x1672e8(0x211)](_0x1672e8(0xf1))[_0x1672e8(0x23b)]['remove'](_0x1672e8(0x157)),document[_0x1672e8(0x211)](_0x1672e8(0x137))[_0x1672e8(0x23b)]['remove'](_0x1672e8(0x157)),document[_0x1672e8(0x211)]('logoutBtn')['classList']['add'](_0x1672e8(0x157)),document[_0x1672e8(0x211)]('userInfo')[_0x1672e8(0x23b)][_0x1672e8(0x1b0)](_0x1672e8(0x157)),document[_0x1672e8(0x211)](_0x1672e8(0x150))['innerHTML']='<h3>Historique\x20des\x20conversations</h3>';}function storeLoginInfo(_0x21b161,_0x1f4d7c){const _0x4b08ef=_0x41eae6;localStorage[_0x4b08ef(0x160)](_0x4b08ef(0x117),_0x21b161),localStorage[_0x4b08ef(0x160)](_0x4b08ef(0x24e),_0x1f4d7c);}function getStoredLoginInfo(){const _0x458ba7=_0x41eae6;return{'username':localStorage[_0x458ba7(0x239)](_0x458ba7(0x117)),'password':localStorage[_0x458ba7(0x239)](_0x458ba7(0x24e))};}function clearLoginInfo(){const _0x25c6c5=_0x41eae6;localStorage[_0x25c6c5(0x192)]('eduqueMoiUsername'),localStorage[_0x25c6c5(0x192)](_0x25c6c5(0x24e));}async function register(){const _0x5dc72a=_0x41eae6,_0xaa7ff=document[_0x5dc72a(0x211)](_0x5dc72a(0x23c))[_0x5dc72a(0x250)],_0x333442=document[_0x5dc72a(0x211)](_0x5dc72a(0x1c2))['value'],_0x4b83c8=new URLSearchParams(window[_0x5dc72a(0x1bb)][_0x5dc72a(0x1a1)])[_0x5dc72a(0x258)](_0x5dc72a(0x203));if(!_0xaa7ff||!_0x333442){showNotification('Veuillez\x20remplir\x20tous\x20les\x20champs.',_0x5dc72a(0x23d));return;}try{const _0x58bc87=db[_0x5dc72a(0x203)](_0x5dc72a(0x1a7)+_0xaa7ff),_0x22024e=await _0x58bc87['once']('value');if(_0x22024e[_0x5dc72a(0x235)]()){showNotification('Ce\x20nom\x20d\x27utilisateur\x20existe\x20déjà.',_0x5dc72a(0x23d));return;}const _0xad397e=new Date(),_0x1d882e={'password':_0x333442,'freeCredits':FREE_CREDITS_PER_DAY,'paidCredits':0x0,'subscription':null,'subscriptionEndDate':null,'lastFreeCreditsReset':_0xad397e[_0x5dc72a(0x191)](),'referredBy':_0x4b83c8||null,'firstPurchase':![],'totalReferrals':0x0,'activeReferrals':0x0};await _0x58bc87[_0x5dc72a(0x11e)](_0x1d882e);if(_0x4b83c8){const _0x479929=await db[_0x5dc72a(0x203)](_0x5dc72a(0xef))[_0x5dc72a(0x122)](_0x5dc72a(0x127))['equalTo'](_0x4b83c8)[_0x5dc72a(0x19c)](_0x5dc72a(0x250)),_0x361bc5=_0x479929[_0x5dc72a(0x1e7)]();if(_0x361bc5){const _0x338790=Object[_0x5dc72a(0x15d)](_0x361bc5)[0x0];await db[_0x5dc72a(0x203)](_0x5dc72a(0x1a7)+_0x338790+'/referrals/'+_0xaa7ff)['set']({'date':_0xad397e['toISOString'](),'isActive':![]});const _0x17a1b2=db['ref'](_0x5dc72a(0x1a7)+_0x338790);await _0x17a1b2['transaction'](_0x2a3e46=>{const _0x4460a5=_0x5dc72a;return _0x2a3e46&&(_0x2a3e46['totalReferrals']=(_0x2a3e46[_0x4460a5(0x209)]||0x0)+0x1),_0x2a3e46;}),currentUser&&currentUser[_0x5dc72a(0x1d5)]===_0x338790&&(document[_0x5dc72a(0x211)](_0x5dc72a(0x209))[_0x5dc72a(0x119)]=(parseInt(document[_0x5dc72a(0x211)]('totalReferrals')[_0x5dc72a(0x119)])||0x0)+0x1);}}currentUser={'username':_0xaa7ff,..._0x1d882e},updateUIForLoggedInUser(),showNotification('Inscription\x20réussie\x20!',_0x5dc72a(0x181)),closeModal(_0x5dc72a(0x197)),storeLoginInfo(_0xaa7ff,_0x333442);}catch(_0xfd3972){console[_0x5dc72a(0x23d)]('Erreur\x20lors\x20de\x20l\x27inscription:',_0xfd3972),showNotification(_0x5dc72a(0x241),_0x5dc72a(0x23d));}}async function login(_0x53dc77,_0x32557b){const _0x57a1cf=_0x41eae6;(!_0x53dc77||!_0x32557b)&&(_0x53dc77=document['getElementById'](_0x57a1cf(0x1d3))[_0x57a1cf(0x250)],_0x32557b=document[_0x57a1cf(0x211)](_0x57a1cf(0x170))[_0x57a1cf(0x250)]);if(!_0x53dc77||!_0x32557b){showNotification(_0x57a1cf(0x141),_0x57a1cf(0x23d));return;}try{const _0x105237=db[_0x57a1cf(0x203)](_0x57a1cf(0x1a7)+_0x53dc77),_0x4e7888=await _0x105237[_0x57a1cf(0x19c)](_0x57a1cf(0x250));if(_0x4e7888['exists']()&&_0x4e7888[_0x57a1cf(0x1e7)]()['password']===_0x32557b){const _0x3056a3=_0x4e7888[_0x57a1cf(0x1e7)]();currentUser={'username':_0x53dc77,'freeCredits':_0x3056a3['freeCredits'],'paidCredits':_0x3056a3[_0x57a1cf(0x1ce)],'subscription':_0x3056a3[_0x57a1cf(0x1dc)],'subscriptionEndDate':_0x3056a3[_0x57a1cf(0x260)],'lastFreeCreditsReset':_0x3056a3[_0x57a1cf(0x251)]},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),showNotification(_0x57a1cf(0x13d),_0x57a1cf(0x181)),closeModal('loginModal'),storeLoginInfo(_0x53dc77,_0x32557b);}else showNotification(_0x57a1cf(0x242),_0x57a1cf(0x23d));}catch(_0x427e81){console[_0x57a1cf(0x23d)](_0x57a1cf(0x1cd),_0x427e81),showNotification(_0x57a1cf(0x1ed),'error');}}function logout(){const _0x354aa1=_0x41eae6;currentUser&&syncUserData(),currentUser=null,updateUIForLoggedOutUser(),showNotification('Déconnexion\x20réussie.',_0x354aa1(0x181)),clearLoginInfo();}async function resetFreeCreditsIfNeeded(){const _0x4b3083=_0x41eae6,_0x1a9497=new Date(),_0x1551c8=new Date(currentUser[_0x4b3083(0x251)]);if(_0x1a9497['getTime']()-_0x1551c8[_0x4b3083(0x128)]()>=0x18*0x3c*0x3c*0x3e8){const _0x16c540=currentUser['freeCredits'];currentUser['freeCredits']=FREE_CREDITS_PER_DAY,currentUser[_0x4b3083(0x251)]=_0x1a9497[_0x4b3083(0x191)](),await syncUserData(),document[_0x4b3083(0x211)](_0x4b3083(0x1f1))[_0x4b3083(0x119)]=currentUser[_0x4b3083(0x1f1)];const _0x2faf15=currentUser['freeCredits']-_0x16c540;_0x2faf15>0x0&&showNotification(_0x2faf15+_0x4b3083(0x14d),_0x4b3083(0x181));}}function checkModelAccess(){const _0x36170d=_0x41eae6,_0x330c64=document[_0x36170d(0x211)](_0x36170d(0x18a))['value'];![_0x36170d(0x259),_0x36170d(0x25c)][_0x36170d(0x1d9)](_0x330c64)&&!hasValidSubscription()&&currentUser['paidCredits']<=0x0&&(showPaymentNotification(_0x36170d(0x124)),document['getElementById']('modelSelect')[_0x36170d(0x250)]=_0x36170d(0x259));}async function handleFileUpload(_0x51a681){const _0x324738=_0x41eae6,_0x46e7be=_0x51a681['target'][_0x324738(0x1c3)];for(let _0x1ee34a=0x0;_0x1ee34a<_0x46e7be['length'];_0x1ee34a++){const _0x49e01=_0x46e7be[_0x1ee34a];if(_0x49e01[_0x324738(0x179)]==='application/vnd.openxmlformats-officedocument.wordprocessingml.document'||_0x49e01['type']===_0x324738(0x224))try{const _0x4e1851=await convertWordToText(_0x49e01);pinnedFiles[_0x324738(0x145)]({'name':_0x49e01[_0x324738(0x1e3)][_0x324738(0x253)](/\.[^/.]+$/,'')+'.txt','type':_0x324738(0x152),'content':_0x4e1851}),updatePinnedFiles(),importedFilesCount++,await db[_0x324738(0x203)]('users/'+currentUser[_0x324738(0x1d5)])[_0x324738(0x1fa)]({'importedFilesCount':importedFilesCount});}catch(_0x1abb68){console['error']('Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word\x20:',_0x1abb68),showNotification('Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word.',_0x324738(0x23d));}else(_0x49e01[_0x324738(0x179)][_0x324738(0x114)](_0x324738(0x1c9))||_0x49e01[_0x324738(0x179)]===_0x324738(0x25f))&&(pinnedFiles[_0x324738(0x145)](_0x49e01),updatePinnedFiles());}}function convertWordToText(_0x2dce04){return new Promise((_0x2ba746,_0xb4a9fb)=>{const _0x27846d=_0x444a,_0x26f1b9=new FileReader();_0x26f1b9[_0x27846d(0xfe)]=function(_0xbd688e){const _0x2f77c4=_0x27846d,_0x5e1815=_0xbd688e[_0x2f77c4(0x213)][_0x2f77c4(0x135)];mammoth[_0x2f77c4(0x1f2)]({'arrayBuffer':_0x5e1815})[_0x2f77c4(0x25b)](function(_0x4a6b5e){const _0x85e0a3=_0x2f77c4;_0x2ba746(_0x4a6b5e[_0x85e0a3(0x250)]);})[_0x2f77c4(0x1ef)](function(_0x750de8){_0xb4a9fb(_0x750de8);});},_0x26f1b9[_0x27846d(0x19f)](_0x2dce04);});}function updatePinnedFiles(){const _0x58a604=_0x41eae6,_0x38a35b=document[_0x58a604(0x211)]('pinnedItems');_0x38a35b[_0x58a604(0x23e)]='',pinnedFiles[_0x58a604(0x12c)]((_0x4e8446,_0x316ae7)=>{const _0x397061=_0x58a604,_0xbaa206=document['createElement'](_0x397061(0x234));_0xbaa206[_0x397061(0x1c0)]='pinned-item',_0xbaa206['innerHTML']=_0x397061(0x19b)+(_0x4e8446['type'][_0x397061(0x114)](_0x397061(0x1c9))?'🖼️':'📄')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+_0x4e8446[_0x397061(0x1e3)]+'\x22>'+_0x4e8446[_0x397061(0x1e3)]+_0x397061(0x1ad)+_0x316ae7+_0x397061(0x20e),_0x38a35b[_0x397061(0x143)](_0xbaa206);});}function removePinnedFile(_0x56c547){const _0x48b353=_0x41eae6;pinnedFiles[_0x48b353(0x1c1)](_0x56c547,0x1),updatePinnedFiles();}function createPinnedFilesElement(_0x3248cd){const _0x52d8a0=_0x41eae6,_0x1108ed=document[_0x52d8a0(0x131)](_0x52d8a0(0x234));return _0x1108ed[_0x52d8a0(0x1c0)]=_0x52d8a0(0x1a5),_0x3248cd[_0x52d8a0(0x12c)](_0x3ad881=>{const _0x26d9e0=_0x52d8a0,_0xfffc58=document[_0x26d9e0(0x131)]('div');_0xfffc58[_0x26d9e0(0x1c0)]='pinned-file';if(_0x3ad881[_0x26d9e0(0x179)][_0x26d9e0(0x114)](_0x26d9e0(0x1c9))){const _0x5991b7=document[_0x26d9e0(0x131)](_0x26d9e0(0x105));_0x5991b7[_0x26d9e0(0x215)]=URL[_0x26d9e0(0x168)](_0x3ad881),_0x5991b7[_0x26d9e0(0x1f4)]=_0x3ad881[_0x26d9e0(0x1e3)],_0x5991b7[_0x26d9e0(0x1c0)]=_0x26d9e0(0x17d),_0xfffc58[_0x26d9e0(0x143)](_0x5991b7);}else{const _0x5d8d97=document[_0x26d9e0(0x131)](_0x26d9e0(0xf6));_0x5d8d97[_0x26d9e0(0x1c0)]=_0x26d9e0(0x116),_0x5d8d97[_0x26d9e0(0x119)]=_0x3ad881['type'][_0x26d9e0(0x114)](_0x26d9e0(0x25f))?'📄':'📎',_0xfffc58['appendChild'](_0x5d8d97);}const _0x45c317=document[_0x26d9e0(0x131)](_0x26d9e0(0xf6));_0x45c317[_0x26d9e0(0x1c0)]=_0x26d9e0(0x1be),_0x45c317[_0x26d9e0(0x119)]=_0x3ad881[_0x26d9e0(0x1e3)],_0xfffc58['appendChild'](_0x45c317),_0x1108ed[_0x26d9e0(0x143)](_0xfffc58);}),_0x1108ed;}function createPinnedResponsesElement(_0xb82f58){const _0x4b6491=_0x41eae6,_0x5b8d07=document[_0x4b6491(0x131)](_0x4b6491(0x234));return _0x5b8d07['className']=_0x4b6491(0x12f),_0xb82f58[_0x4b6491(0x12c)](_0x313d3e=>{const _0x25868f=_0x4b6491,_0x4607c0=document[_0x25868f(0x131)](_0x25868f(0x234));_0x4607c0[_0x25868f(0x1c0)]=_0x25868f(0x188);const _0x435c40=document[_0x25868f(0x131)](_0x25868f(0xf6));_0x435c40[_0x25868f(0x1c0)]=_0x25868f(0x21e),_0x435c40['textContent']='💬';const _0x378c3c=document['createElement'](_0x25868f(0xf6));_0x378c3c[_0x25868f(0x1c0)]=_0x25868f(0x139),_0x378c3c[_0x25868f(0x119)]=_0x313d3e['displayText'],_0x4607c0[_0x25868f(0x143)](_0x435c40),_0x4607c0[_0x25868f(0x143)](_0x378c3c),_0x5b8d07[_0x25868f(0x143)](_0x4607c0);}),_0x5b8d07;}function createPinnedPromptElement(_0xe5b8c4){const _0x17cc3b=_0x41eae6,_0x4902c3=document['createElement'](_0x17cc3b(0x234));_0x4902c3['className']=_0x17cc3b(0x265);const _0x4cc25b=document[_0x17cc3b(0x131)](_0x17cc3b(0x234));_0x4cc25b[_0x17cc3b(0x1c0)]=_0x17cc3b(0x270);const _0x164bd5=document[_0x17cc3b(0x131)](_0x17cc3b(0xf6));_0x164bd5[_0x17cc3b(0x1c0)]=_0x17cc3b(0x126),_0x164bd5[_0x17cc3b(0x119)]='🤖';const _0x1b4d96=document[_0x17cc3b(0x131)](_0x17cc3b(0xf6));return _0x1b4d96[_0x17cc3b(0x1c0)]=_0x17cc3b(0x12a),_0x1b4d96['textContent']=_0xe5b8c4[_0x17cc3b(0x223)],_0x4cc25b['appendChild'](_0x164bd5),_0x4cc25b[_0x17cc3b(0x143)](_0x1b4d96),_0x4902c3[_0x17cc3b(0x143)](_0x4cc25b),_0x4902c3;}async function sendMessage(){const _0x5a1c80=_0x41eae6;if(!currentUser){showNotification(_0x5a1c80(0x1c5),'error');return;}const _0x599527=document[_0x5a1c80(0x211)](_0x5a1c80(0x13e))[_0x5a1c80(0x250)][_0x5a1c80(0x102)](),_0x2bf12a=document[_0x5a1c80(0x211)](_0x5a1c80(0x18a))[_0x5a1c80(0x250)];if(!_0x599527&&pinnedFiles['length']===0x0&&pinnedResponses[_0x5a1c80(0x1f3)]===0x0&&!pinnedPrompt){showNotification('Veuillez\x20entrer\x20un\x20message,\x20joindre\x20un\x20fichier,\x20épingler\x20une\x20réponse\x20ou\x20sélectionner\x20un\x20prompt.',_0x5a1c80(0x23d));return;}let _0x329b82=0x1;_0x329b82+=pinnedFiles[_0x5a1c80(0x10b)](_0x5aeb08=>_0x5aeb08['type']!=='text/plain')['length'],_0x329b82+=pinnedResponses['length'];if(!hasValidSubscription()){if(_0x2bf12a===_0x5a1c80(0x259)){if(currentUser[_0x5a1c80(0x1ce)]>=_0x329b82)showNotification(_0x5a1c80(0x180),_0x5a1c80(0xe9));else{if(currentUser['freeCredits']>=_0x329b82)showNotification(_0x5a1c80(0x1c8),_0x5a1c80(0xe9));else{showPaymentNotification(_0x5a1c80(0x174));return;}}}else{if(![_0x5a1c80(0x25c)][_0x5a1c80(0x1d9)](_0x2bf12a)){if(currentUser[_0x5a1c80(0x1ce)]<_0x329b82){showPaymentNotification(_0x5a1c80(0x1cf));return;}}else{if(currentUser['freeCredits']<_0x329b82&&currentUser[_0x5a1c80(0x1ce)]<_0x329b82){showPaymentNotification(_0x5a1c80(0x26f));return;}}}}let _0x35b1d3=_0x599527,_0x410b98=_0x599527;const _0x56998c=[...pinnedFiles],_0x247ac7=[...pinnedResponses],_0x27871e=pinnedPrompt;pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();const _0x4f3bf1=document[_0x5a1c80(0x131)](_0x5a1c80(0x234));_0x4f3bf1[_0x5a1c80(0x1c0)]='message\x20user-message';if(_0x56998c[_0x5a1c80(0x1f3)]>0x0){const _0x44cf76=createPinnedFilesElement(_0x56998c);_0x4f3bf1['appendChild'](_0x44cf76),_0x410b98+=_0x5a1c80(0x1bf),_0x56998c[_0x5a1c80(0x12c)](_0x2be78a=>{const _0x390c52=_0x5a1c80;_0x410b98+='-\x20'+_0x2be78a[_0x390c52(0x1e3)]+'\x20('+_0x2be78a[_0x390c52(0x179)]+')\x0a';});}if(_0x247ac7[_0x5a1c80(0x1f3)]>0x0){const _0x507fd5=createPinnedResponsesElement(_0x247ac7);_0x4f3bf1[_0x5a1c80(0x143)](_0x507fd5),_0x410b98+=_0x5a1c80(0x136),_0x247ac7[_0x5a1c80(0x12c)](_0x3a99d4=>{const _0xee57ae=_0x5a1c80;_0x410b98+='-\x20'+_0x3a99d4[_0xee57ae(0x226)]+'\x0a';});}if(_0x27871e){const _0x3a3696=createPinnedPromptElement(_0x27871e);_0x4f3bf1['appendChild'](_0x3a3696),_0x410b98=_0x27871e['content']+'\x0a\x0a'+_0x410b98;}const _0x370370=document[_0x5a1c80(0x131)]('p');_0x370370[_0x5a1c80(0x119)]=_0x35b1d3,_0x4f3bf1[_0x5a1c80(0x143)](_0x370370);const _0x1d683b=document[_0x5a1c80(0x211)]('messageContainer');_0x1d683b[_0x5a1c80(0x143)](_0x4f3bf1),_0x1d683b[_0x5a1c80(0x1bc)]=_0x1d683b[_0x5a1c80(0x1f9)],document[_0x5a1c80(0x211)](_0x5a1c80(0x13e))['value']='',resetTextareaHeight();const _0x4365e2=document[_0x5a1c80(0x22d)](_0x5a1c80(0xf4));_0x4365e2[_0x5a1c80(0x23b)][_0x5a1c80(0x1b0)](_0x5a1c80(0x16e)),_0x4365e2['disabled']=!![];try{const _0x25c0de=[];let _0x37d12f='';const _0x5ba0e0=currentConversation['slice'](-0x5);_0x5ba0e0[_0x5a1c80(0x12c)](_0x47a340=>{const _0x35a405=_0x5a1c80;_0x47a340[_0x35a405(0x1b2)]===_0x35a405(0x158)?_0x37d12f+=_0x35a405(0x148)+_0x47a340[_0x35a405(0xf7)]+'\x0a':_0x37d12f+=_0x35a405(0x187)+_0x47a340[_0x35a405(0xf7)]+'\x0a';}),_0x410b98=_0x37d12f+'\x0a'+_0x410b98,_0x25c0de[_0x5a1c80(0x145)]({'text':_0x410b98});for(const _0x3eb736 of _0x56998c){if(_0x3eb736[_0x5a1c80(0x179)]===_0x5a1c80(0x152))_0x25c0de[_0x5a1c80(0x145)]({'text':_0x5a1c80(0x108)+_0x3eb736[_0x5a1c80(0xf7)]});else{const _0x4a8dc9=await readFileAsBase64(_0x3eb736);_0x25c0de[_0x5a1c80(0x145)]({'inlineData':{'data':_0x4a8dc9,'mimeType':_0x3eb736[_0x5a1c80(0x179)]}}),_0x25c0de['push']({'text':_0x5a1c80(0x103)+_0x3eb736['name']+'\x20('+_0x3eb736[_0x5a1c80(0x179)]+_0x5a1c80(0x216)});}}model=genAI[_0x5a1c80(0x21a)]({'model':_0x2bf12a,'systemInstruction':SYSTEM_INSTRUCTION});const _0x419897=await model[_0x5a1c80(0xe6)](_0x25c0de),_0x4de842=await _0x419897[_0x5a1c80(0x217)];let _0x5a196c=_0x4de842[_0x5a1c80(0x12b)](),_0x1a3eef;if(_0x2bf12a===_0x5a1c80(0x25c)||_0x2bf12a==='gemini-1.5-flash'&&currentUser['paidCredits']<_0x329b82){const _0x5d7562=_0x5a196c[_0x5a1c80(0x155)](/\s+/);_0x5d7562[_0x5a1c80(0x1f3)]>FREE_MODEL_MAX_RESPONSE?(_0x5a196c=_0x5d7562[_0x5a1c80(0xf2)](0x0,FREE_MODEL_MAX_RESPONSE)['join']('\x20')+_0x5a1c80(0x1e1),showNotification(_0x5a1c80(0x104)+FREE_MODEL_MAX_RESPONSE+_0x5a1c80(0x1d4),_0x5a1c80(0xe9)),_0x1a3eef=addMessageToChat('ai',_0x5a196c),showUpgradeButton(_0x1a3eef)):_0x1a3eef=addMessageToChat('ai',_0x5a196c);}else _0x1a3eef=addMessageToChat('ai',_0x5a196c);currentConversation[_0x5a1c80(0x145)]({'sender':_0x5a1c80(0x158),'content':_0x599527}),currentConversation[_0x5a1c80(0x145)]({'sender':'ai','content':_0x5a196c}),await updateCredits(_0x2bf12a,_0x329b82),saveConversation();}catch(_0x10896a){console['error']('Erreur\x20lors\x20de\x20la\x20génération\x20de\x20la\x20réponse:',_0x10896a),showNotification('Erreur\x20:\x20'+_0x10896a[_0x5a1c80(0x252)]+_0x5a1c80(0x229),_0x5a1c80(0x23d));}finally{_0x4365e2[_0x5a1c80(0x23b)][_0x5a1c80(0x18d)](_0x5a1c80(0x16e)),_0x4365e2[_0x5a1c80(0x221)]=![];}}function pinResponse(_0x4dea6a){const _0x2d43b3=_0x41eae6,_0x307be0=_0x4dea6a['querySelector'](_0x2d43b3(0xf5))[_0x2d43b3(0x119)],_0xe63bc3=_0x307be0[_0x2d43b3(0x1f3)]>0x32?_0x307be0[_0x2d43b3(0x16b)](0x0,0x32)+_0x2d43b3(0x115):_0x307be0;pinnedResponses[_0x2d43b3(0x145)]({'text':_0x307be0,'displayText':_0xe63bc3}),updatePinnedItems();}function updatePinnedItems(){const _0x52e89c=_0x41eae6,_0x36aaaf=document[_0x52e89c(0x211)]('pinnedItems');_0x36aaaf['innerHTML']='',pinnedFiles['forEach']((_0x456def,_0x47d0e3)=>{const _0x54526d=_0x52e89c,_0x234d70=document['createElement'](_0x54526d(0x234));_0x234d70[_0x54526d(0x1c0)]=_0x54526d(0x22b),_0x234d70[_0x54526d(0x243)](_0x54526d(0x142),_0x54526d(0x101)),_0x234d70[_0x54526d(0x23e)]=_0x54526d(0x19b)+(_0x456def[_0x54526d(0x179)][_0x54526d(0x114)](_0x54526d(0x1c9))?'🖼️':'📄')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+_0x456def['name']+'\x22>'+_0x456def[_0x54526d(0x1e3)]+_0x54526d(0x1ab)+_0x47d0e3+_0x54526d(0x20e),_0x36aaaf[_0x54526d(0x143)](_0x234d70);}),pinnedResponses[_0x52e89c(0x12c)]((_0x46be0,_0x2192c4)=>{const _0xa8fc22=_0x52e89c,_0x308a11=document[_0xa8fc22(0x131)](_0xa8fc22(0x234));_0x308a11[_0xa8fc22(0x1c0)]=_0xa8fc22(0x22b),_0x308a11['setAttribute']('data-type',_0xa8fc22(0x217)),_0x308a11[_0xa8fc22(0x23e)]=_0xa8fc22(0x163)+_0x46be0['text']+'\x22>'+_0x46be0[_0xa8fc22(0x226)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27response\x27,\x20'+_0x2192c4+')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x36aaaf[_0xa8fc22(0x143)](_0x308a11);});if(pinnedPrompt){const _0x10240=document[_0x52e89c(0x131)](_0x52e89c(0x234));_0x10240[_0x52e89c(0x1c0)]=_0x52e89c(0x22b),_0x10240['setAttribute'](_0x52e89c(0x142),_0x52e89c(0x230)),_0x10240[_0x52e89c(0x23e)]=_0x52e89c(0x10f)+pinnedPrompt['title']+'\x22>'+pinnedPrompt[_0x52e89c(0x223)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27prompt\x27)\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x36aaaf[_0x52e89c(0x143)](_0x10240);}}function removePinnedItem(_0x26686a,_0x24f3ff){const _0x2dca96=_0x41eae6;if(_0x26686a==='file')pinnedFiles[_0x2dca96(0x1c1)](_0x24f3ff,0x1);else{if(_0x26686a===_0x2dca96(0x217))pinnedResponses['splice'](_0x24f3ff,0x1);else _0x26686a===_0x2dca96(0x230)&&(pinnedPrompt=null);}updatePinnedItems();}function replyToMessage(_0x338a4d){const _0x4cc36f=_0x41eae6,_0xef216a=_0x338a4d[_0x4cc36f(0x22d)](_0x4cc36f(0xf5))[_0x4cc36f(0x119)],_0xb52b7b=document[_0x4cc36f(0x211)](_0x4cc36f(0x13e));_0xb52b7b[_0x4cc36f(0x250)]='>\x20'+_0xef216a+'\x0a\x0a',_0xb52b7b[_0x4cc36f(0x1f0)](),_0xb52b7b[_0x4cc36f(0x10e)](_0xb52b7b[_0x4cc36f(0x250)][_0x4cc36f(0x1f3)],_0xb52b7b[_0x4cc36f(0x250)]['length']);}function readFileAsBase64(_0x42ecd9){return new Promise((_0x59bdf3,_0x3d131a)=>{const _0x241ca2=_0x444a,_0x395c94=new FileReader();_0x395c94[_0x241ca2(0xfe)]=()=>_0x59bdf3(_0x395c94['result'][_0x241ca2(0x155)](',')[0x1]),_0x395c94[_0x241ca2(0x264)]=_0x3d131a,_0x395c94[_0x241ca2(0x206)](_0x42ecd9);});}function hasEnoughCredits(_0x38b328,_0x1b50b1){const _0x177f73=_0x41eae6,_0x4dcee6=_0x1b50b1>0x0?_0x1b50b1:0x1;return _0x38b328==='gemini-1.5-flash'||_0x38b328===_0x177f73(0x25c)?currentUser[_0x177f73(0x1f1)]>=_0x4dcee6||currentUser[_0x177f73(0x1ce)]>=_0x4dcee6||hasValidSubscription():currentUser['paidCredits']>=_0x4dcee6||hasValidSubscription();}async function updateCredits(_0x3fe47a,_0x3e7953){const _0x2302b6=_0x41eae6;if(hasValidSubscription())return;const _0x4f30d3=db[_0x2302b6(0x203)](_0x2302b6(0x1a7)+currentUser[_0x2302b6(0x1d5)]);await _0x4f30d3[_0x2302b6(0x15f)](_0xc2ab79=>{const _0x4f9679=_0x2302b6;if(_0xc2ab79){if(_0x3fe47a===_0x4f9679(0x259))_0xc2ab79[_0x4f9679(0x1ce)]>=_0x3e7953?_0xc2ab79['paidCredits']-=_0x3e7953:_0xc2ab79['freeCredits']-=_0x3e7953;else{if(_0x3fe47a===_0x4f9679(0x25c)){if(_0xc2ab79['freeCredits']>=_0x3e7953)_0xc2ab79[_0x4f9679(0x1f1)]-=_0x3e7953;else{const _0x2a8d75=_0x3e7953-_0xc2ab79[_0x4f9679(0x1f1)];_0xc2ab79[_0x4f9679(0x1f1)]=0x0,_0xc2ab79[_0x4f9679(0x1ce)]=Math['max'](0x0,_0xc2ab79[_0x4f9679(0x1ce)]-_0x2a8d75);}}else _0xc2ab79[_0x4f9679(0x1ce)]=Math[_0x4f9679(0x11d)](0x0,_0xc2ab79[_0x4f9679(0x1ce)]-_0x3e7953);}}return _0xc2ab79;}),currentUser[_0x2302b6(0x1f1)]=(await _0x4f30d3[_0x2302b6(0x195)](_0x2302b6(0x1f1))[_0x2302b6(0x19c)]('value'))[_0x2302b6(0x1e7)](),currentUser[_0x2302b6(0x1ce)]=(await _0x4f30d3['child'](_0x2302b6(0x1ce))[_0x2302b6(0x19c)](_0x2302b6(0x250)))['val'](),document['getElementById'](_0x2302b6(0x1f1))[_0x2302b6(0x119)]=currentUser[_0x2302b6(0x1f1)],document[_0x2302b6(0x211)](_0x2302b6(0x1ce))[_0x2302b6(0x119)]=currentUser[_0x2302b6(0x1ce)];}async function addCreditsToUser(_0x3b77b2){const _0x11e47f=_0x41eae6,_0x38a7ad=db[_0x11e47f(0x203)](_0x11e47f(0x1a7)+currentUser[_0x11e47f(0x1d5)]);await _0x38a7ad[_0x11e47f(0x15f)](_0x47bbb8=>{const _0x1e46e9=_0x11e47f;return _0x47bbb8&&(_0x47bbb8[_0x1e46e9(0x1ce)]+=_0x3b77b2),_0x47bbb8;}),currentUser[_0x11e47f(0x1ce)]=(await _0x38a7ad['child'](_0x11e47f(0x1ce))['once']('value'))[_0x11e47f(0x1e7)](),document['getElementById'](_0x11e47f(0x1ce))[_0x11e47f(0x119)]=currentUser[_0x11e47f(0x1ce)];}function addMessageToChat(_0xc842c7,_0x3d92cb){const _0x36c0f1=_0x41eae6,_0xfed2eb=document[_0x36c0f1(0x211)](_0x36c0f1(0x12d)),_0x438f73=document[_0x36c0f1(0x131)](_0x36c0f1(0x234));_0x438f73[_0x36c0f1(0x23b)][_0x36c0f1(0x1b0)](_0x36c0f1(0x252),_0xc842c7===_0x36c0f1(0x158)?_0x36c0f1(0x1e0):_0x36c0f1(0x207));if(_0xc842c7==='ai'){_0x3d92cb=_0x3d92cb[_0x36c0f1(0x253)](/^\*\*/gm,'\x0a'),_0x3d92cb=_0x3d92cb['replace'](/\*\*/g,'');const _0x45da77=document['createElement'](_0x36c0f1(0x234));_0x438f73[_0x36c0f1(0x143)](_0x45da77),animateResponse(_0x45da77,_0x3d92cb);const _0x255bfd=document[_0x36c0f1(0x131)](_0x36c0f1(0x234));_0x255bfd['classList'][_0x36c0f1(0x1b0)](_0x36c0f1(0x238)),_0x255bfd[_0x36c0f1(0x23e)]=_0x36c0f1(0x1df),_0x438f73['appendChild'](_0x255bfd);}else _0x438f73['textContent']=_0x3d92cb;return _0xfed2eb['appendChild'](_0x438f73),_0xfed2eb[_0x36c0f1(0x1bc)]=_0xfed2eb['scrollHeight'],currentConversation[_0x36c0f1(0x145)]({'sender':_0xc842c7,'content':_0x3d92cb}),_0x438f73;}function copyResponse(_0x521046){const _0x483a9b=_0x41eae6,_0x255d69=_0x521046['querySelector'](_0x483a9b(0xf5))['textContent'];navigator[_0x483a9b(0x248)][_0x483a9b(0x14f)](_0x255d69)[_0x483a9b(0x25b)](()=>{const _0x4a04a2=_0x483a9b;showNotification(_0x4a04a2(0x21c),_0x4a04a2(0x181));});}async function exportResponse(_0x21c086,_0x16a5a6){const _0x39c2cf=_0x41eae6,_0x5e9469=_0x21c086[_0x39c2cf(0x22d)](_0x39c2cf(0xf5))['textContent'];if(_0x16a5a6==='word'){const _0x8a48=await generateWordDoc(_0x5e9469);saveAs(_0x8a48,_0x39c2cf(0x26d));}else{if(_0x16a5a6==='pdf'){const _0x3f0191=await generatePDF(_0x5e9469);saveAs(_0x3f0191,_0x39c2cf(0x23f));}}showNotification(_0x39c2cf(0x13f)+_0x16a5a6['toUpperCase']()+'\x20réussi',_0x39c2cf(0x181));}async function generateWordDoc(_0x5e3088){const _0x1a2063=_0x41eae6,_0x145fa7=_0x1a2063(0x23a)+_0x5e3088+_0x1a2063(0x1b6),_0x12b671=new PizZip();_0x12b671[_0x1a2063(0x101)](_0x1a2063(0x13a),_0x145fa7);const _0x349404=await _0x12b671[_0x1a2063(0xfa)]({'type':_0x1a2063(0x245),'mimeType':_0x1a2063(0x20f)});return _0x349404;}function generatePDF(_0x13f8eb){const _0x3cc1ef=_0x41eae6,{jsPDF:_0x1b8370}=window[_0x3cc1ef(0x1ea)],_0x4b4682=new _0x1b8370();_0x4b4682[_0x3cc1ef(0x182)](0x12),_0x4b4682[_0x3cc1ef(0x12b)]('',0x14,0x14),_0x4b4682[_0x3cc1ef(0x182)](0xc);const _0xddf590=_0x4b4682[_0x3cc1ef(0x1a0)](_0x13f8eb,0xaa);let _0x4ead80=0x1e;const _0x3ddda0=_0x4b4682['internal'][_0x3cc1ef(0x24d)][_0x3cc1ef(0x193)];for(let _0x1609bc=0x0;_0x1609bc<_0xddf590[_0x3cc1ef(0x1f3)];_0x1609bc++){_0x4ead80>_0x3ddda0-0x14&&(_0x4b4682[_0x3cc1ef(0x186)](),_0x4ead80=0x14),_0x4b4682[_0x3cc1ef(0x12b)](_0xddf590[_0x1609bc],0x14,_0x4ead80),_0x4ead80+=0x7;}return _0x4b4682[_0x3cc1ef(0x1f6)](_0x3cc1ef(0x245));}function shareResponse(_0x4777b6){const _0x3f2365=_0x41eae6,_0x14619d=_0x4777b6[_0x3f2365(0x22d)](_0x3f2365(0xf5))['textContent'];navigator[_0x3f2365(0x14e)]?navigator[_0x3f2365(0x14e)]({'title':'','text':_0x14619d})[_0x3f2365(0x25b)](()=>{const _0x413406=_0x3f2365;showNotification(_0x413406(0x177),_0x413406(0x181));})[_0x3f2365(0x1ef)](_0x4a6ed4=>{const _0x18b98a=_0x3f2365;console[_0x18b98a(0x23d)](_0x18b98a(0x125),_0x4a6ed4),showNotification(_0x18b98a(0xfb),_0x18b98a(0x23d));}):showNotification(_0x3f2365(0x1b4),_0x3f2365(0x23d));}function hasValidSubscription(){const _0x50d24c=_0x41eae6;if(!currentUser[_0x50d24c(0x1dc)]||!currentUser[_0x50d24c(0x260)])return![];return new Date()<new Date(currentUser[_0x50d24c(0x260)]);}function buySubscription(){const _0x2f3808=_0x41eae6,_0x40725f=document[_0x2f3808(0x211)](_0x2f3808(0x1fc))[_0x2f3808(0x250)];if(!_0x40725f){showNotification(_0x2f3808(0x1d7),_0x2f3808(0x23d));return;}const _0x5170cf={'24h':0x1f4,'3d':0x4b0,'7d':0x960,'30d':0x1f40,'3m':0x4e20},_0x17e73e=_0x5170cf[_0x40725f];var _0x1ebaa1=FedaPay[_0x2f3808(0x16d)]({'public_key':'pk_live_TfSz212W0xSMKK7oPEogkFmp','transaction':{'amount':_0x17e73e,'description':_0x2f3808(0x21f)+_0x40725f+_0x2f3808(0x14a)},'customer':{'email':_0x2f3808(0x22e)},'onComplete':async function(_0x234ca3){const _0x45e598=_0x2f3808;if(_0x234ca3[_0x45e598(0x1e8)]===FedaPay['CHECKOUT_COMPLETED']){const _0x25bf2d={'id':_0x234ca3['id'],'description':'Achat\x20d\x27un\x20forfait\x20'+_0x40725f+_0x45e598(0x14a),'amount':_0x17e73e};await activateSubscription(_0x40725f),showInvoiceDetails(_0x25bf2d),showNotification('Forfait\x20'+_0x40725f+'\x20activé\x20avec\x20succès\x20!',_0x45e598(0x181)),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x45e598(0x1d5)],_0x17e73e);}else showNotification(_0x45e598(0x1a4),_0x45e598(0x23d));}});_0x1ebaa1['open']();}async function activateSubscription(_0x1e84d1){const _0x3084be=_0x41eae6,_0x367772={'24h':0x1,'3d':0x3,'7d':0x7,'30d':0x1e,'3m':0x5a},_0x4fa775=_0x367772[_0x1e84d1],_0x5c9486=new Date();_0x5c9486[_0x3084be(0x1de)](_0x5c9486['getDate']()+_0x4fa775),currentUser['subscription']=_0x1e84d1,currentUser[_0x3084be(0x260)]=_0x5c9486[_0x3084be(0x191)](),await syncUserData(),document[_0x3084be(0x211)](_0x3084be(0x1dc))[_0x3084be(0x119)]=_0x1e84d1;}function buyCredits(){const _0x51027a=_0x41eae6,_0x512980=document['getElementById']('creditSelect')[_0x51027a(0x250)];if(!_0x512980){showNotification(_0x51027a(0x1e2),_0x51027a(0x23d));return;}const _0x35d618={'10':0xc8,'100':0x3e8,'500':0x1194,'1000':0x1f40},_0x2aea20=_0x35d618[_0x512980];var _0x446fe1=FedaPay[_0x51027a(0x16d)]({'public_key':_0x51027a(0x14c),'transaction':{'amount':_0x2aea20,'description':_0x51027a(0x18f)+_0x512980+_0x51027a(0x13b)},'customer':{'email':'client@example.com'},'onComplete':async function(_0x1eb7af){const _0x521c4b=_0x51027a;if(_0x1eb7af[_0x521c4b(0x1e8)]===FedaPay[_0x521c4b(0x249)]){const _0x9b7f80={'id':_0x1eb7af['id'],'description':_0x521c4b(0x18f)+_0x512980+_0x521c4b(0x13b),'amount':_0x2aea20};await addCreditsToUser(parseInt(_0x512980)),showInvoiceDetails(_0x9b7f80),showNotification(_0x512980+_0x521c4b(0x165),_0x521c4b(0x181)),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x521c4b(0x1d5)],_0x2aea20);}else showNotification(_0x521c4b(0x1a4),_0x521c4b(0x23d));}});_0x446fe1[_0x51027a(0x156)]();}async function checkFirstPurchaseAndRewardReferrer(_0x1109b9,_0x42a382){const _0x12209a=_0x41eae6,_0x2b614d=db[_0x12209a(0x203)](_0x12209a(0x1a7)+_0x1109b9),_0x2462da=await _0x2b614d[_0x12209a(0x19c)](_0x12209a(0x250)),_0x4ae487=_0x2462da[_0x12209a(0x1e7)]();if(_0x4ae487&&!_0x4ae487[_0x12209a(0x205)]){await _0x2b614d[_0x12209a(0x1fa)]({'firstPurchase':!![]});if(_0x4ae487[_0x12209a(0x1a3)]){const _0x26094f=await db['ref'](_0x12209a(0xef))[_0x12209a(0x122)](_0x12209a(0x127))[_0x12209a(0x1ca)](_0x4ae487[_0x12209a(0x1a3)])[_0x12209a(0x19c)](_0x12209a(0x250)),_0x7a32a5=_0x26094f[_0x12209a(0x1e7)]();if(_0x7a32a5){const _0x587694=Object['keys'](_0x7a32a5)[0x0],_0x2befc4=db['ref'](_0x12209a(0x1a7)+_0x587694);await _0x2befc4[_0x12209a(0x15f)](_0x261773=>{const _0x219f40=_0x12209a;return _0x261773&&(_0x261773[_0x219f40(0x1ce)]=(_0x261773[_0x219f40(0x1ce)]||0x0)+0xa,_0x261773[_0x219f40(0x220)]&&_0x261773['referrals'][_0x1109b9]&&(_0x261773['referrals'][_0x1109b9][_0x219f40(0x1fd)]=!![])),_0x261773;}),await updateReferralStats(_0x587694),showNotification('Le\x20parrain\x20de\x20'+_0x1109b9+'\x20a\x20reçu\x2010\x20crédits\x20pour\x20le\x20premier\x20achat\x20de\x20son\x20filleul\x20!','success');}}}}function getShareMessage(_0x51dea5){const _0x20ec27=_0x41eae6;return encodeURIComponent(_0x20ec27(0x204)+_0x51dea5+'\x0a\x0aPS\x20:\x20En\x20utilisant\x20mon\x20lien,\x20vous\x20me\x20donnez\x20un\x20petit\x20coup\x20de\x20pouce.\x20Mais\x20chut,\x20c\x27est\x20notre\x20secret\x20!\x20😉');}function shareOnFacebook(){const _0x14ef4a=_0x41eae6,_0x2a0b08=document[_0x14ef4a(0x211)](_0x14ef4a(0x201))['value'],_0x10471a=getShareMessage(_0x2a0b08);window[_0x14ef4a(0x156)](_0x14ef4a(0x219)+_0x2a0b08+_0x14ef4a(0x118)+_0x10471a,_0x14ef4a(0x218));}function shareOnTwitter(){const _0x3425d7=_0x41eae6,_0x133844=document[_0x3425d7(0x211)](_0x3425d7(0x201))[_0x3425d7(0x250)],_0x152e8b=getShareMessage(_0x133844);window['open'](_0x3425d7(0x244)+_0x133844+_0x3425d7(0x132)+_0x152e8b,_0x3425d7(0x218));}function shareOnLinkedIn(){const _0x32d971=_0x41eae6,_0x36d5cd=document['getElementById']('referralLink')[_0x32d971(0x250)],_0x3594ac=getShareMessage(_0x36d5cd);window['open']('https://www.linkedin.com/shareArticle?mini=true&url='+_0x36d5cd+_0x32d971(0x263)+_0x3594ac,_0x32d971(0x218));}function shareOnWhatsApp(){const _0x108b34=_0x41eae6,_0xd5247f=document[_0x108b34(0x211)](_0x108b34(0x201))[_0x108b34(0x250)],_0x340886=getShareMessage(_0xd5247f);window[_0x108b34(0x156)]('https://wa.me/?text='+_0x340886,_0x108b34(0x218));}function copyReferralLink(){const _0x4237b7=_0x41eae6,_0x39b844=document[_0x4237b7(0x211)](_0x4237b7(0x201));_0x39b844[_0x4237b7(0x1ae)](),document[_0x4237b7(0x151)](_0x4237b7(0x11c)),showNotification(_0x4237b7(0x210),_0x4237b7(0x181));}function showNotification(_0x1ed8d4,_0x188b3d){const _0x3addec=_0x41eae6,_0x1d2061=document[_0x3addec(0x131)](_0x3addec(0x234));_0x1d2061[_0x3addec(0x119)]=_0x1ed8d4,_0x1d2061[_0x3addec(0x1c0)]='notification\x20'+_0x188b3d,document['body']['appendChild'](_0x1d2061),setTimeout(()=>{const _0x576c3e=_0x3addec;_0x1d2061[_0x576c3e(0x23b)][_0x576c3e(0x1b0)](_0x576c3e(0x15e)),setTimeout(()=>{const _0xe22440=_0x576c3e;_0x1d2061[_0xe22440(0x23b)]['remove'](_0xe22440(0x15e)),setTimeout(()=>{const _0x4c8844=_0xe22440;_0x1d2061[_0x4c8844(0x18d)]();},0x12c);},0xbb8);},0x64);}function showPaymentNotification(_0x5b5c72){const _0x47e3f0=_0x41eae6,_0x33fed9=document[_0x47e3f0(0x131)](_0x47e3f0(0x234));_0x33fed9[_0x47e3f0(0x1c0)]='notification\x20error',_0x33fed9[_0x47e3f0(0x23e)]=_0x47e3f0(0x1d2)+_0x5b5c72+_0x47e3f0(0x20d),document[_0x47e3f0(0x212)][_0x47e3f0(0x143)](_0x33fed9),setTimeout(()=>{const _0x438a00=_0x47e3f0;_0x33fed9['classList'][_0x438a00(0x1b0)](_0x438a00(0x15e)),setTimeout(()=>{const _0x109c01=_0x438a00;_0x33fed9[_0x109c01(0x23b)]['remove'](_0x109c01(0x15e)),setTimeout(()=>{_0x33fed9['remove']();},0x12c);},0x2710);},0x64);}async function showPaymentNotificationWithFreeOption(_0x1684e4){return new Promise(_0x3fcbe1=>{const _0xaea956=_0x444a,_0x22ff05=document[_0xaea956(0x131)](_0xaea956(0x234));_0x22ff05[_0xaea956(0x1c0)]=_0xaea956(0x176),_0x22ff05['innerHTML']=_0xaea956(0x200)+_0x1684e4+'<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27free\x27)\x22>Utiliser\x20le\x20modèle\x20gratuit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27subscription\x27)\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27credits\x27)\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27cancel\x27)\x22>Annuler</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',document[_0xaea956(0x212)][_0xaea956(0x143)](_0x22ff05),window[_0xaea956(0x172)]=function(_0x4ca6ff){const _0x1dcbda=_0xaea956;_0x22ff05[_0x1dcbda(0x18d)](),_0x3fcbe1(_0x4ca6ff);},setTimeout(()=>{const _0x1d76c1=_0xaea956;_0x22ff05[_0x1d76c1(0x23b)][_0x1d76c1(0x1b0)](_0x1d76c1(0x15e));},0x64);});}function toggleTheme(){const _0x348886=_0x41eae6,_0x1cb0ff=document[_0x348886(0x212)],_0x2c9648=_0x1cb0ff[_0x348886(0x1b3)](_0x348886(0x246)),_0xd6a805=_0x2c9648==='dark'?_0x348886(0x232):_0x348886(0x1e9);_0x1cb0ff[_0x348886(0x243)]('data-theme',_0xd6a805),localStorage[_0x348886(0x160)](_0x348886(0x227),_0xd6a805),updateThemeIcon(_0xd6a805),document[_0x348886(0x22d)](_0x348886(0x19e))[_0x348886(0x243)](_0x348886(0xf7),_0xd6a805);}function updateThemeIcon(_0x3d100a){const _0x3e976b=_0x41eae6,_0x7c53e1=document[_0x3e976b(0x22d)](_0x3e976b(0x19a));_0x7c53e1[_0x3e976b(0x1c0)]=_0x3d100a===_0x3e976b(0x1e9)?_0x3e976b(0xff):'fas\x20fa-moon';}function toggleSidebar(){const _0x5a1c7c=_0x41eae6,_0x186e2e=document[_0x5a1c7c(0x22d)](_0x5a1c7c(0x1ac)),_0x47bdb6=document[_0x5a1c7c(0x22d)](_0x5a1c7c(0x20c));_0x186e2e[_0x5a1c7c(0x23b)][_0x5a1c7c(0xec)](_0x5a1c7c(0x18e)),_0x47bdb6['classList'][_0x5a1c7c(0xec)]('sidebar-visible');}function saveConversation(){const _0x3d8d9d=_0x41eae6;if(!currentUser)return;const _0x353d75=currentConversation['id']||Date[_0x3d8d9d(0x147)]()['toString']();conversations[_0x353d75]=currentConversation,currentConversation['id']=_0x353d75,localStorage[_0x3d8d9d(0x160)](_0x3d8d9d(0xe3)+currentUser[_0x3d8d9d(0x1d5)],JSON['stringify'](conversations)),updateConversationHistory();}function loadConversationHistory(){const _0x3be081=_0x41eae6;if(!currentUser)return;const _0xd0530d=localStorage[_0x3be081(0x239)](_0x3be081(0xe3)+currentUser[_0x3be081(0x1d5)]);_0xd0530d&&(conversations=JSON[_0x3be081(0x17e)](_0xd0530d),updateConversationHistory());}function updateConversationHistory(){const _0x155a94=_0x41eae6,_0x93a59b=document['getElementById']('historyList');_0x93a59b[_0x155a94(0x23e)]='';const _0x28ef2f=Object[_0x155a94(0x15d)](conversations)[_0x155a94(0x1e5)]((_0x382229,_0xf976a6)=>parseInt(_0xf976a6)-parseInt(_0x382229));_0x28ef2f['forEach'](_0x59c738=>{const _0x53bc0b=_0x155a94,_0x48dc5b=conversations[_0x59c738],_0x2d1b26=document[_0x53bc0b(0x131)](_0x53bc0b(0x234));_0x2d1b26[_0x53bc0b(0x1c0)]=_0x53bc0b(0xfd);const _0x1b83ad=document['createElement'](_0x53bc0b(0xf6));_0x1b83ad[_0x53bc0b(0x119)]=_0x53bc0b(0x100)+new Date(parseInt(_0x59c738))[_0x53bc0b(0x1dd)](),_0x1b83ad[_0x53bc0b(0x225)]=()=>loadConversation(_0x59c738);const _0x5f25a7=document['createElement']('i');_0x5f25a7[_0x53bc0b(0x1c0)]='fas\x20fa-trash\x20delete-icon',_0x5f25a7[_0x53bc0b(0x225)]=_0x5d1ec8=>{const _0x223ba3=_0x53bc0b;_0x5d1ec8[_0x223ba3(0x255)](),deleteConversation(_0x59c738);},_0x2d1b26[_0x53bc0b(0x143)](_0x1b83ad),_0x2d1b26[_0x53bc0b(0x143)](_0x5f25a7),_0x93a59b[_0x53bc0b(0x143)](_0x2d1b26);});}function deleteConversation(_0x51d32c){const _0x544d04=_0x41eae6;confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20conversation\x20?')&&(delete conversations[_0x51d32c],localStorage['setItem'](_0x544d04(0xe3)+currentUser[_0x544d04(0x1d5)],JSON['stringify'](conversations)),updateConversationHistory());}function createNewConversation(){const _0xd45ee7=_0x41eae6;currentConversation[_0xd45ee7(0x1f3)]>0x0&&saveConversation();currentConversation=[];const _0x2ff2f8=document[_0xd45ee7(0x211)](_0xd45ee7(0x12d));_0x2ff2f8[_0xd45ee7(0x23e)]='',updateConversationHistory(),addMessageToChat('ai',_0xd45ee7(0x26e)),_0x2ff2f8[_0xd45ee7(0x1bc)]=0x0,document[_0xd45ee7(0x211)](_0xd45ee7(0x13e))[_0xd45ee7(0x1f0)]();}function _0x5516(){const _0x2f84a5=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22\x20standalone=\x22yes\x22?>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<w:document\x20xmlns:w=\x22http://schemas.openxmlformats.org/wordprocessingml/2006/main\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:t>','classList','registerUsername','error','innerHTML','response.pdf','referralModal','Erreur\x20lors\x20de\x20l\x27inscription.\x20Veuillez\x20réessayer.','Nom\x20d\x27utilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.','setAttribute','https://twitter.com/intent/tweet?url=','blob','data-theme','.close','clipboard','CHECKOUT_COMPLETED','AIzaSyB3umTE3n2d5gwKzOmJz4ss1pFZMR8_vOE','gemini-bb56e.appspot.com','downloadInvoice','pageSize','eduqueMoiPassword','1402590eFAUQD','value','lastFreeCreditsReset','message','replace','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Détails\x20de\x20la\x20facture</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','stopPropagation','generateReferralCode','lastConversation','get','gemini-1.5-flash','promptListButton','then','gemini-1.0-pro','124zfQcCa','preventDefault','application/pdf','subscriptionEndDate','models?key=','Modèles\x20disponibles:','&title=Boostez\x20votre\x20apprentissage\x20avec\x20Eduque\x20moi&summary=','onerror','pinned-prompt-message','Facture\x20Eduque\x20moi','\x20jour','togglePromptList','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20code\x20de\x20parrainage.','keydown','change','63UhLuAv','response.docx','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20envoyer\x20ce\x20message.','pinned-prompt','.pdf,.jpg,.jpeg,.png,.docx,.doc','https://generativelanguage.googleapis.com/v1beta/models/','random','shareOnFacebook','conversations_','importedFilesCount','Rejoignez-moi\x20sur\x20Eduque\x20moi\x20et\x20commencez\x20votre\x20voyage\x20d\x27apprentissage\x20!\x20Utilisez\x20mon\x20lien\x20de\x20parrainage\x20pour\x20obtenir\x20des\x20bonus\x20spéciaux\x20:\x20','generateContent','logout','block','info','category','fileInput','toggle','2492752DHNcMf','save','users','Connexion\x20automatique\x20réussie','loginBtn','slice','Utilisateur\x20non\x20connecté','.input-actions\x20button:last-child','div:first-child','span','content','database','copyReferralLink','generateAsync','Erreur\x20lors\x20du\x20partage','description','conversation-item','onload','fas\x20fa-sun','Conversation\x20du\x20','file','trim','Analyse\x20le\x20fichier\x20','La\x20réponse\x20a\x20été\x20tronquée\x20à\x20','img','Statut\x20de\x20l\x27API\x20Gemini:','none','Analyse\x20ce\x20fichier\x20texte:\x20','map','values','filter','accept','toggleTheme','setSelectionRange','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>🤖</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-title\x22>','loaded','online','button','startsWith','...','file-icon','eduqueMoiUsername','&quote=','textContent','promptCategories','Aucun','copy','max','set','.file-label','addEventListener','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedPrompt()\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','orderByChild','removePinnedFile','Ce\x20modèle\x20nécessite\x20un\x20abonnement\x20ou\x20des\x20crédits\x20payants.','Erreur\x20lors\x20du\x20partage:','prompt-icon','referralCode','getTime','showReferralModal','prompt-title','text','forEach','messageContainer','G-CSN292219J','pinned-responses-message','buySubscription','createElement','&text=','login','pinnedItems','result','\x0a\x0a**Réponses\x20épinglées:**\x0a','registerBtn','Passer\x20à\x20un\x20modèle\x20avancé','response-text','word/document.xml','\x20crédits\x20pour\x20Eduque\x20moi','selectionEnd','Connexion\x20réussie\x20!','userInput','Export\x20en\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22downloadInvoice\x22>Télécharger\x20la\x20facture\x20en\x20PDF</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeModal\x22>Fermer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','Veuillez\x20remplir\x20tous\x20les\x20champs.','data-type','appendChild','1181652xBqABs','push','facture_','now','Utilisateur:\x20','7cbolxu','\x20pour\x20Eduque\x20moi','Modèle\x20mis\x20à\x20jour\x20vers\x20Gemini\x201.5\x20Pro','pk_live_TfSz212W0xSMKK7oPEogkFmp','\x20crédits\x20gratuits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte\x20!','share','writeText','conversationHistory','execCommand','text/plain','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Description:</strong>\x20','promptList','split','open','hidden','user','selectionStart','1120320NrdoNS','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prompt-item\x22\x20onclick=\x22selectPrompt(\x27','Numéro\x20de\x20transaction\x20:\x20','keys','show','transaction','setItem','3458670ExXmYS','status','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>💬</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','277143630015','\x20crédits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte.','userInfo','Veuillez\x20vous\x20connecter\x20pour\x20accéder\x20à\x20la\x20bibliothèque.','createObjectURL','display','stringify','substring','Bibliothèque.html','init','loading','shareOnLinkedIn','loginPassword','Enter','resolveNotification','showLoginModal','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20utiliser\x20Gemini\x201.5\x20Flash.','firstChild','notification\x20error','Partage\x20réussi','.modal','type','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Montant:</strong>\x20','buyCredits','data','pinned-image','parse','https://eduquemoi.netlify.app/?ref=','Utilisation\x20de\x20crédits\x20payants\x20pour\x20Gemini\x201.5\x20Flash.','success','setFontSize','\x20FCFA','Date\x20:\x20','Vous\x20êtes\x20hors\x20ligne.\x20Veuillez\x20vérifier\x20votre\x20connexion\x20internet.','addPage','Gemini:\x20','pinned-response','toLocaleDateString','modelSelect','\x20FCFA</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Numéro\x20de\x20transaction:</strong>\x20','offsetWidth','remove','visible','Achat\x20de\x20','floor','toISOString','removeItem','height','820135svAYtb','child','log','registerModal','promptListModal','Facture\x20pour\x20:\x20','.theme-toggle\x20i','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>','once','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20votre\x20profil.\x20Veuillez\x20réessayer.','meta[name=\x22color-scheme\x22]','readAsArrayBuffer','splitTextToSize','search','Description\x20:\x20','referredBy','Le\x20paiement\x20a\x20été\x20annulé\x20ou\x20a\x20échoué.','pinned-files-message','shiftKey','users/','.input-container','AIzaSyCvizcYorGDPN3GXqma0opp7wAiMkaCt64','querySelectorAll','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27file\x27,\x20','.sidebar','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedFile(','select','initializeApp','add','selectedModel','sender','getAttribute','Le\x20partage\x20n\x27est\x20pas\x20pris\x20en\x20charge\x20sur\x20votre\x20appareil','href','</w:t>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</w:document>\x0a\x20\x20\x20\x20','eduqueMoiUserData','auto','Erreur\x20:\x20Impossible\x20d\x27initialiser\x20l\x27API.\x20Aucune\x20clé\x20API\x20disponible.','createNewConversation','location','scrollTop','Erreur\x20lors\x20de\x20la\x20connexion\x20automatique:','file-name','\x0a\x0a**Fichiers\x20joints:**\x0a','className','splice','registerPassword','files','warn','Veuillez\x20vous\x20connecter\x20pour\x20envoyer\x20des\x20messages.','toUpperCase','style','Utilisation\x20de\x20crédits\x20gratuits\x20pour\x20Gemini\x201.5\x20Flash.','image/','equalTo','Aucune\x20clé\x20API\x20trouvée\x20dans\x20la\x20base\x20de\x20données.','lastImportReset','Erreur\x20lors\x20de\x20la\x20connexion:','paidCredits','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20payants\x20pour\x20ce\x20modèle\x20avancé.','sendMessage','register','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','loginUsername','\x20mots.','username','beforeunload','Veuillez\x20sélectionner\x20un\x20forfait.','key','includes','Données\x20utilisateur\x20mises\x20à\x20jour\x20avec\x20succès:','sidebar-visible','subscription','toLocaleString','setDate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-copy\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22><i\x20class=\x22fas\x20fa-file-pdf\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-share-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22reply-button\x22\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-reply\x22></i></button>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','user-message','...(Utilisez\x20un\x20modèle\x20avancé\x20pour\x20avoir\x20la\x20suite\x20de\x20ma\x20réponse)','Veuillez\x20sélectionner\x20un\x20pack\x20de\x20crédits.','name','innerWidth','sort','offline','val','reason','dark','jspdf','click','prompts','Erreur\x20lors\x20de\x20la\x20connexion.\x20Veuillez\x20réessayer.','Utilisateur\x20connecté:','catch','focus','freeCredits','extractRawText','length','alt','input','output','active','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20utilisateur:','scrollHeight','update','Échec\x20de\x20la\x20connexion\x20automatique\x20:\x20informations\x20invalides','subscriptionSelect','isActive','loginModal','logoutBtn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','referralLink','https://gemini-bb56e-default-rtdb.firebaseio.com','ref','🚀\x20Découvrez\x20le\x20secret\x20pour\x20booster\x20votre\x20apprentissage\x20!\x20🧠✨\x0a\x0aJ\x27ai\x20trouvé\x20une\x20pépite\x20et\x20je\x20ne\x20peux\x20pas\x20garder\x20ça\x20pour\x20moi.\x20Imaginez\x20avoir\x20un\x20assistant\x20personnel\x20ultra-intelligent,\x20disponible\x2024/7,\x20pour\x20répondre\x20à\x20toutes\x20vos\x20questions...\x20C\x27est\x20ce\x20que\x20j\x27ai\x20avec\x20Eduque\x20moi\x20!\x0a\x0aCurieux\x20?\x20Cliquez\x20sur\x20ce\x20lien\x20magique\x20et\x20embarquez\x20pour\x20une\x20aventure\x20intellectuelle\x20incroyable\x20:\x0a','firstPurchase','readAsDataURL','ai-message','width','totalReferrals','activeReferrals','closeModal','.chat-container','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buySubscription()\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buyCredits()\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20',')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','application/vnd.openxmlformats-officedocument.wordprocessingml.document','Lien\x20de\x20partage\x20copié\x20!','getElementById','body','target','gemini-bb56e','src',')\x20que\x20je\x20viens\x20de\x20t\x27envoyer.','response','_blank','https://www.facebook.com/sharer/sharer.php?u=','getGenerativeModel','Tentative\x20d\x27ouverture\x20de\x20la\x20bibliothèque','Réponse\x20copiée\x20dans\x20le\x20presse-papiers','showRegisterModal','response-icon','Achat\x20d\x27un\x20forfait\x20','referrals','disabled','1:277143630015:web:78736f2cf52d29495d160a','title','application/msword','onclick','displayText','theme','amount','.\x20Veuillez\x20réessayer.','modal','pinned-item','3XxzCqP','querySelector','client@example.com','shareOnTwitter','prompt','toggleSidebar','light','\x27,\x20','div','exists','Votre\x20abonnement\x20expire\x20dans\x20','password','message-actions','getItem'];_0x5516=function(){return _0x2f84a5;};return _0x5516();}function loadConversation(_0x2d15c1){const _0x18d560=_0x41eae6;currentConversation[_0x18d560(0x1f3)]>0x0&&currentConversation['id']!==_0x2d15c1&&saveConversation();currentConversation=conversations[_0x2d15c1],currentConversation['id']=_0x2d15c1;const _0x4179d6=document['getElementById']('messageContainer');_0x4179d6['innerHTML']='',currentConversation[_0x18d560(0x12c)](_0x107346=>{const _0x1b70a9=_0x18d560;addMessageToChat(_0x107346[_0x1b70a9(0x1b2)],_0x107346[_0x1b70a9(0xf7)]);}),_0x4179d6[_0x18d560(0x1bc)]=0x0;}async function syncUserData(){const _0x24ccfd=_0x41eae6;if(!currentUser)return;const _0x542562={'freeCredits':currentUser[_0x24ccfd(0x1f1)]||0x0,'paidCredits':currentUser['paidCredits']||0x0,'lastFreeCreditsReset':currentUser['lastFreeCreditsReset']||new Date()[_0x24ccfd(0x191)]()};currentUser['subscription']&&(_0x542562[_0x24ccfd(0x1dc)]=currentUser['subscription']);currentUser[_0x24ccfd(0x260)]&&(_0x542562['subscriptionEndDate']=currentUser['subscriptionEndDate']);const _0x33a0f3=db['ref'](_0x24ccfd(0x1a7)+currentUser[_0x24ccfd(0x1d5)]);try{await _0x33a0f3[_0x24ccfd(0x1fa)](_0x542562),console[_0x24ccfd(0x196)](_0x24ccfd(0x1da),_0x542562);}catch(_0x3c2021){console[_0x24ccfd(0x23d)](_0x24ccfd(0x1f8),_0x3c2021),showNotification(_0x24ccfd(0x19d),_0x24ccfd(0x23d));}}function adjustTextareaHeight(){const _0x5d1115=_0x41eae6,_0xcde851=document[_0x5d1115(0x211)](_0x5d1115(0x13e));_0xcde851[_0x5d1115(0x1c7)][_0x5d1115(0x193)]='auto',_0xcde851['style'][_0x5d1115(0x193)]=_0xcde851[_0x5d1115(0x1f9)]+'px';}function resetTextareaHeight(){const _0xcc3ed6=_0x41eae6,_0x222a7e=document[_0xcc3ed6(0x211)]('userInput');_0x222a7e['style'][_0xcc3ed6(0x193)]=_0xcc3ed6(0x1b8);}async function attemptAutoLogin(){const _0x502c3a=_0x41eae6,_0x4f2929=getStoredLoginInfo();if(_0x4f2929[_0x502c3a(0x1d5)]&&_0x4f2929[_0x502c3a(0x237)])try{const _0x4e5246=db[_0x502c3a(0x203)](_0x502c3a(0x1a7)+_0x4f2929['username']),_0x52d95b=await _0x4e5246[_0x502c3a(0x19c)](_0x502c3a(0x250));if(_0x52d95b[_0x502c3a(0x235)]()&&_0x52d95b[_0x502c3a(0x1e7)]()[_0x502c3a(0x237)]===_0x4f2929[_0x502c3a(0x237)]){const _0x13ca03=_0x52d95b[_0x502c3a(0x1e7)]();currentUser={'username':_0x4f2929['username'],'freeCredits':_0x13ca03[_0x502c3a(0x1f1)],'paidCredits':_0x13ca03[_0x502c3a(0x1ce)],'subscription':_0x13ca03[_0x502c3a(0x1dc)],'subscriptionEndDate':_0x13ca03[_0x502c3a(0x260)],'lastFreeCreditsReset':_0x13ca03[_0x502c3a(0x251)]},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),console[_0x502c3a(0x196)](_0x502c3a(0xf0));}else clearLoginInfo(),console[_0x502c3a(0x196)](_0x502c3a(0x1fb));}catch(_0x23e148){console[_0x502c3a(0x23d)](_0x502c3a(0x1bd),_0x23e148),clearLoginInfo();}}function saveSelectedModel(){const _0x4ad742=_0x41eae6,_0x5535d8=document[_0x4ad742(0x211)](_0x4ad742(0x18a))[_0x4ad742(0x250)];localStorage[_0x4ad742(0x160)](_0x4ad742(0x1b1),_0x5535d8);}function loadSelectedModel(){const _0xb0c11e=_0x41eae6,_0x21f778=localStorage['getItem']('selectedModel');_0x21f778&&(document[_0xb0c11e(0x211)]('modelSelect')[_0xb0c11e(0x250)]=_0x21f778);}function showUpgradeButton(_0x677d37){const _0x12ccee=_0x41eae6,_0x3efa27=document[_0x12ccee(0x131)](_0x12ccee(0x113));_0x3efa27[_0x12ccee(0x119)]=_0x12ccee(0x138),_0x3efa27[_0x12ccee(0x1c0)]='upgrade-button',_0x3efa27[_0x12ccee(0x225)]=()=>{const _0x2e1b5e=_0x12ccee;hasValidSubscription()||currentUser[_0x2e1b5e(0x1ce)]>0x0?(document['getElementById'](_0x2e1b5e(0x18a))['value']='gemini-1.5-pro',showNotification(_0x2e1b5e(0x14b),_0x2e1b5e(0x181))):showPaymentNotification('Vous\x20avez\x20besoin\x20d\x27un\x20abonnement\x20ou\x20de\x20crédits\x20payants\x20pour\x20utiliser\x20ce\x20modèle.');},_0x677d37['appendChild'](_0x3efa27);}function animateResponse(_0x1cdd92,_0x4c96fc){let _0x15e30c=0x0;_0x1cdd92['textContent']='';const _0x5e6877=setInterval(()=>{const _0x48aeea=_0x444a;_0x15e30c<_0x4c96fc[_0x48aeea(0x1f3)]?(_0x1cdd92[_0x48aeea(0x119)]+=_0x4c96fc[_0x15e30c],_0x15e30c++):clearInterval(_0x5e6877);},0x1);}function loadPromptCategories(){const _0x5031c9=_0x41eae6,_0x3d6a01=document[_0x5031c9(0x211)](_0x5031c9(0x11a));_0x3d6a01[_0x5031c9(0x23e)]='',db[_0x5031c9(0x203)](_0x5031c9(0x1ec))['once'](_0x5031c9(0x250),_0x2dd6b4=>{const _0x359ffd=_0x5031c9;prompts=_0x2dd6b4[_0x359ffd(0x1e7)]()||{};const _0x295e55=[...new Set(Object[_0x359ffd(0x10a)](prompts)[_0x359ffd(0x109)](_0x49ffa2=>_0x49ffa2['category']))];_0x295e55[_0x359ffd(0x12c)](_0x57276c=>{const _0x693fc1=_0x359ffd,_0x7f8ae9=document[_0x693fc1(0x131)]('li');_0x7f8ae9[_0x693fc1(0x119)]=_0x57276c,_0x7f8ae9['onclick']=()=>{const _0x3d2ba4=_0x693fc1;document[_0x3d2ba4(0x1aa)]('#promptCategories\x20li')[_0x3d2ba4(0x12c)](_0x43e7a5=>_0x43e7a5[_0x3d2ba4(0x23b)][_0x3d2ba4(0x18d)](_0x3d2ba4(0x1f7))),_0x7f8ae9[_0x3d2ba4(0x23b)][_0x3d2ba4(0x1b0)](_0x3d2ba4(0x1f7)),loadPromptsForCategory(_0x57276c);},_0x3d6a01['appendChild'](_0x7f8ae9);}),_0x295e55['length']>0x0&&(loadPromptsForCategory(_0x295e55[0x0]),_0x3d6a01[_0x359ffd(0x175)]['classList'][_0x359ffd(0x1b0)]('active'));});}function loadPromptsForCategory(_0x5f4510){const _0x39a1dd=_0x41eae6,_0x4e278b=document[_0x39a1dd(0x211)](_0x39a1dd(0x154));_0x4e278b['innerHTML']='',Object['entries'](prompts)[_0x39a1dd(0x12c)](([_0x1236e3,_0x1004e5])=>{const _0x172c8c=_0x39a1dd;if(_0x1004e5[_0x172c8c(0xea)]===_0x5f4510){const _0x9c55be=document[_0x172c8c(0x131)]('li');_0x9c55be[_0x172c8c(0x23e)]=_0x172c8c(0x15b)+_0x1236e3+_0x172c8c(0x233)+JSON[_0x172c8c(0x16a)](_0x1004e5)[_0x172c8c(0x253)](/"/g,'&quot;')+_0x172c8c(0x110)+_0x1004e5[_0x172c8c(0x223)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-select-icon\x22><i\x20class=\x22fas\x20fa-plus-circle\x22></i></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4e278b[_0x172c8c(0x143)](_0x9c55be);}});}function selectPrompt(_0x1f4c8d,_0xe33585){const _0x401698=_0x41eae6;pinnedPrompt={'id':_0x1f4c8d,..._0xe33585},updatePinnedPrompt(),closePromptModal(),showNotification('Prompt\x20sélectionné',_0x401698(0x181));}function closePromptModal(){const _0x9d8ec6=_0x41eae6;document[_0x9d8ec6(0x211)](_0x9d8ec6(0x198))[_0x9d8ec6(0x1c7)][_0x9d8ec6(0x169)]=_0x9d8ec6(0x107);}function togglePromptList(){const _0xa37fa5=_0x41eae6,_0x3ffbbd=document[_0xa37fa5(0x211)]('promptListModal');_0x3ffbbd[_0xa37fa5(0x1c7)][_0xa37fa5(0x169)]=_0xa37fa5(0xe8),loadPromptCategories();}function updatePinnedPrompt(){const _0x5a1cdf=_0x41eae6,_0x509c0f=document[_0x5a1cdf(0x211)](_0x5a1cdf(0x134)),_0x354d8a=_0x509c0f['querySelector']('.pinned-item[data-type=\x22prompt\x22]');_0x354d8a&&_0x354d8a['remove']();if(pinnedPrompt){const _0x1438b1=document['createElement']('div');_0x1438b1[_0x5a1cdf(0x1c0)]=_0x5a1cdf(0x22b),_0x1438b1['setAttribute'](_0x5a1cdf(0x142),_0x5a1cdf(0x230)),_0x1438b1[_0x5a1cdf(0x23e)]=_0x5a1cdf(0x163)+pinnedPrompt[_0x5a1cdf(0x223)]+'\x22>'+pinnedPrompt[_0x5a1cdf(0x223)]+_0x5a1cdf(0x121),_0x509c0f[_0x5a1cdf(0x143)](_0x1438b1);}}function removePinnedPrompt(){pinnedPrompt=null,updatePinnedPrompt();}function openLibrary(){const _0x39c787=_0x41eae6;console[_0x39c787(0x196)](_0x39c787(0x21b));if(currentUser){console['log'](_0x39c787(0x1ee),currentUser);const _0x39d369={'username':currentUser[_0x39c787(0x1d5)],'freeCredits':currentUser[_0x39c787(0x1f1)],'paidCredits':currentUser[_0x39c787(0x1ce)],'subscription':currentUser[_0x39c787(0x1dc)]};localStorage['setItem'](_0x39c787(0x1b7),JSON[_0x39c787(0x16a)](_0x39d369)),console['log']('Données\x20utilisateur\x20enregistrées\x20dans\x20localStorage'),window[_0x39c787(0x1bb)][_0x39c787(0x1b5)]=_0x39c787(0x16c);}else console[_0x39c787(0x196)](_0x39c787(0xf3)),alert(_0x39c787(0x167));}async function showReferralModal(){const _0x1d191f=_0x41eae6,_0x11a412=document['getElementById'](_0x1d191f(0x240));_0x11a412['style'][_0x1d191f(0x169)]=_0x1d191f(0xe8);const _0x56fb2e=await getOrCreateReferralCode();if(_0x56fb2e){const _0x3cfadf=_0x1d191f(0x17f)+_0x56fb2e;document['getElementById'](_0x1d191f(0x201))[_0x1d191f(0x250)]=_0x3cfadf;const _0x54ba46=_0x1d191f(0xe5)+_0x3cfadf;document[_0x1d191f(0x211)](_0x1d191f(0x201))[_0x1d191f(0x243)]('data-invite-message',_0x54ba46);}else document[_0x1d191f(0x211)](_0x1d191f(0x201))[_0x1d191f(0x250)]=_0x1d191f(0x269);await updateReferralStats(currentUser[_0x1d191f(0x1d5)]);}function generateReferralCode(){const _0x5f1d90=_0x41eae6;return Math[_0x5f1d90(0xe1)]()['toString'](0x24)[_0x5f1d90(0x16b)](0x2,0x8)[_0x5f1d90(0x1c6)]();}async function getOrCreateReferralCode(){const _0x20c21d=_0x41eae6;if(!currentUser)return null;const _0x3cc756=db[_0x20c21d(0x203)](_0x20c21d(0x1a7)+currentUser[_0x20c21d(0x1d5)]),_0x335275=await _0x3cc756['once'](_0x20c21d(0x250)),_0x5e4547=_0x335275[_0x20c21d(0x1e7)]();if(_0x5e4547&&_0x5e4547[_0x20c21d(0x127)])return _0x5e4547['referralCode'];else{const _0x2b4132=generateReferralCode();return await _0x3cc756[_0x20c21d(0x1fa)]({'referralCode':_0x2b4132}),_0x2b4132;}}async function updateReferralStats(_0x5591b6){const _0xdad909=_0x41eae6,_0x4cdf02=db[_0xdad909(0x203)]('users/'+_0x5591b6),_0x3aed98=await _0x4cdf02[_0xdad909(0x19c)]('value'),_0x3883c0=_0x3aed98[_0xdad909(0x1e7)]();if(_0x3883c0&&_0x3883c0[_0xdad909(0x220)]){const _0x2078a9=_0x3883c0[_0xdad909(0x220)],_0x3f2da3=Object[_0xdad909(0x15d)](_0x2078a9)[_0xdad909(0x1f3)],_0xa9bf71=Object['values'](_0x2078a9)['filter'](_0x354614=>_0x354614[_0xdad909(0x1fd)])['length'];await _0x4cdf02['update']({'totalReferrals':_0x3f2da3,'activeReferrals':_0xa9bf71}),currentUser&&currentUser['username']===_0x5591b6&&(document[_0xdad909(0x211)](_0xdad909(0x209))[_0xdad909(0x119)]=_0x3f2da3,document['getElementById'](_0xdad909(0x20a))[_0xdad909(0x119)]=_0xa9bf71);}}window[_0x41eae6(0xfe)]=async function(){const _0x549139=_0x41eae6;await attemptAutoLogin();if(currentUser){if(currentUser[_0x549139(0x1f1)]===undefined)currentUser[_0x549139(0x1f1)]=0x0;if(currentUser[_0x549139(0x1ce)]===undefined)currentUser[_0x549139(0x1ce)]=0x0;if(currentUser[_0x549139(0x1dc)]===undefined)currentUser[_0x549139(0x1dc)]=null;if(currentUser[_0x549139(0x260)]===undefined)currentUser[_0x549139(0x260)]=null;if(currentUser[_0x549139(0x251)]===undefined)currentUser['lastFreeCreditsReset']=new Date()['toISOString']();const _0x208fd4=db[_0x549139(0x203)](_0x549139(0x1a7)+currentUser[_0x549139(0x1d5)]),_0x112c60=await _0x208fd4[_0x549139(0x19c)]('value'),_0x92564f=_0x112c60[_0x549139(0x1e7)]();_0x92564f&&(importedFilesCount=_0x92564f[_0x549139(0xe4)]||0x0,lastImportReset=new Date(_0x92564f[_0x549139(0x1cc)]||new Date())),await syncUserData();}const _0x2db05a=localStorage[_0x549139(0x239)]('theme')||_0x549139(0x232);document['body'][_0x549139(0x243)]('data-theme',_0x2db05a),updateThemeIcon(_0x2db05a),setupUIEventListeners();currentUser&&loadConversationHistory();initModals(),loadSelectedModel(),document[_0x549139(0x211)](_0x549139(0x18a))[_0x549139(0x120)](_0x549139(0x26b),saveSelectedModel),restoreAppState(),initializeNewDiscussion(),document['body'][_0x549139(0x23b)]['add'](_0x549139(0x111)),setInterval(checkSubscriptionStatus,0x36ee80),await loadApiKeyList(),initializeGeminiAPI();const _0x127bf9=document[_0x549139(0x211)](_0x549139(0x18a));!_0x127bf9[_0x549139(0x250)]&&(_0x127bf9[_0x549139(0x250)]=_0x549139(0x259));};function setupUIEventListeners(){const _0xf2abc1=_0x41eae6,_0x56b498=document[_0xf2abc1(0x22d)](_0xf2abc1(0x1a8)),_0x1562fc=document['getElementById'](_0xf2abc1(0x13e)),_0x3c0d7b=document[_0xf2abc1(0x22d)](_0xf2abc1(0x11f)),_0x4337b5=_0x56b498[_0xf2abc1(0x22d)]('button:last-child');function _0x5461f9(){const _0x46f23f=_0xf2abc1,_0x263512=_0x56b498[_0x46f23f(0x18c)],_0xc04601=_0x3c0d7b[_0x46f23f(0x18c)],_0x2441e6=document[_0x46f23f(0x211)](_0x46f23f(0x25a))['offsetWidth'],_0x550144=_0x4337b5[_0x46f23f(0x18c)],_0x454614=0x1e;_0x1562fc[_0x46f23f(0x1c7)][_0x46f23f(0x208)]=_0x263512-_0xc04601-_0x2441e6-_0x550144-_0x454614+'px';}_0x5461f9(),window['addEventListener']('resize',_0x5461f9),_0x1562fc['addEventListener'](_0xf2abc1(0x1f5),adjustTextareaHeight),document[_0xf2abc1(0x211)](_0xf2abc1(0x18a))[_0xf2abc1(0x120)](_0xf2abc1(0x26b),checkModelAccess);window[_0xf2abc1(0x1e4)]<=0x300&&(document['querySelector'](_0xf2abc1(0x1ac))[_0xf2abc1(0x23b)][_0xf2abc1(0x18d)]('visible'),document['querySelector'](_0xf2abc1(0x20c))[_0xf2abc1(0x23b)][_0xf2abc1(0x18d)](_0xf2abc1(0x1db)));if(currentUser){const _0x7fd98e=db[_0xf2abc1(0x203)](_0xf2abc1(0x1a7)+currentUser[_0xf2abc1(0x1d5)]);_0x7fd98e['on'](_0xf2abc1(0x250),_0x301a1f=>{const _0x1f7a29=_0xf2abc1,_0x3dcd86=_0x301a1f[_0x1f7a29(0x1e7)]();_0x3dcd86&&(currentUser={...currentUser,'freeCredits':_0x3dcd86[_0x1f7a29(0x1f1)],'paidCredits':_0x3dcd86[_0x1f7a29(0x1ce)],'subscription':_0x3dcd86[_0x1f7a29(0x1dc)],'subscriptionEndDate':_0x3dcd86[_0x1f7a29(0x260)],'lastFreeCreditsReset':_0x3dcd86[_0x1f7a29(0x251)]},updateUIForLoggedInUser());});}}function initModals(){const _0x4b84a8=_0x41eae6,_0x266c01=document[_0x4b84a8(0x1aa)](_0x4b84a8(0x178)),_0x4ca1e4=document[_0x4b84a8(0x1aa)](_0x4b84a8(0x247));_0x4ca1e4[_0x4b84a8(0x12c)](_0x1d130b=>{const _0x470d18=_0x4b84a8;_0x1d130b[_0x470d18(0x120)](_0x470d18(0x1eb),()=>{const _0x2c5b59=_0x470d18;_0x1d130b['closest']('.modal')[_0x2c5b59(0x1c7)]['display']=_0x2c5b59(0x107);});}),window['addEventListener']('click',_0x2e8c88=>{_0x266c01['forEach'](_0x470749=>{const _0x373faf=_0x444a;_0x2e8c88[_0x373faf(0x213)]===_0x470749&&(_0x470749[_0x373faf(0x1c7)][_0x373faf(0x169)]=_0x373faf(0x107));});});}document[_0x41eae6(0x120)]('keydown',function(_0x385f0d){const _0x2d19c8=_0x41eae6;_0x385f0d[_0x2d19c8(0x1d8)]===_0x2d19c8(0x171)&&!_0x385f0d[_0x2d19c8(0x1a6)]&&(_0x385f0d[_0x2d19c8(0x25e)](),sendMessage());}),document[_0x41eae6(0x211)]('userInput')[_0x41eae6(0x120)](_0x41eae6(0x26a),function(_0x193e88){const _0x20607e=_0x41eae6;if(_0x193e88[_0x20607e(0x1d8)]===_0x20607e(0x171)&&_0x193e88[_0x20607e(0x1a6)]){_0x193e88['preventDefault']();const _0x448a2c=this[_0x20607e(0x159)],_0x778c2f=this[_0x20607e(0x13c)],_0x2f6723=this[_0x20607e(0x250)];this[_0x20607e(0x250)]=_0x2f6723[_0x20607e(0x16b)](0x0,_0x448a2c)+'\x0a'+_0x2f6723['substring'](_0x778c2f),this[_0x20607e(0x159)]=this[_0x20607e(0x13c)]=_0x448a2c+0x1;}});function checkApiStatus(){const _0x32cdce=_0x41eae6;axios['get'](API_BASE_URL+_0x32cdce(0x261)+API_KEY)[_0x32cdce(0x25b)](_0x5a9903=>{const _0x54b761=_0x32cdce;console[_0x54b761(0x196)](_0x54b761(0x106),_0x5a9903[_0x54b761(0x162)]),console[_0x54b761(0x196)](_0x54b761(0x262),_0x5a9903[_0x54b761(0x17c)]);})[_0x32cdce(0x1ef)](_0x1ef3a7=>{console['error']('Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20de\x20l\x27API:',_0x1ef3a7);});}function checkApiStatusRegularly(){checkApiStatus(),setInterval(checkApiStatus,0xea60);}window['addEventListener'](_0x41eae6(0x1e6),function(){const _0x1d58e7=_0x41eae6;showNotification(_0x1d58e7(0x185),_0x1d58e7(0x23d));}),window[_0x41eae6(0x120)](_0x41eae6(0x112),function(){const _0x5c487f=_0x41eae6;showNotification('Vous\x20êtes\x20de\x20nouveau\x20en\x20ligne.',_0x5c487f(0x181));}),window[_0x41eae6(0x120)](_0x41eae6(0x1d6),function(){const _0x475775=_0x41eae6;currentUser&&localStorage[_0x475775(0x160)](_0x475775(0x257),JSON['stringify'](currentConversation));});function restoreAppState(){const _0x3868da=_0x41eae6,_0x373302=localStorage[_0x3868da(0x239)](_0x3868da(0x257));_0x373302&&(currentConversation=JSON[_0x3868da(0x17e)](_0x373302),currentConversation[_0x3868da(0x12c)](_0x446427=>{const _0x440dfa=_0x3868da;addMessageToChat(_0x446427[_0x440dfa(0x1b2)],_0x446427['content']);}));}function updateUI(){const _0x364aef=_0x41eae6;currentUser&&(document[_0x364aef(0x211)](_0x364aef(0x1f1))['textContent']=currentUser[_0x364aef(0x1f1)],document[_0x364aef(0x211)]('paidCredits')[_0x364aef(0x119)]=currentUser['paidCredits'],document['getElementById']('subscription')[_0x364aef(0x119)]=currentUser[_0x364aef(0x1dc)]||_0x364aef(0x11b));}document['getElementById'](_0x41eae6(0xeb))[_0x41eae6(0x10c)]=_0x41eae6(0x271),setInterval(updateUI,0x493e0),checkApiStatusRegularly(),window[_0x41eae6(0x173)]=showLoginModal,window[_0x41eae6(0x21d)]=showRegisterModal,window[_0x41eae6(0x133)]=login,window[_0x41eae6(0x1d1)]=register,window[_0x41eae6(0xe7)]=logout,window[_0x41eae6(0x1d0)]=sendMessage,window[_0x41eae6(0x130)]=buySubscription,window[_0x41eae6(0x17b)]=buyCredits,window[_0x41eae6(0x10d)]=toggleTheme,window[_0x41eae6(0x231)]=toggleSidebar,window[_0x41eae6(0x1ba)]=createNewConversation,window['handleFileUpload']=handleFileUpload,window[_0x41eae6(0x268)]=togglePromptList,window[_0x41eae6(0x129)]=showReferralModal,window[_0x41eae6(0x256)]=generateReferralCode,window[_0x41eae6(0xf9)]=copyReferralLink,window[_0x41eae6(0xe2)]=shareOnFacebook,window[_0x41eae6(0x22f)]=shareOnTwitter,window[_0x41eae6(0x16f)]=shareOnLinkedIn,window['shareOnWhatsApp']=shareOnWhatsApp,window[_0x41eae6(0x123)]=removePinnedFile;
