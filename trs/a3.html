<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets totaux</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gestion des tickets totaux</h1>
        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".json" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <script>
const _0x133295=_0x1a9d;(function(_0x56957f,_0x17746e){const _0x36ce24=_0x1a9d,_0x1fe384=_0x56957f();while(!![]){try{const _0x3646f3=parseInt(_0x36ce24(0x101))/0x1*(-parseInt(_0x36ce24(0x140))/0x2)+-parseInt(_0x36ce24(0x106))/0x3*(-parseInt(_0x36ce24(0x114))/0x4)+-parseInt(_0x36ce24(0x143))/0x5*(parseInt(_0x36ce24(0x109))/0x6)+-parseInt(_0x36ce24(0x141))/0x7*(parseInt(_0x36ce24(0x103))/0x8)+parseInt(_0x36ce24(0x133))/0x9*(-parseInt(_0x36ce24(0x132))/0xa)+-parseInt(_0x36ce24(0x129))/0xb*(-parseInt(_0x36ce24(0x14e))/0xc)+parseInt(_0x36ce24(0x111))/0xd*(parseInt(_0x36ce24(0x148))/0xe);if(_0x3646f3===_0x17746e)break;else _0x1fe384['push'](_0x1fe384['shift']());}catch(_0x437249){_0x1fe384['push'](_0x1fe384['shift']());}}}(_0x4ede,0xce245));const firebaseConfig={'apiKey':'AIzaSyAAqwJ7Ta4SHKzLOptCNmCUFzmD9dRV1bw','authDomain':'trs100.firebaseapp.com','databaseURL':_0x133295(0x126),'projectId':_0x133295(0x10e),'storageBucket':'trs100.firebasestorage.app','messagingSenderId':_0x133295(0x134),'appId':_0x133295(0xf8),'measurementId':_0x133295(0x13b)};function _0x4ede(){const _0x42903e=['1503ipXdMU','515975925887','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20la\x20catégorie\x20','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20tous\x20les\x20tickets\x20de\x20la\x20catégorie:','then','\x22\x20value=\x22','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket.\x20Veuillez\x20réessayer.','ref','G-VMB231DY1L','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','Erreur\x20lors\x20de\x20l\x27importation:','error','238anCDTy','2408bCPUCp','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20tous\x20les\x20tickets\x20de\x20la\x20catégorie.\x20Veuillez\x20réessayer.','215JdVUCe','ticketCategories','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket:','forEach','update','14HFKVgu','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','data:text/json;charset=utf-8,','innerHTML','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','motDePasse','12Qkirjj','val','readAsText','target','setAttribute','prix','from','parse','trim','TicketsTotal/','\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20','catch','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?','result','push','1:515975925887:web:d4f867778ec322d8f52f4a','loadingIndicator','input','Erreur\x20d\x27importation:','tickets_export.json','input[name=\x22ticketSelect_','initializeApp','toLowerCase','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets\x20sélectionnés.\x20Veuillez\x20réessayer.','12541rrhPlp','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','10784kjeyAE','ticketsBody_','download','6tIFjCm','includes','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27','67434exSmlh','</span>','TicketsTotal','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','value','trs100','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','body','8850959vkimcE','searchBar','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_','2737968xbdHpO','stringify','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27','<span\x20class=\x22highlight\x22>','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets\x20sélectionnés:','\x22]:checked','getElementById','addEventListener','querySelectorAll','Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Cela\x20remplacera\x20les\x20tickets\x20existants\x20dans\x20les\x20catégories\x20correspondantes.','set','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','href','splice','\x27,\x20','https://trs100-default-rtdb.firebaseio.com','style','appendChild','17693269ecjfRf','once','createElement','\x20?\x20Cette\x20action\x20est\x20irréversible.','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','display','utilisateur','remove','flex','22430wPhWFf'];_0x4ede=function(){return _0x42903e;};return _0x4ede();}firebase[_0x133295(0xfe)](firebaseConfig);function _0x1a9d(_0x5c04ad,_0x5d88c7){const _0x4edef9=_0x4ede();return _0x1a9d=function(_0x1a9dbb,_0x17aab1){_0x1a9dbb=_0x1a9dbb-0xf1;let _0x17d721=_0x4edef9[_0x1a9dbb];return _0x17d721;},_0x1a9d(_0x5c04ad,_0x5d88c7);}const database=firebase['database']();let allTickets={};function showLoading(){const _0x9f8a6=_0x133295;document[_0x9f8a6(0x11c)](_0x9f8a6(0xf9))[_0x9f8a6(0x127)][_0x9f8a6(0x12e)]=_0x9f8a6(0x131);}function hideLoading(){const _0x31c5c8=_0x133295;document['getElementById'](_0x31c5c8(0xf9))[_0x31c5c8(0x127)]['display']='none';}function loadTickets(){const _0x1122fd=_0x133295;showLoading();const _0x4b5304=database[_0x1122fd(0x13a)](_0x1122fd(0x10b));_0x4b5304['on']('value',_0x433593=>{const _0x279b00=_0x1122fd;allTickets=_0x433593[_0x279b00(0x14f)](),displayTickets(allTickets),hideLoading();},_0x1b30a1=>{const _0x2238bc=_0x1122fd;console[_0x2238bc(0x13f)](_0x2238bc(0x122),_0x1b30a1),hideLoading(),alert(_0x2238bc(0x10f));});}function displayTickets(_0x3dd9e1,_0xe73207=''){const _0x25e33e=_0x133295,_0x4b81e0=document[_0x25e33e(0x11c)](_0x25e33e(0x144));_0x4b81e0[_0x25e33e(0x14b)]='';for(let _0x2f90f1 in _0x3dd9e1){const _0x25388b=_0x3dd9e1[_0x2f90f1],_0x3da0e7='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>'+_0x2f90f1+_0x25e33e(0x108)+_0x2f90f1+_0x25e33e(0xf3)+_0x2f90f1+_0x25e33e(0x113)+_0x2f90f1+_0x25e33e(0x116)+_0x2f90f1+_0x25e33e(0x13c)+_0x2f90f1+_0x25e33e(0x102);_0x4b81e0[_0x25e33e(0x14b)]+=_0x3da0e7;const _0x4892f0=document[_0x25e33e(0x11c)](_0x25e33e(0x104)+_0x2f90f1);for(let _0x5e01aa=0x0;_0x5e01aa<_0x25388b[_0x25e33e(0x14d)][_0x25e33e(0x118)];_0x5e01aa++){if(_0xe73207&&!matchesSearch(_0x25388b,_0x5e01aa,_0xe73207))continue;const _0x30a7fd=_0x25e33e(0x119)+_0x2f90f1+_0x25e33e(0x138)+_0x5e01aa+_0x25e33e(0x10c)+highlightMatch(_0x25388b[_0x25e33e(0x14d)][_0x5e01aa],_0xe73207)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x25388b[_0x25e33e(0x153)][_0x5e01aa],_0xe73207)+_0x25e33e(0x14c)+highlightMatch(_0x25388b[_0x25e33e(0x12f)][_0x5e01aa],_0xe73207)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20onclick=\x22deleteTicket(\x27'+_0x2f90f1+_0x25e33e(0x125)+_0x5e01aa+')\x22\x20class=\x22delete-btn\x22>Supprimer</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x4892f0[_0x25e33e(0x14b)]+=_0x30a7fd;}}}function matchesSearch(_0x3faae6,_0x582e6d,_0x246fa0){const _0x1ef5da=_0x133295,_0xd8cc1b=_0x246fa0[_0x1ef5da(0xff)]();return _0x3faae6[_0x1ef5da(0x14d)][_0x582e6d]['toLowerCase']()['includes'](_0xd8cc1b)||_0x3faae6['prix'][_0x582e6d]['toLowerCase']()[_0x1ef5da(0x107)](_0xd8cc1b)||_0x3faae6[_0x1ef5da(0x12f)][_0x582e6d]['toLowerCase']()['includes'](_0xd8cc1b);}function highlightMatch(_0x90bd9d,_0x20aa17){const _0x386288=_0x133295;if(!_0x20aa17)return _0x90bd9d;const _0x4869ae=new RegExp(_0x20aa17,'gi');return _0x90bd9d['replace'](_0x4869ae,_0x7c0d8=>_0x386288(0x117)+_0x7c0d8+_0x386288(0x10a));}function deleteTicket(_0x39077a,_0x2ee868){const _0x9d06e1=_0x133295;confirm(_0x9d06e1(0xf5))&&(showLoading(),database[_0x9d06e1(0x13a)](_0x9d06e1(0xf2)+_0x39077a)['once'](_0x9d06e1(0x10d),_0x5ec7f5=>{const _0x160e96=_0x9d06e1,_0x40bd97=_0x5ec7f5[_0x160e96(0x14f)]();_0x40bd97[_0x160e96(0x14d)]['splice'](_0x2ee868,0x1),_0x40bd97[_0x160e96(0x153)][_0x160e96(0x124)](_0x2ee868,0x1),_0x40bd97[_0x160e96(0x12f)][_0x160e96(0x124)](_0x2ee868,0x1),database[_0x160e96(0x13a)](_0x160e96(0xf2)+_0x39077a)['set'](_0x40bd97)[_0x160e96(0x137)](()=>{hideLoading();})[_0x160e96(0xf4)](_0x5480d6=>{const _0x99578d=_0x160e96;console[_0x99578d(0x13f)](_0x99578d(0x145),_0x5480d6),hideLoading(),alert(_0x99578d(0x139));});}));}function deleteSelectedTickets(_0x1035ba){const _0x179e16=_0x133295,_0x211bb0=document[_0x179e16(0x11e)](_0x179e16(0xfd)+_0x1035ba+_0x179e16(0x11b));_0x211bb0[_0x179e16(0x118)]>0x0&&confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?')&&(showLoading(),database[_0x179e16(0x13a)](_0x179e16(0xf2)+_0x1035ba)[_0x179e16(0x12a)](_0x179e16(0x10d),_0x146f30=>{const _0x3f6f2d=_0x179e16,_0xe21673=_0x146f30[_0x3f6f2d(0x14f)](),_0x18bbf6=Array[_0x3f6f2d(0x154)](_0x211bb0)['map'](_0x3dd891=>parseInt(_0x3dd891[_0x3f6f2d(0x10d)]))['sort']((_0x2368cd,_0x15742f)=>_0x15742f-_0x2368cd);_0x18bbf6[_0x3f6f2d(0x146)](_0x5e0312=>{const _0x3f94b2=_0x3f6f2d;_0xe21673['motDePasse'][_0x3f94b2(0x124)](_0x5e0312,0x1),_0xe21673[_0x3f94b2(0x153)][_0x3f94b2(0x124)](_0x5e0312,0x1),_0xe21673[_0x3f94b2(0x12f)][_0x3f94b2(0x124)](_0x5e0312,0x1);}),database[_0x3f6f2d(0x13a)](_0x3f6f2d(0xf2)+_0x1035ba)[_0x3f6f2d(0x121)](_0xe21673)[_0x3f6f2d(0x137)](()=>{hideLoading();})[_0x3f6f2d(0xf4)](_0x53cf38=>{const _0x2c5bf2=_0x3f6f2d;console['error'](_0x2c5bf2(0x11a),_0x53cf38),hideLoading(),alert(_0x2c5bf2(0x100));});}));}function deleteAllTicketsInCategory(_0xcf5ca9){const _0x249ec2=_0x133295;confirm(_0x249ec2(0x135)+_0xcf5ca9+_0x249ec2(0x12c))&&(showLoading(),database['ref'](_0x249ec2(0xf2)+_0xcf5ca9)[_0x249ec2(0x147)]({'motDePasse':[],'prix':[],'utilisateur':[]})[_0x249ec2(0x137)](()=>{hideLoading();})['catch'](_0x3056ce=>{const _0x50ae19=_0x249ec2;console['error'](_0x50ae19(0x136),_0x3056ce),hideLoading(),alert(_0x50ae19(0x142));}));}function deleteSearchResults(){const _0x7b0bcd=_0x133295,_0x46fe66=document[_0x7b0bcd(0x11c)](_0x7b0bcd(0x112))['value'][_0x7b0bcd(0xf1)]();if(!_0x46fe66){alert('Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.');return;}if(confirm(_0x7b0bcd(0x149))){showLoading();const _0x1735a3={};for(let _0x439899 in allTickets){const _0x1a023c=allTickets[_0x439899],_0x1373be={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x1c3b01=0x0;_0x1c3b01<_0x1a023c[_0x7b0bcd(0x14d)][_0x7b0bcd(0x118)];_0x1c3b01++){!matchesSearch(_0x1a023c,_0x1c3b01,_0x46fe66)&&(_0x1373be[_0x7b0bcd(0x14d)][_0x7b0bcd(0xf7)](_0x1a023c[_0x7b0bcd(0x14d)][_0x1c3b01]),_0x1373be[_0x7b0bcd(0x153)][_0x7b0bcd(0xf7)](_0x1a023c[_0x7b0bcd(0x153)][_0x1c3b01]),_0x1373be[_0x7b0bcd(0x12f)][_0x7b0bcd(0xf7)](_0x1a023c[_0x7b0bcd(0x12f)][_0x1c3b01]));}_0x1735a3[_0x7b0bcd(0xf2)+_0x439899]=_0x1373be;}database[_0x7b0bcd(0x13a)]()[_0x7b0bcd(0x147)](_0x1735a3)[_0x7b0bcd(0x137)](()=>{const _0x3ea682=_0x7b0bcd;hideLoading(),alert(_0x3ea682(0x11f));})['catch'](_0x542e5d=>{const _0x4acb47=_0x7b0bcd;console[_0x4acb47(0x13f)]('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:',_0x542e5d),hideLoading(),alert(_0x4acb47(0x12d));});}}function searchTickets(){const _0x1440d4=_0x133295,_0x441139=document[_0x1440d4(0x11c)]('searchBar')[_0x1440d4(0x10d)]['trim']();displayTickets(allTickets,_0x441139);}function exportTickets(){const _0x2ca48e=_0x133295;showLoading();const _0x1b7d84=_0x2ca48e(0x14a)+encodeURIComponent(JSON[_0x2ca48e(0x115)](allTickets,null,0x2)),_0x3497ce=document[_0x2ca48e(0x12b)]('a');_0x3497ce[_0x2ca48e(0x152)](_0x2ca48e(0x123),_0x1b7d84),_0x3497ce['setAttribute'](_0x2ca48e(0x105),_0x2ca48e(0xfc)),document[_0x2ca48e(0x110)][_0x2ca48e(0x128)](_0x3497ce),_0x3497ce['click'](),_0x3497ce[_0x2ca48e(0x130)](),hideLoading();}function exportFilteredTickets(){const _0x7fc0b0=_0x133295;showLoading();const _0x25d2be=document[_0x7fc0b0(0x11c)]('searchBar')[_0x7fc0b0(0x10d)][_0x7fc0b0(0xf1)](),_0x4fed2f={};for(let _0x405bb8 in allTickets){const _0x590553=allTickets[_0x405bb8];_0x4fed2f[_0x405bb8]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x27f808=0x0;_0x27f808<_0x590553[_0x7fc0b0(0x14d)][_0x7fc0b0(0x118)];_0x27f808++){(!_0x25d2be||matchesSearch(_0x590553,_0x27f808,_0x25d2be))&&(_0x4fed2f[_0x405bb8][_0x7fc0b0(0x14d)][_0x7fc0b0(0xf7)](_0x590553['motDePasse'][_0x27f808]),_0x4fed2f[_0x405bb8][_0x7fc0b0(0x153)][_0x7fc0b0(0xf7)](_0x590553['prix'][_0x27f808]),_0x4fed2f[_0x405bb8][_0x7fc0b0(0x12f)][_0x7fc0b0(0xf7)](_0x590553[_0x7fc0b0(0x12f)][_0x27f808]));}}const _0x2d0380='data:text/json;charset=utf-8,'+encodeURIComponent(JSON[_0x7fc0b0(0x115)](_0x4fed2f,null,0x2)),_0x2c2732=document[_0x7fc0b0(0x12b)]('a');_0x2c2732['setAttribute'](_0x7fc0b0(0x123),_0x2d0380),_0x2c2732[_0x7fc0b0(0x152)](_0x7fc0b0(0x105),'filtered_tickets_export.json'),document[_0x7fc0b0(0x110)][_0x7fc0b0(0x128)](_0x2c2732),_0x2c2732['click'](),_0x2c2732[_0x7fc0b0(0x130)](),hideLoading();}function importTickets(_0x517073){const _0x5eec78=_0x133295,_0x16b356=_0x517073[_0x5eec78(0x151)]['files'][0x0];if(_0x16b356){showLoading();const _0x3911cd=new FileReader();_0x3911cd['onload']=function(_0x8b02a2){const _0x23b3e7=_0x5eec78;try{const _0xf6d8ca=JSON[_0x23b3e7(0x155)](_0x8b02a2[_0x23b3e7(0x151)][_0x23b3e7(0xf6)]);if(confirm(_0x23b3e7(0x120))){const _0x217409={};for(let _0x565570 in _0xf6d8ca){_0x217409[_0x23b3e7(0xf2)+_0x565570]=_0xf6d8ca[_0x565570];}database[_0x23b3e7(0x13a)]()[_0x23b3e7(0x147)](_0x217409)[_0x23b3e7(0x137)](()=>{hideLoading(),alert('Importation\x20réussie\x20!');})[_0x23b3e7(0xf4)](_0x3b04ae=>{const _0xb0bdbc=_0x23b3e7;console[_0xb0bdbc(0x13f)](_0xb0bdbc(0x13e),_0x3b04ae),hideLoading(),alert(_0xb0bdbc(0x13d));});}else hideLoading();}catch(_0xcc17d8){console['error'](_0x23b3e7(0xfb),_0xcc17d8),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier\x20JSON.');}},_0x3911cd[_0x5eec78(0x150)](_0x16b356);}}document['getElementById'](_0x133295(0x112))[_0x133295(0x11d)](_0x133295(0xfa),searchTickets),window['onload']=loadTickets;
    </script>
</body>
</html>
