<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets totaux</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gestion des tickets totaux</h1>
        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".json,.csv,.txt" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
const _0x27545=_0x3bf1;(function(_0x2a9d91,_0x4d5ab3){const _0x1493bb=_0x3bf1,_0x484050=_0x2a9d91();while(!![]){try{const _0x542d0e=parseInt(_0x1493bb(0x24e))/0x1*(parseInt(_0x1493bb(0x26e))/0x2)+-parseInt(_0x1493bb(0x271))/0x3*(-parseInt(_0x1493bb(0x268))/0x4)+parseInt(_0x1493bb(0x206))/0x5*(-parseInt(_0x1493bb(0x210))/0x6)+-parseInt(_0x1493bb(0x26a))/0x7*(parseInt(_0x1493bb(0x249))/0x8)+-parseInt(_0x1493bb(0x259))/0x9+-parseInt(_0x1493bb(0x23a))/0xa*(parseInt(_0x1493bb(0x275))/0xb)+parseInt(_0x1493bb(0x226))/0xc;if(_0x542d0e===_0x4d5ab3)break;else _0x484050['push'](_0x484050['shift']());}catch(_0x1dd501){_0x484050['push'](_0x484050['shift']());}}}(_0x1c13,0xdc1d7));const firebaseConfig={'apiKey':_0x27545(0x229),'authDomain':_0x27545(0x21f),'databaseURL':_0x27545(0x255),'projectId':'trs100','storageBucket':_0x27545(0x272),'messagingSenderId':_0x27545(0x25e),'appId':_0x27545(0x278),'measurementId':_0x27545(0x233)};firebase[_0x27545(0x1eb)](firebaseConfig);const database=firebase[_0x27545(0x230)]();let allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,editingCategory='',editingIndex=-0x1;function showLoading(){const _0x3720ad=_0x27545;document['getElementById'](_0x3720ad(0x1f5))[_0x3720ad(0x214)][_0x3720ad(0x1ff)]=_0x3720ad(0x211);}function hideLoading(){const _0x22574c=_0x27545;document['getElementById'](_0x22574c(0x1f5))[_0x22574c(0x214)][_0x22574c(0x1ff)]='none';}function _0x1c13(){const _0x637411=['pop','onload','6186nHhQcR','flex','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicket(\x27','setAttribute','style','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?','txt','editCategoryName','textContent','/ip\x20hotspot\x20user','result','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','ticketCategories','Veuillez\x20entrer\x20un\x20prix','name','trs100.firebaseapp.com','map','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:','editCategoryModal','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','22299588BVEoNS','readAsText','href','AIzaSyAAqwJ7Ta4SHKzLOptCNmCUFzmD9dRV1bw','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie','match','split','target','editPassword','push','database','fill','getElementById','G-VMB231DY1L','catch','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?','Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','json','value','14151040DjDBkP','trim','from','editUser','priceInput','Erreur\x20lors\x20de\x20l\x27importation:','searchBar','importFile','\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20','editPrice','Ticket\x20supprimé\x20avec\x20succès!','Format\x20JSON\x20invalide\x20ou\x20catégorie\x20non\x20trouvée','block','filtered_tickets_export.json','prix','72TjZTtc','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','Tous\x20les\x20champs\x20sont\x20obligatoires','ticketsBody_','Importation\x20réussie\x20!','117031Ceqsvu','newUser','priceModal','\x27,\x20','set','error','toLowerCase','https://trs100-default-rtdb.firebaseio.com','update','</span>','Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!','15282000ZMDmCZ','Format\x20de\x20fichier\x20non\x20supporté','motDePasse','innerHTML','Ticket\x20modifié\x20avec\x20succès!','515975925887','utilisateur','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide','Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!','Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier','splice','indexOf','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.','1972oVRndl','Erreur\x20lors\x20de\x20la\x20suppression:','435099iAeSHh',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>','includes','30MtkoHm','addEventListener','download','9627shxEmn','trs100.firebasestorage.app','ref','\x22]:checked','11lygtuI','then','appendChild','1:515975925887:web:d4f867778ec322d8f52f4a','Erreur\x20d\x27importation:','val','stringify','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_','initializeApp','click','data:text/json;charset=utf-8,','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.','replace','\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(\x27','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer','parse','loadingIndicator','\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27','remove','\x22\x20value=\x22','Catégorie\x20modifiée\x20avec\x20succès!','body','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','newPrice','tickets_export.json','csv','display','newPassword','none','<span\x20class=\x22highlight\x22>','Importation\x20réussie\x20dans\x20la\x20catégorie\x20','querySelectorAll','files','3015SyeHfF','categoryName','length','Erreur\x20lors\x20de\x20la\x20modification:','TicketsTotal/','TicketsTotal','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:','keys'];_0x1c13=function(){return _0x637411;};return _0x1c13();}function loadTickets(){const _0x4a31cd=_0x27545;showLoading();const _0x5b56c2=database[_0x4a31cd(0x273)](_0x4a31cd(0x20b));_0x5b56c2['on'](_0x4a31cd(0x239),_0x581c71=>{const _0x2951ef=_0x4a31cd;allTickets=_0x581c71[_0x2951ef(0x1e8)](),displayTickets(allTickets),hideLoading();},_0x5641ee=>{const _0x295ce9=_0x4a31cd;console[_0x295ce9(0x253)](_0x295ce9(0x225),_0x5641ee),hideLoading(),alert(_0x295ce9(0x260));});}function displayTickets(_0x5ab9f1,_0x4dd521=''){const _0x2b6f9c=_0x27545,_0x60e7a=document[_0x2b6f9c(0x232)](_0x2b6f9c(0x21c));_0x60e7a[_0x2b6f9c(0x25c)]='';for(let _0x558aa9 in _0x5ab9f1){const _0x3e853e=_0x5ab9f1[_0x558aa9],_0x3cce01=_0x2b6f9c(0x26c)+_0x558aa9+'</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22editCategory(\x27'+_0x558aa9+_0x2b6f9c(0x1f0)+_0x558aa9+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_'+_0x558aa9+_0x2b6f9c(0x242)+_0x558aa9+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_'+_0x558aa9+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27'+_0x558aa9+_0x2b6f9c(0x1f6)+_0x558aa9+'\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20'+_0x558aa9+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_'+_0x558aa9+_0x2b6f9c(0x1f1)+_0x558aa9+'\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20'+_0x558aa9+_0x2b6f9c(0x1f2);_0x60e7a[_0x2b6f9c(0x25c)]+=_0x3cce01;const _0x394dd0=document['getElementById'](_0x2b6f9c(0x24c)+_0x558aa9);for(let _0x5dfcca=0x0;_0x5dfcca<_0x3e853e['motDePasse'][_0x2b6f9c(0x208)];_0x5dfcca++){if(_0x4dd521&&!matchesSearch(_0x3e853e,_0x5dfcca,_0x4dd521))continue;const _0x5c5347=_0x2b6f9c(0x1ea)+_0x558aa9+_0x2b6f9c(0x1f8)+_0x5dfcca+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x3e853e[_0x2b6f9c(0x25b)][_0x5dfcca],_0x4dd521)+_0x2b6f9c(0x222)+highlightMatch(_0x3e853e[_0x2b6f9c(0x248)][_0x5dfcca],_0x4dd521)+_0x2b6f9c(0x222)+highlightMatch(_0x3e853e[_0x2b6f9c(0x25f)][_0x5dfcca],_0x4dd521)+_0x2b6f9c(0x212)+_0x558aa9+_0x2b6f9c(0x251)+_0x5dfcca+_0x2b6f9c(0x26b)+_0x558aa9+_0x2b6f9c(0x251)+_0x5dfcca+')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x394dd0[_0x2b6f9c(0x25c)]+=_0x5c5347;}}}function editTicket(_0x5704c2,_0x22a96d){const _0x151352=_0x27545;editingCategory=_0x5704c2,editingIndex=_0x22a96d;const _0x593d15=allTickets[_0x5704c2];document[_0x151352(0x232)](_0x151352(0x22e))[_0x151352(0x239)]=_0x593d15[_0x151352(0x25b)][_0x22a96d],document[_0x151352(0x232)](_0x151352(0x243))[_0x151352(0x239)]=_0x593d15[_0x151352(0x248)][_0x22a96d],document[_0x151352(0x232)](_0x151352(0x23d))[_0x151352(0x239)]=_0x593d15[_0x151352(0x25f)][_0x22a96d],document[_0x151352(0x232)]('editTicketModal')[_0x151352(0x214)][_0x151352(0x1ff)]=_0x151352(0x246);}function saveTicketEdit(){const _0x4300c7=_0x27545,_0x576dc4=document[_0x4300c7(0x232)](_0x4300c7(0x22e))[_0x4300c7(0x239)],_0x256c83=document[_0x4300c7(0x232)](_0x4300c7(0x243))['value'],_0x126688=document[_0x4300c7(0x232)]('editUser')[_0x4300c7(0x239)];if(!_0x576dc4||!_0x256c83||!_0x126688){alert(_0x4300c7(0x24b));return;}showLoading();const _0x488d22={},_0x131c3d=allTickets[editingCategory];_0x131c3d[_0x4300c7(0x25b)][editingIndex]=_0x576dc4,_0x131c3d[_0x4300c7(0x248)][editingIndex]=_0x256c83,_0x131c3d[_0x4300c7(0x25f)][editingIndex]=_0x126688,_0x488d22[_0x4300c7(0x20a)+editingCategory]=_0x131c3d,database[_0x4300c7(0x273)]()['update'](_0x488d22)['then'](()=>{const _0x2b739c=_0x4300c7;hideLoading(),closeEditModal(),alert(_0x2b739c(0x25d));})[_0x4300c7(0x234)](_0xa14908=>{const _0x30e704=_0x4300c7;console['error'](_0x30e704(0x209),_0xa14908),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket');});}function importTicketsToCategory(_0x134df1,_0x1478f3){const _0x701b0a=_0x27545,_0x38e4dd=_0x1478f3['target'][_0x701b0a(0x205)][0x0];if(!_0x38e4dd)return;showLoading();const _0x2c73dc=new FileReader();_0x2c73dc[_0x701b0a(0x20f)]=function(_0x31f4c4){const _0x4ee7e0=_0x701b0a;try{const _0x480c79=_0x38e4dd[_0x4ee7e0(0x21e)][_0x4ee7e0(0x22c)]('.')[_0x4ee7e0(0x20e)]()[_0x4ee7e0(0x254)]();if(_0x480c79===_0x4ee7e0(0x238))handleJsonImportToCategory(_0x31f4c4[_0x4ee7e0(0x22d)][_0x4ee7e0(0x21a)],_0x134df1);else{if(_0x480c79===_0x4ee7e0(0x1fe))handleCsvImportToCategory(_0x31f4c4[_0x4ee7e0(0x22d)][_0x4ee7e0(0x21a)],_0x134df1);else{if(_0x480c79===_0x4ee7e0(0x216))handleTxtImportToCategory(_0x31f4c4['target'][_0x4ee7e0(0x21a)],_0x134df1);else throw new Error('Format\x20de\x20fichier\x20non\x20supporté');}}}catch(_0x3e4fe4){console[_0x4ee7e0(0x253)](_0x4ee7e0(0x279),_0x3e4fe4),hideLoading(),alert(_0x4ee7e0(0x267));}},_0x2c73dc['readAsText'](_0x38e4dd);}function handleJsonImportToCategory(_0x49aa1b,_0x1d9d41){const _0x44f5a6=_0x27545,_0x37a91a=JSON['parse'](_0x49aa1b);let _0x5e53ca;if(_0x37a91a[_0x44f5a6(0x25b)])_0x5e53ca=_0x37a91a;else{if(_0x37a91a[_0x1d9d41])_0x5e53ca=_0x37a91a[_0x1d9d41];else{hideLoading(),alert(_0x44f5a6(0x245));return;}}mergeTicketsToCategory(_0x1d9d41,_0x5e53ca);}function handleCsvImportToCategory(_0x2eedda,_0x585e2c){const _0x3fd58c=_0x27545,_0x30f7f6=_0x2eedda[_0x3fd58c(0x22c)]('\x0a'),_0x375051={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x3358c2=0x1;_0x3358c2<_0x30f7f6['length'];_0x3358c2++){if(!_0x30f7f6[_0x3358c2][_0x3fd58c(0x23b)]())continue;const _0x519353=_0x30f7f6[_0x3358c2][_0x3fd58c(0x22c)](',');_0x375051[_0x3fd58c(0x25f)][_0x3fd58c(0x22f)](_0x519353[0x0]['trim']()),_0x375051[_0x3fd58c(0x25b)][_0x3fd58c(0x22f)](_0x519353[0x1][_0x3fd58c(0x23b)]()),_0x519353[0x3]&&_0x375051['prix'][_0x3fd58c(0x22f)](_0x519353[0x3][_0x3fd58c(0x23b)]());}!_0x375051[_0x3fd58c(0x248)][_0x3fd58c(0x208)]?(tempImportData={[_0x585e2c]:_0x375051},tempCategory=_0x585e2c,showPriceModal(_0x585e2c)):mergeTicketsToCategory(_0x585e2c,_0x375051);}function handleTxtImportToCategory(_0x134550,_0x4080cb){const _0x3d21b=_0x27545,_0x3b6cbf=_0x134550['split']('\x0a'),_0x5c04b0={'motDePasse':[],'prix':[],'utilisateur':[]},_0x4106b0=/add name="([^"]+)" password="([^"]+)"/;for(let _0x169907 of _0x3b6cbf){_0x169907=_0x169907['trim']();if(!_0x169907||_0x169907===_0x3d21b(0x219))continue;const _0x4ec6da=_0x169907['match'](_0x4106b0);if(_0x4ec6da){const [_0x359992,_0x38d49f,_0x2cb478]=_0x4ec6da;_0x5c04b0[_0x3d21b(0x25f)]['push'](_0x38d49f),_0x5c04b0[_0x3d21b(0x25b)]['push'](_0x2cb478);}}_0x5c04b0[_0x3d21b(0x25b)][_0x3d21b(0x208)]>0x0?(tempImportData={[_0x4080cb]:_0x5c04b0},tempCategory=_0x4080cb,showPriceModal(_0x4080cb)):(hideLoading(),alert('Aucun\x20ticket\x20valide\x20trouvé\x20dans\x20le\x20fichier'));}function mergeTicketsToCategory(_0x20341c,_0x26c456){const _0x553be5=_0x27545;!allTickets[_0x20341c]&&(allTickets[_0x20341c]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0x32e054=allTickets[_0x20341c],_0x424329={'motDePasse':[..._0x32e054['motDePasse'],..._0x26c456['motDePasse']],'prix':[..._0x32e054[_0x553be5(0x248)],..._0x26c456[_0x553be5(0x248)]],'utilisateur':[..._0x32e054['utilisateur'],..._0x26c456['utilisateur']]};database[_0x553be5(0x273)](_0x553be5(0x20a)+_0x20341c)[_0x553be5(0x252)](_0x424329)[_0x553be5(0x276)](()=>{const _0xe75073=_0x553be5;hideLoading(),alert(_0xe75073(0x203)+_0x20341c+'\x20!\x20Les\x20nouveaux\x20tickets\x20ont\x20été\x20ajoutés\x20aux\x20existants.');})[_0x553be5(0x234)](_0x1f6a51=>{const _0x20e67e=_0x553be5;console['error'](_0x20e67e(0x23f),_0x1f6a51),hideLoading(),alert(_0x20e67e(0x24a));});}function editCategory(_0x4d4723){const _0x5002c5=_0x27545;currentEditingCategory=_0x4d4723,document[_0x5002c5(0x232)]('editCategoryName')['value']=_0x4d4723,document[_0x5002c5(0x232)]('editCategoryModal')['style'][_0x5002c5(0x1ff)]='block';}function saveCategoryEdit(){const _0x31916a=_0x27545,_0x3d1603=document['getElementById'](_0x31916a(0x217))[_0x31916a(0x239)]['trim']();if(!_0x3d1603){alert(_0x31916a(0x262));return;}if(_0x3d1603===currentEditingCategory){closeEditCategoryModal();return;}showLoading();const _0x30acac=allTickets[currentEditingCategory],_0x12b742={['TicketsTotal/'+currentEditingCategory]:null,[_0x31916a(0x20a)+_0x3d1603]:_0x30acac};database[_0x31916a(0x273)]()['update'](_0x12b742)[_0x31916a(0x276)](()=>{const _0x139019=_0x31916a;hideLoading(),closeEditCategoryModal(),alert(_0x139019(0x1f9));})['catch'](_0x51de33=>{const _0x30ac21=_0x31916a;console[_0x30ac21(0x253)]('Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:',_0x51de33),hideLoading(),alert(_0x30ac21(0x22a));});}function showAddTicketModal(_0x36283a){const _0x5ae4af=_0x27545;currentEditingCategory=_0x36283a,document[_0x5ae4af(0x232)]('newPassword')['value']='',document[_0x5ae4af(0x232)](_0x5ae4af(0x1fc))[_0x5ae4af(0x239)]='',document[_0x5ae4af(0x232)]('newUser')['value']='',document[_0x5ae4af(0x232)]('addTicketModal')[_0x5ae4af(0x214)][_0x5ae4af(0x1ff)]=_0x5ae4af(0x246);}function saveNewTicket(){const _0x50a332=_0x27545,_0xb6ce3c=document[_0x50a332(0x232)](_0x50a332(0x200))['value'][_0x50a332(0x23b)](),_0x543eaa=document[_0x50a332(0x232)]('newPrice')[_0x50a332(0x239)][_0x50a332(0x23b)](),_0x2724f5=document[_0x50a332(0x232)](_0x50a332(0x24f))[_0x50a332(0x239)]['trim']();if(!_0xb6ce3c||!_0x543eaa||!_0x2724f5){alert(_0x50a332(0x24b));return;}showLoading();const _0x2d31f6=allTickets[currentEditingCategory];_0x2d31f6[_0x50a332(0x25b)]['push'](_0xb6ce3c),_0x2d31f6[_0x50a332(0x248)][_0x50a332(0x22f)](_0x543eaa),_0x2d31f6['utilisateur'][_0x50a332(0x22f)](_0x2724f5),database[_0x50a332(0x273)](_0x50a332(0x20a)+currentEditingCategory)['set'](_0x2d31f6)['then'](()=>{hideLoading(),closeAddTicketModal(),alert('Ticket\x20ajouté\x20avec\x20succès!');})[_0x50a332(0x234)](_0x4cf632=>{const _0x415984=_0x50a332;console['error'](_0x415984(0x20c),_0x4cf632),hideLoading(),alert(_0x415984(0x21b));});}function closeEditModal(){const _0x32e28c=_0x27545;document[_0x32e28c(0x232)]('editTicketModal')[_0x32e28c(0x214)][_0x32e28c(0x1ff)]=_0x32e28c(0x201),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0x4417b0=_0x27545;document['getElementById'](_0x4417b0(0x224))[_0x4417b0(0x214)][_0x4417b0(0x1ff)]=_0x4417b0(0x201),currentEditingCategory=null;}function _0x3bf1(_0x2afc79,_0x77aa44){const _0x1c1363=_0x1c13();return _0x3bf1=function(_0x3bf1dc,_0x369a3b){_0x3bf1dc=_0x3bf1dc-0x1e8;let _0x1d388a=_0x1c1363[_0x3bf1dc];return _0x1d388a;},_0x3bf1(_0x2afc79,_0x77aa44);}function closeAddTicketModal(){const _0x587da3=_0x27545;document[_0x587da3(0x232)]('addTicketModal')['style'][_0x587da3(0x1ff)]='none',currentEditingCategory=null;}function matchesSearch(_0x468a43,_0x22f2c2,_0x3902ec){const _0xa71d2f=_0x27545,_0x271a01=_0x3902ec[_0xa71d2f(0x254)]();return _0x468a43[_0xa71d2f(0x25b)][_0x22f2c2][_0xa71d2f(0x254)]()[_0xa71d2f(0x26d)](_0x271a01)||_0x468a43['prix'][_0x22f2c2][_0xa71d2f(0x254)]()['includes'](_0x271a01)||_0x468a43[_0xa71d2f(0x25f)][_0x22f2c2]['toLowerCase']()[_0xa71d2f(0x26d)](_0x271a01);}function highlightMatch(_0x4c7166,_0x13d93a){const _0x3ebe93=_0x27545;if(!_0x13d93a)return _0x4c7166;const _0x1b6353=new RegExp(_0x13d93a,'gi');return _0x4c7166[_0x3ebe93(0x1ef)](_0x1b6353,_0x3beb9c=>_0x3ebe93(0x202)+_0x3beb9c+_0x3ebe93(0x257));}function deleteTicket(_0x4bfc08,_0x3ab5e1){const _0x4298f0=_0x27545;if(confirm(_0x4298f0(0x215))){showLoading();const _0x6d3e1c=allTickets[_0x4bfc08];_0x6d3e1c[_0x4298f0(0x25b)][_0x4298f0(0x265)](_0x3ab5e1,0x1),_0x6d3e1c['prix'][_0x4298f0(0x265)](_0x3ab5e1,0x1),_0x6d3e1c['utilisateur'][_0x4298f0(0x265)](_0x3ab5e1,0x1),database[_0x4298f0(0x273)]('TicketsTotal/'+_0x4bfc08)[_0x4298f0(0x252)](_0x6d3e1c)['then'](()=>{const _0x298ac8=_0x4298f0;hideLoading(),alert(_0x298ac8(0x244));})['catch'](_0x2598b9=>{const _0x8e14ea=_0x4298f0;console[_0x8e14ea(0x253)]('Erreur\x20lors\x20de\x20la\x20suppression:',_0x2598b9),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket');});}}function deleteSelectedTickets(_0x596e16){const _0x5157ec=_0x27545,_0x36f1ac=document[_0x5157ec(0x204)]('input[name=\x22ticketSelect_'+_0x596e16+_0x5157ec(0x274));if(_0x36f1ac[_0x5157ec(0x208)]===0x0){alert(_0x5157ec(0x1f3));return;}if(confirm(_0x5157ec(0x235))){showLoading();const _0x2f014b=allTickets[_0x596e16],_0x31571f=Array[_0x5157ec(0x23c)](_0x36f1ac)[_0x5157ec(0x220)](_0x3e62a9=>parseInt(_0x3e62a9[_0x5157ec(0x239)]))['sort']((_0x35cc42,_0x3b8b77)=>_0x3b8b77-_0x35cc42);_0x31571f['forEach'](_0x251da9=>{const _0x2ff22f=_0x5157ec;_0x2f014b['motDePasse'][_0x2ff22f(0x265)](_0x251da9,0x1),_0x2f014b[_0x2ff22f(0x248)][_0x2ff22f(0x265)](_0x251da9,0x1),_0x2f014b[_0x2ff22f(0x25f)][_0x2ff22f(0x265)](_0x251da9,0x1);}),database[_0x5157ec(0x273)](_0x5157ec(0x20a)+_0x596e16)['set'](_0x2f014b)[_0x5157ec(0x276)](()=>{const _0x4765d9=_0x5157ec;hideLoading(),alert(_0x4765d9(0x258));})['catch'](_0x5ae42d=>{const _0x4d6f6b=_0x5157ec;console[_0x4d6f6b(0x253)](_0x4d6f6b(0x269),_0x5ae42d),hideLoading(),alert(_0x4d6f6b(0x221));});}}function deleteAllTicketsInCategory(_0xd825f){const _0x3933c2=_0x27545;confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20la\x20catégorie\x20'+_0xd825f+'\x20?')&&(showLoading(),database['ref'](_0x3933c2(0x20a)+_0xd825f)[_0x3933c2(0x252)]({'motDePasse':[],'prix':[],'utilisateur':[]})[_0x3933c2(0x276)](()=>{const _0x424aed=_0x3933c2;hideLoading(),alert(_0x424aed(0x263));})[_0x3933c2(0x234)](_0x54dfbd=>{const _0x1c8a0f=_0x3933c2;console[_0x1c8a0f(0x253)](_0x1c8a0f(0x269),_0x54dfbd),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets');}));}function exportTickets(){const _0x25610f=_0x27545,_0x5bfcea=_0x25610f(0x1ed)+encodeURIComponent(JSON['stringify'](allTickets,null,0x2)),_0x14625a=document['createElement']('a');_0x14625a[_0x25610f(0x213)](_0x25610f(0x228),_0x5bfcea),_0x14625a[_0x25610f(0x213)](_0x25610f(0x270),_0x25610f(0x1fd)),document[_0x25610f(0x1fa)][_0x25610f(0x277)](_0x14625a),_0x14625a[_0x25610f(0x1ec)](),_0x14625a[_0x25610f(0x1f7)]();}function exportFilteredTickets(){const _0x33baa2=_0x27545,_0x1457a6=document[_0x33baa2(0x232)](_0x33baa2(0x240))[_0x33baa2(0x239)][_0x33baa2(0x23b)](),_0x3a2505={};for(let _0x343dbf in allTickets){const _0x148e3f=allTickets[_0x343dbf];_0x3a2505[_0x343dbf]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x42ef72=0x0;_0x42ef72<_0x148e3f['motDePasse'][_0x33baa2(0x208)];_0x42ef72++){(!_0x1457a6||matchesSearch(_0x148e3f,_0x42ef72,_0x1457a6))&&(_0x3a2505[_0x343dbf][_0x33baa2(0x25b)][_0x33baa2(0x22f)](_0x148e3f['motDePasse'][_0x42ef72]),_0x3a2505[_0x343dbf]['prix'][_0x33baa2(0x22f)](_0x148e3f[_0x33baa2(0x248)][_0x42ef72]),_0x3a2505[_0x343dbf][_0x33baa2(0x25f)]['push'](_0x148e3f[_0x33baa2(0x25f)][_0x42ef72]));}}const _0x2fb436='data:text/json;charset=utf-8,'+encodeURIComponent(JSON[_0x33baa2(0x1e9)](_0x3a2505,null,0x2)),_0x15138e=document['createElement']('a');_0x15138e['setAttribute'](_0x33baa2(0x228),_0x2fb436),_0x15138e['setAttribute'](_0x33baa2(0x270),_0x33baa2(0x247)),document[_0x33baa2(0x1fa)][_0x33baa2(0x277)](_0x15138e),_0x15138e['click'](),_0x15138e[_0x33baa2(0x1f7)]();}function handleJsonImport(_0x51d71b){const _0x562b8d=_0x27545,_0x594775=JSON[_0x562b8d(0x1f4)](_0x51d71b);if(confirm(_0x562b8d(0x261))){const _0x4e570b={};for(let _0xf74830 in _0x594775){allTickets[_0xf74830]?_0x4e570b[_0x562b8d(0x20a)+_0xf74830]={'motDePasse':[...allTickets[_0xf74830][_0x562b8d(0x25b)],..._0x594775[_0xf74830][_0x562b8d(0x25b)]],'prix':[...allTickets[_0xf74830][_0x562b8d(0x248)],..._0x594775[_0xf74830][_0x562b8d(0x248)]],'utilisateur':[...allTickets[_0xf74830][_0x562b8d(0x25f)],..._0x594775[_0xf74830][_0x562b8d(0x25f)]]}:_0x4e570b[_0x562b8d(0x20a)+_0xf74830]=_0x594775[_0xf74830];}database[_0x562b8d(0x273)]()[_0x562b8d(0x256)](_0x4e570b)['then'](()=>{const _0xf4126b=_0x562b8d;hideLoading(),alert(_0xf4126b(0x24d));})['catch'](_0x168b9f=>{const _0x3a078f=_0x562b8d;console['error']('Erreur\x20lors\x20de\x20l\x27importation:',_0x168b9f),hideLoading(),alert(_0x3a078f(0x24a));});}else hideLoading();}function handleCsvImport(_0x458307){const _0x484964=_0x27545,_0x24b587=_0x458307[_0x484964(0x22c)]('\x0a'),_0x4fc21b={};for(let _0x404227=0x1;_0x404227<_0x24b587['length'];_0x404227++){if(!_0x24b587[_0x404227]['trim']())continue;const _0x44f9b8=_0x24b587[_0x404227][_0x484964(0x22c)](','),_0x514633=_0x44f9b8[0x2][_0x484964(0x23b)]();!_0x4fc21b[_0x514633]&&(_0x4fc21b[_0x514633]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x4fc21b[_0x514633][_0x484964(0x25f)][_0x484964(0x22f)](_0x44f9b8[0x0][_0x484964(0x23b)]()),_0x4fc21b[_0x514633][_0x484964(0x25b)][_0x484964(0x22f)](_0x44f9b8[0x1]['trim']());}tempImportData=_0x4fc21b;const _0x3d412d=Object['keys'](_0x4fc21b)[0x0];showPriceModal(_0x3d412d);}function handleTxtImport(_0x295d55){const _0xf0f51e=_0x27545,_0x13e105=_0x295d55['split']('\x0a'),_0x3f147b={},_0xf3558b=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x3545cc of _0x13e105){_0x3545cc=_0x3545cc['trim']();if(!_0x3545cc||_0x3545cc==='/ip\x20hotspot\x20user')continue;const _0x1ff8f5=_0x3545cc[_0xf0f51e(0x22b)](_0xf3558b);if(_0x1ff8f5){const [_0x15236e,_0x191e77,_0xd4f40,_0x294285]=_0x1ff8f5;!_0x3f147b[_0x294285]&&(_0x3f147b[_0x294285]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x3f147b[_0x294285][_0xf0f51e(0x25f)][_0xf0f51e(0x22f)](_0x191e77),_0x3f147b[_0x294285][_0xf0f51e(0x25b)]['push'](_0xd4f40);}}if(Object[_0xf0f51e(0x20d)](_0x3f147b)[_0xf0f51e(0x208)]===0x0){hideLoading(),alert(_0xf0f51e(0x264));return;}tempImportData=_0x3f147b;const _0x217f89=Object[_0xf0f51e(0x20d)](_0x3f147b)[0x0];showPriceModal(_0x217f89);}function showPriceModal(_0x72d11){const _0xa2897a=_0x27545;tempCategory=_0x72d11,document[_0xa2897a(0x232)](_0xa2897a(0x207))[_0xa2897a(0x218)]=_0x72d11,document[_0xa2897a(0x232)](_0xa2897a(0x250))[_0xa2897a(0x214)][_0xa2897a(0x1ff)]=_0xa2897a(0x246);}function confirmPrice(){const _0x117626=_0x27545,_0xd210b2=document[_0x117626(0x232)]('priceInput')[_0x117626(0x239)]['trim']();if(!_0xd210b2){alert(_0x117626(0x21d));return;}tempImportData[tempCategory]['prix']=Array(tempImportData[tempCategory]['motDePasse'][_0x117626(0x208)])[_0x117626(0x231)](_0xd210b2);const _0x55f9ee=Object[_0x117626(0x20d)](tempImportData),_0x200bf9=_0x55f9ee[_0x117626(0x266)](tempCategory);_0x200bf9<_0x55f9ee[_0x117626(0x208)]-0x1?(document['getElementById'](_0x117626(0x23e))[_0x117626(0x239)]='',showPriceModal(_0x55f9ee[_0x200bf9+0x1])):finishImport();}function cancelImport(){const _0x2fd6d6=_0x27545;document[_0x2fd6d6(0x232)](_0x2fd6d6(0x250))[_0x2fd6d6(0x214)][_0x2fd6d6(0x1ff)]=_0x2fd6d6(0x201),document['getElementById'](_0x2fd6d6(0x241))[_0x2fd6d6(0x239)]='',tempImportData=null,tempCategory=null,hideLoading();}function finishImport(){const _0x1f14a6=_0x27545;if(confirm(_0x1f14a6(0x261))){const _0x1c89fc={};for(let _0x41b795 in tempImportData){allTickets[_0x41b795]?_0x1c89fc[_0x1f14a6(0x20a)+_0x41b795]={'motDePasse':[...allTickets[_0x41b795][_0x1f14a6(0x25b)],...tempImportData[_0x41b795][_0x1f14a6(0x25b)]],'prix':[...allTickets[_0x41b795][_0x1f14a6(0x248)],...tempImportData[_0x41b795][_0x1f14a6(0x248)]],'utilisateur':[...allTickets[_0x41b795][_0x1f14a6(0x25f)],...tempImportData[_0x41b795][_0x1f14a6(0x25f)]]}:_0x1c89fc['TicketsTotal/'+_0x41b795]=tempImportData[_0x41b795];}database[_0x1f14a6(0x273)]()[_0x1f14a6(0x256)](_0x1c89fc)[_0x1f14a6(0x276)](()=>{const _0x4ce1f7=_0x1f14a6;document[_0x4ce1f7(0x232)]('priceModal')[_0x4ce1f7(0x214)][_0x4ce1f7(0x1ff)]=_0x4ce1f7(0x201),document[_0x4ce1f7(0x232)](_0x4ce1f7(0x241))['value']='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x4ce1f7(0x24d));})[_0x1f14a6(0x234)](_0x2f872c=>{const _0x21dd3c=_0x1f14a6;console[_0x21dd3c(0x253)](_0x21dd3c(0x23f),_0x2f872c),hideLoading(),alert(_0x21dd3c(0x24a));});}else cancelImport();}function importTickets(_0x5a5602){const _0x5c1cfe=_0x27545,_0x46d64b=_0x5a5602[_0x5c1cfe(0x22d)]['files'][0x0];if(!_0x46d64b)return;showLoading();const _0x5a4816=new FileReader();_0x5a4816['onload']=function(_0xdc179e){const _0xb46db4=_0x5c1cfe;try{const _0x51703e=_0x46d64b[_0xb46db4(0x21e)][_0xb46db4(0x22c)]('.')[_0xb46db4(0x20e)]()[_0xb46db4(0x254)]();if(_0x51703e==='json')handleJsonImport(_0xdc179e[_0xb46db4(0x22d)][_0xb46db4(0x21a)]);else{if(_0x51703e===_0xb46db4(0x1fe))handleCsvImport(_0xdc179e[_0xb46db4(0x22d)][_0xb46db4(0x21a)]);else{if(_0x51703e===_0xb46db4(0x216))handleTxtImport(_0xdc179e[_0xb46db4(0x22d)]['result']);else throw new Error(_0xb46db4(0x25a));}}}catch(_0x5d9803){console[_0xb46db4(0x253)]('Erreur\x20d\x27importation:',_0x5d9803),hideLoading(),alert(_0xb46db4(0x267));}},_0x5a4816[_0x5c1cfe(0x227)](_0x46d64b);}function deleteSearchResults(){const _0x29e5ed=_0x27545,_0xb25a61=document['getElementById'](_0x29e5ed(0x240))['value'][_0x29e5ed(0x23b)]();if(!_0xb25a61){alert(_0x29e5ed(0x1ee));return;}if(confirm(_0x29e5ed(0x1fb))){showLoading();const _0x413bd7={};for(let _0x43f5ae in allTickets){const _0x3db8e8=allTickets[_0x43f5ae],_0x5c44d2={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x18a8e1=0x0;_0x18a8e1<_0x3db8e8['motDePasse'][_0x29e5ed(0x208)];_0x18a8e1++){!matchesSearch(_0x3db8e8,_0x18a8e1,_0xb25a61)&&(_0x5c44d2[_0x29e5ed(0x25b)][_0x29e5ed(0x22f)](_0x3db8e8[_0x29e5ed(0x25b)][_0x18a8e1]),_0x5c44d2[_0x29e5ed(0x248)][_0x29e5ed(0x22f)](_0x3db8e8[_0x29e5ed(0x248)][_0x18a8e1]),_0x5c44d2[_0x29e5ed(0x25f)][_0x29e5ed(0x22f)](_0x3db8e8['utilisateur'][_0x18a8e1]));}_0x413bd7[_0x29e5ed(0x20a)+_0x43f5ae]=_0x5c44d2;}database['ref']()[_0x29e5ed(0x256)](_0x413bd7)['then'](()=>{const _0xaf27e1=_0x29e5ed;hideLoading(),alert(_0xaf27e1(0x236));})['catch'](_0x229b19=>{const _0x28cb7a=_0x29e5ed;console[_0x28cb7a(0x253)](_0x28cb7a(0x223),_0x229b19),hideLoading(),alert(_0x28cb7a(0x237));});}}function searchTickets(){const _0x3f47ad=_0x27545,_0xfbbe74=document[_0x3f47ad(0x232)](_0x3f47ad(0x240))[_0x3f47ad(0x239)][_0x3f47ad(0x23b)]();displayTickets(allTickets,_0xfbbe74);}document[_0x27545(0x232)](_0x27545(0x240))[_0x27545(0x26f)]('input',searchTickets),window[_0x27545(0x20f)]=loadTickets;
    </script>
</body>
</html>
