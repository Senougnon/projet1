<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets totaux</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gestion des tickets totaux</h1>
        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".json,.csv,.txt" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
const _0x277752=_0x2b51;(function(_0xffd176,_0xdf15f0){const _0x405836=_0x2b51,_0x1b65d8=_0xffd176();while(!![]){try{const _0x1540cc=parseInt(_0x405836(0x122))/0x1+parseInt(_0x405836(0x12d))/0x2+parseInt(_0x405836(0x112))/0x3*(parseInt(_0x405836(0x100))/0x4)+-parseInt(_0x405836(0xf0))/0x5+-parseInt(_0x405836(0x119))/0x6+-parseInt(_0x405836(0x109))/0x7+parseInt(_0x405836(0xfc))/0x8;if(_0x1540cc===_0xdf15f0)break;else _0x1b65d8['push'](_0x1b65d8['shift']());}catch(_0x469e2a){_0x1b65d8['push'](_0x1b65d8['shift']());}}}(_0x1d9a,0x329f0));const firebaseConfig={'apiKey':'AIzaSyDYjNFHtLL6sZBu7qNPypiFEWcTZg2e9TY','authDomain':_0x277752(0x140),'databaseURL':_0x277752(0x10d),'projectId':_0x277752(0x164),'storageBucket':_0x277752(0x14f),'messagingSenderId':'673271137298','appId':_0x277752(0x149),'measurementId':_0x277752(0x103)};firebase[_0x277752(0x12c)](firebaseConfig);const database=firebase[_0x277752(0xe0)]();let allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,editingCategory='',editingIndex=-0x1;function showLoading(){const _0x31e6a3=_0x277752;document['getElementById'](_0x31e6a3(0x12a))[_0x31e6a3(0x15f)][_0x31e6a3(0x13e)]=_0x31e6a3(0xdd);}function hideLoading(){const _0x234bdf=_0x277752;document[_0x234bdf(0xd8)](_0x234bdf(0x12a))[_0x234bdf(0x15f)]['display']=_0x234bdf(0x10a);}function loadTickets(){const _0x568220=_0x277752;showLoading();const _0x17c791=database[_0x568220(0x146)](_0x568220(0x121));_0x17c791['on'](_0x568220(0x141),_0x64e59f=>{const _0x1efae7=_0x568220;allTickets=_0x64e59f[_0x1efae7(0x11b)](),displayTickets(allTickets),hideLoading();},_0x92a29a=>{const _0x209839=_0x568220;console[_0x209839(0xe3)](_0x209839(0xec),_0x92a29a),hideLoading(),alert('Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.');});}function displayTickets(_0x1fabf4,_0x520034=''){const _0x4e3c9e=_0x277752,_0x407a4f=document[_0x4e3c9e(0xd8)]('ticketCategories');_0x407a4f['innerHTML']='';for(let _0x342d73 in _0x1fabf4){const _0x1d1e4a=_0x1fabf4[_0x342d73],_0x28210f=_0x4e3c9e(0xf8)+_0x342d73+'</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22editCategory(\x27'+_0x342d73+'\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(\x27'+_0x342d73+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_'+_0x342d73+_0x4e3c9e(0x113)+_0x342d73+_0x4e3c9e(0xfb)+_0x342d73+_0x4e3c9e(0x14b)+_0x342d73+_0x4e3c9e(0x10c)+_0x342d73+'\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20'+_0x342d73+_0x4e3c9e(0x159)+_0x342d73+_0x4e3c9e(0x12b)+_0x342d73+_0x4e3c9e(0xee)+_0x342d73+_0x4e3c9e(0xe5);_0x407a4f[_0x4e3c9e(0xf5)]+=_0x28210f;const _0x403407=document['getElementById'](_0x4e3c9e(0xd6)+_0x342d73);for(let _0x1d1721=0x0;_0x1d1721<_0x1d1e4a['motDePasse'][_0x4e3c9e(0x13d)];_0x1d1721++){if(_0x520034&&!matchesSearch(_0x1d1e4a,_0x1d1721,_0x520034))continue;const _0x240474=_0x4e3c9e(0x155)+_0x342d73+_0x4e3c9e(0x161)+_0x1d1721+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x1d1e4a[_0x4e3c9e(0x147)][_0x1d1721],_0x520034)+_0x4e3c9e(0x133)+highlightMatch(_0x1d1e4a[_0x4e3c9e(0x11d)][_0x1d1721],_0x520034)+_0x4e3c9e(0x133)+highlightMatch(_0x1d1e4a[_0x4e3c9e(0x15a)][_0x1d1721],_0x520034)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicket(\x27'+_0x342d73+_0x4e3c9e(0xe1)+_0x1d1721+_0x4e3c9e(0xf2)+_0x342d73+_0x4e3c9e(0xe1)+_0x1d1721+_0x4e3c9e(0xe7);_0x403407[_0x4e3c9e(0xf5)]+=_0x240474;}}}function editTicket(_0x705bde,_0x1e5005){const _0x100f4a=_0x277752;editingCategory=_0x705bde,editingIndex=_0x1e5005;const _0x376ee4=allTickets[_0x705bde];document[_0x100f4a(0xd8)](_0x100f4a(0x12e))['value']=_0x376ee4[_0x100f4a(0x147)][_0x1e5005],document[_0x100f4a(0xd8)](_0x100f4a(0x120))[_0x100f4a(0x141)]=_0x376ee4[_0x100f4a(0x11d)][_0x1e5005],document['getElementById']('editUser')['value']=_0x376ee4[_0x100f4a(0x15a)][_0x1e5005],document['getElementById'](_0x100f4a(0xdc))[_0x100f4a(0x15f)]['display']=_0x100f4a(0x142);}function saveTicketEdit(){const _0x2cfced=_0x277752,_0x24b777=document[_0x2cfced(0xd8)](_0x2cfced(0x12e))[_0x2cfced(0x141)],_0x248cab=document[_0x2cfced(0xd8)](_0x2cfced(0x120))['value'],_0x39e557=document[_0x2cfced(0xd8)](_0x2cfced(0x114))[_0x2cfced(0x141)];if(!_0x24b777||!_0x248cab||!_0x39e557){alert(_0x2cfced(0x124));return;}showLoading();const _0x47a08b={},_0x25ea62=allTickets[editingCategory];_0x25ea62['motDePasse'][editingIndex]=_0x24b777,_0x25ea62[_0x2cfced(0x11d)][editingIndex]=_0x248cab,_0x25ea62[_0x2cfced(0x15a)][editingIndex]=_0x39e557,_0x47a08b[_0x2cfced(0xf1)+editingCategory]=_0x25ea62,database[_0x2cfced(0x146)]()[_0x2cfced(0xe2)](_0x47a08b)[_0x2cfced(0x11a)](()=>{const _0x4a480f=_0x2cfced;hideLoading(),closeEditModal(),alert(_0x4a480f(0x131));})['catch'](_0x268197=>{const _0x136354=_0x2cfced;console['error']('Erreur\x20lors\x20de\x20la\x20modification:',_0x268197),hideLoading(),alert(_0x136354(0x15e));});}function importTicketsToCategory(_0x15d001,_0x2cfd7a){const _0x2a7c1e=_0x277752,_0x3b0e82=_0x2cfd7a[_0x2a7c1e(0x165)][_0x2a7c1e(0x126)][0x0];if(!_0x3b0e82)return;showLoading();const _0x47a621=new FileReader();_0x47a621[_0x2a7c1e(0xd9)]=function(_0x3d11ef){const _0x3fda55=_0x2a7c1e;try{const _0x5fc49d=_0x3b0e82[_0x3fda55(0x166)]['split']('.')[_0x3fda55(0xfe)]()[_0x3fda55(0x118)]();if(_0x5fc49d===_0x3fda55(0x14e))handleJsonImportToCategory(_0x3d11ef[_0x3fda55(0x165)][_0x3fda55(0x143)],_0x15d001);else{if(_0x5fc49d===_0x3fda55(0x15c))handleCsvImportToCategory(_0x3d11ef[_0x3fda55(0x165)][_0x3fda55(0x143)],_0x15d001);else{if(_0x5fc49d===_0x3fda55(0x137))handleTxtImportToCategory(_0x3d11ef[_0x3fda55(0x165)][_0x3fda55(0x143)],_0x15d001);else throw new Error('Format\x20de\x20fichier\x20non\x20supporté');}}}catch(_0x616444){console['error']('Erreur\x20d\x27importation:',_0x616444),hideLoading(),alert(_0x3fda55(0x10b));}},_0x47a621[_0x2a7c1e(0x15d)](_0x3b0e82);}function _0x1d9a(){const _0x139e09=['display','stringify','ysawifi100.firebaseapp.com','value','block','result','remove','setAttribute','ref','motDePasse','Catégorie\x20modifiée\x20avec\x20succès!','1:673271137298:web:37d619a421882a21dc44cb','split','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20la\x20catégorie\x20','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket','json','ysawifi100.appspot.com','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:','newUser','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','push','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?','Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_','utilisateur','sort','csv','readAsText','Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket','style','Format\x20JSON\x20invalide\x20ou\x20catégorie\x20non\x20trouvée','\x22\x20value=\x22','Erreur\x20lors\x20de\x20la\x20suppression:','<span\x20class=\x22highlight\x22>','ysawifi100','target','name','\x20!\x20Les\x20nouveaux\x20tickets\x20ont\x20été\x20ajoutés\x20aux\x20existants.','ticketsBody_','from','getElementById','onload','data:text/json;charset=utf-8,','newPrice','editTicketModal','flex','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie','database','\x27,\x20','update','error','match','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Veuillez\x20entrer\x20un\x20prix',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','parse','trim','editCategoryName','forEach','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','1585565bnoDqq','TicketsTotal/',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(\x27','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer','tickets_export.json','innerHTML','set','Importation\x20réussie\x20dans\x20la\x20catégorie\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>','Importation\x20réussie\x20!','fill','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_','3683048arZhMT','Erreur\x20lors\x20de\x20l\x27importation:','pop','searchBar','100876cwpzOH','addEventListener','input','G-WCX5GM4K15','createElement','input[name=\x22ticketSelect_','catch','Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!','includes','1128344UWZyDh','none','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.','\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27','https://ysawifi100-default-rtdb.firebaseio.com','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','categoryName','appendChild','splice','9cYHMca','\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20','editUser','Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.','/ip\x20hotspot\x20user','querySelectorAll','toLowerCase','1666344TCKLMO','then','val','Ticket\x20supprimé\x20avec\x20succès!','prix','body','importFile','editPrice','TicketsTotal','180963qKJWhC','Erreur\x20d\x27importation:','Tous\x20les\x20champs\x20sont\x20obligatoires','click','files','indexOf','newPassword','editCategoryModal','loadingIndicator','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27','initializeApp','492744dfDjPC','editPassword','keys','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','Ticket\x20modifié\x20avec\x20succès!','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:','map','Ticket\x20ajouté\x20avec\x20succès!','txt','download','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide','priceModal','textContent','</span>','length'];_0x1d9a=function(){return _0x139e09;};return _0x1d9a();}function handleJsonImportToCategory(_0x400435,_0x2dee0d){const _0x5e48ea=_0x277752,_0x11b8b1=JSON['parse'](_0x400435);let _0x4a8c60;if(_0x11b8b1['motDePasse'])_0x4a8c60=_0x11b8b1;else{if(_0x11b8b1[_0x2dee0d])_0x4a8c60=_0x11b8b1[_0x2dee0d];else{hideLoading(),alert(_0x5e48ea(0x160));return;}}mergeTicketsToCategory(_0x2dee0d,_0x4a8c60);}function handleCsvImportToCategory(_0x5b08ec,_0x565820){const _0x898374=_0x277752,_0x7853b2=_0x5b08ec[_0x898374(0x14a)]('\x0a'),_0x5085ce={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x3ff92d=0x1;_0x3ff92d<_0x7853b2['length'];_0x3ff92d++){if(!_0x7853b2[_0x3ff92d][_0x898374(0xe9)]())continue;const _0x13553c=_0x7853b2[_0x3ff92d]['split'](',');_0x5085ce[_0x898374(0x15a)][_0x898374(0x153)](_0x13553c[0x0][_0x898374(0xe9)]()),_0x5085ce[_0x898374(0x147)][_0x898374(0x153)](_0x13553c[0x1]['trim']()),_0x13553c[0x3]&&_0x5085ce['prix'][_0x898374(0x153)](_0x13553c[0x3]['trim']());}!_0x5085ce[_0x898374(0x11d)][_0x898374(0x13d)]?(tempImportData={[_0x565820]:_0x5085ce},tempCategory=_0x565820,showPriceModal(_0x565820)):mergeTicketsToCategory(_0x565820,_0x5085ce);}function handleTxtImportToCategory(_0x5f3094,_0x33497e){const _0x42e992=_0x277752,_0x36d150=_0x5f3094[_0x42e992(0x14a)]('\x0a'),_0x5520c5={'motDePasse':[],'prix':[],'utilisateur':[]},_0x5211ad=/add name="([^"]+)" password="([^"]+)"/;for(let _0xb9af61 of _0x36d150){_0xb9af61=_0xb9af61['trim']();if(!_0xb9af61||_0xb9af61===_0x42e992(0x116))continue;const _0x140ba2=_0xb9af61[_0x42e992(0xe4)](_0x5211ad);if(_0x140ba2){const [_0xddea00,_0xa3b70f,_0x22980a]=_0x140ba2;_0x5520c5[_0x42e992(0x15a)]['push'](_0xa3b70f),_0x5520c5['motDePasse'][_0x42e992(0x153)](_0x22980a);}}_0x5520c5[_0x42e992(0x147)][_0x42e992(0x13d)]>0x0?(tempImportData={[_0x33497e]:_0x5520c5},tempCategory=_0x33497e,showPriceModal(_0x33497e)):(hideLoading(),alert('Aucun\x20ticket\x20valide\x20trouvé\x20dans\x20le\x20fichier'));}function mergeTicketsToCategory(_0x23396c,_0xaf9d34){const _0x24f06c=_0x277752;!allTickets[_0x23396c]&&(allTickets[_0x23396c]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0x22244d=allTickets[_0x23396c],_0x91cf5c={'motDePasse':[..._0x22244d[_0x24f06c(0x147)],..._0xaf9d34[_0x24f06c(0x147)]],'prix':[..._0x22244d[_0x24f06c(0x11d)],..._0xaf9d34[_0x24f06c(0x11d)]],'utilisateur':[..._0x22244d[_0x24f06c(0x15a)],..._0xaf9d34[_0x24f06c(0x15a)]]};database['ref']('TicketsTotal/'+_0x23396c)[_0x24f06c(0xf6)](_0x91cf5c)[_0x24f06c(0x11a)](()=>{const _0x142a1d=_0x24f06c;hideLoading(),alert(_0x142a1d(0xf7)+_0x23396c+_0x142a1d(0xd5));})[_0x24f06c(0x106)](_0x42b050=>{const _0x2b4638=_0x24f06c;console['error'](_0x2b4638(0xfd),_0x42b050),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.');});}function editCategory(_0x24e52e){const _0x1908db=_0x277752;currentEditingCategory=_0x24e52e,document[_0x1908db(0xd8)](_0x1908db(0xea))[_0x1908db(0x141)]=_0x24e52e,document[_0x1908db(0xd8)](_0x1908db(0x129))[_0x1908db(0x15f)][_0x1908db(0x13e)]='block';}function saveCategoryEdit(){const _0x18328b=_0x277752,_0x3551cd=document[_0x18328b(0xd8)](_0x18328b(0xea))[_0x18328b(0x141)][_0x18328b(0xe9)]();if(!_0x3551cd){alert(_0x18328b(0x139));return;}if(_0x3551cd===currentEditingCategory){closeEditCategoryModal();return;}showLoading();const _0x270bae=allTickets[currentEditingCategory],_0x42c7d9={[_0x18328b(0xf1)+currentEditingCategory]:null,[_0x18328b(0xf1)+_0x3551cd]:_0x270bae};database[_0x18328b(0x146)]()['update'](_0x42c7d9)[_0x18328b(0x11a)](()=>{const _0x311948=_0x18328b;hideLoading(),closeEditCategoryModal(),alert(_0x311948(0x148));})[_0x18328b(0x106)](_0x23dd50=>{const _0x34f4a2=_0x18328b;console[_0x34f4a2(0xe3)](_0x34f4a2(0x150),_0x23dd50),hideLoading(),alert(_0x34f4a2(0xdf));});}function showAddTicketModal(_0xf0a940){const _0x430b71=_0x277752;currentEditingCategory=_0xf0a940,document[_0x430b71(0xd8)](_0x430b71(0x128))[_0x430b71(0x141)]='',document[_0x430b71(0xd8)](_0x430b71(0xdb))[_0x430b71(0x141)]='',document[_0x430b71(0xd8)](_0x430b71(0x151))['value']='',document[_0x430b71(0xd8)]('addTicketModal')[_0x430b71(0x15f)][_0x430b71(0x13e)]=_0x430b71(0x142);}function saveNewTicket(){const _0x34c1d0=_0x277752,_0x2d32a3=document[_0x34c1d0(0xd8)](_0x34c1d0(0x128))[_0x34c1d0(0x141)]['trim'](),_0x4b3af6=document[_0x34c1d0(0xd8)](_0x34c1d0(0xdb))['value'][_0x34c1d0(0xe9)](),_0x3b3665=document[_0x34c1d0(0xd8)](_0x34c1d0(0x151))['value']['trim']();if(!_0x2d32a3||!_0x4b3af6||!_0x3b3665){alert(_0x34c1d0(0x124));return;}showLoading();const _0x182574=allTickets[currentEditingCategory];_0x182574[_0x34c1d0(0x147)]['push'](_0x2d32a3),_0x182574[_0x34c1d0(0x11d)]['push'](_0x4b3af6),_0x182574['utilisateur'][_0x34c1d0(0x153)](_0x3b3665),database[_0x34c1d0(0x146)]('TicketsTotal/'+currentEditingCategory)[_0x34c1d0(0xf6)](_0x182574)['then'](()=>{const _0x15778c=_0x34c1d0;hideLoading(),closeAddTicketModal(),alert(_0x15778c(0x136));})[_0x34c1d0(0x106)](_0x246f37=>{const _0x4eade1=_0x34c1d0;console[_0x4eade1(0xe3)](_0x4eade1(0xde),_0x246f37),hideLoading(),alert(_0x4eade1(0x152));});}function closeEditModal(){const _0x33de7c=_0x277752;document[_0x33de7c(0xd8)](_0x33de7c(0xdc))['style'][_0x33de7c(0x13e)]=_0x33de7c(0x10a),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0x284a1d=_0x277752;document['getElementById'](_0x284a1d(0x129))[_0x284a1d(0x15f)][_0x284a1d(0x13e)]=_0x284a1d(0x10a),currentEditingCategory=null;}function closeAddTicketModal(){const _0x100092=_0x277752;document[_0x100092(0xd8)]('addTicketModal')[_0x100092(0x15f)][_0x100092(0x13e)]=_0x100092(0x10a),currentEditingCategory=null;}function matchesSearch(_0x9cdca1,_0x60561b,_0x544f7e){const _0x32ecb3=_0x277752,_0x4c151c=_0x544f7e[_0x32ecb3(0x118)]();return _0x9cdca1['motDePasse'][_0x60561b][_0x32ecb3(0x118)]()[_0x32ecb3(0x108)](_0x4c151c)||_0x9cdca1[_0x32ecb3(0x11d)][_0x60561b]['toLowerCase']()[_0x32ecb3(0x108)](_0x4c151c)||_0x9cdca1['utilisateur'][_0x60561b][_0x32ecb3(0x118)]()[_0x32ecb3(0x108)](_0x4c151c);}function highlightMatch(_0x16ed13,_0x38aec3){const _0x3f1b16=_0x277752;if(!_0x38aec3)return _0x16ed13;const _0x5270f3=new RegExp(_0x38aec3,'gi');return _0x16ed13['replace'](_0x5270f3,_0x27b163=>_0x3f1b16(0x163)+_0x27b163+_0x3f1b16(0x13c));}function deleteTicket(_0x1b1354,_0x5a3d8a){const _0xcb0ea5=_0x277752;if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?')){showLoading();const _0x5df43e=allTickets[_0x1b1354];_0x5df43e[_0xcb0ea5(0x147)][_0xcb0ea5(0x111)](_0x5a3d8a,0x1),_0x5df43e[_0xcb0ea5(0x11d)]['splice'](_0x5a3d8a,0x1),_0x5df43e['utilisateur'][_0xcb0ea5(0x111)](_0x5a3d8a,0x1),database['ref']('TicketsTotal/'+_0x1b1354)[_0xcb0ea5(0xf6)](_0x5df43e)[_0xcb0ea5(0x11a)](()=>{const _0x22f11e=_0xcb0ea5;hideLoading(),alert(_0x22f11e(0x11c));})[_0xcb0ea5(0x106)](_0x4b9c31=>{const _0x9b50d=_0xcb0ea5;console['error'](_0x9b50d(0x162),_0x4b9c31),hideLoading(),alert(_0x9b50d(0x14d));});}}function deleteSelectedTickets(_0x2e9cab){const _0x362117=_0x277752,_0x9c663c=document[_0x362117(0x117)](_0x362117(0x105)+_0x2e9cab+'\x22]:checked');if(_0x9c663c[_0x362117(0x13d)]===0x0){alert(_0x362117(0xf3));return;}if(confirm(_0x362117(0x156))){showLoading();const _0x50cfe5=allTickets[_0x2e9cab],_0x4f486e=Array[_0x362117(0xd7)](_0x9c663c)[_0x362117(0x135)](_0x519a48=>parseInt(_0x519a48[_0x362117(0x141)]))[_0x362117(0x15b)]((_0x42e65d,_0x3457fb)=>_0x3457fb-_0x42e65d);_0x4f486e[_0x362117(0xeb)](_0x103d01=>{const _0xa146f1=_0x362117;_0x50cfe5['motDePasse']['splice'](_0x103d01,0x1),_0x50cfe5[_0xa146f1(0x11d)][_0xa146f1(0x111)](_0x103d01,0x1),_0x50cfe5[_0xa146f1(0x15a)][_0xa146f1(0x111)](_0x103d01,0x1);}),database['ref'](_0x362117(0xf1)+_0x2e9cab)[_0x362117(0xf6)](_0x50cfe5)[_0x362117(0x11a)](()=>{const _0xcf7d6b=_0x362117;hideLoading(),alert(_0xcf7d6b(0x107));})['catch'](_0x21e624=>{const _0x44d7de=_0x362117;console[_0x44d7de(0xe3)](_0x44d7de(0x162),_0x21e624),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets');});}}function deleteAllTicketsInCategory(_0x42e808){const _0x2c1bb2=_0x277752;confirm(_0x2c1bb2(0x14c)+_0x42e808+'\x20?')&&(showLoading(),database[_0x2c1bb2(0x146)]('TicketsTotal/'+_0x42e808)[_0x2c1bb2(0xf6)]({'motDePasse':[],'prix':[],'utilisateur':[]})[_0x2c1bb2(0x11a)](()=>{const _0x4726d1=_0x2c1bb2;hideLoading(),alert(_0x4726d1(0x157));})[_0x2c1bb2(0x106)](_0x54ee66=>{const _0x193d97=_0x2c1bb2;console[_0x193d97(0xe3)](_0x193d97(0x162),_0x54ee66),hideLoading(),alert(_0x193d97(0xef));}));}function exportTickets(){const _0x2fabdc=_0x277752,_0x9b525d=_0x2fabdc(0xda)+encodeURIComponent(JSON['stringify'](allTickets,null,0x2)),_0x427c4d=document[_0x2fabdc(0x104)]('a');_0x427c4d['setAttribute']('href',_0x9b525d),_0x427c4d[_0x2fabdc(0x145)](_0x2fabdc(0x138),_0x2fabdc(0xf4)),document[_0x2fabdc(0x11e)][_0x2fabdc(0x110)](_0x427c4d),_0x427c4d[_0x2fabdc(0x125)](),_0x427c4d[_0x2fabdc(0x144)]();}function exportFilteredTickets(){const _0x500df6=_0x277752,_0xf8917d=document[_0x500df6(0xd8)](_0x500df6(0xff))['value'][_0x500df6(0xe9)](),_0x28ea04={};for(let _0x12af87 in allTickets){const _0x135303=allTickets[_0x12af87];_0x28ea04[_0x12af87]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x4e8955=0x0;_0x4e8955<_0x135303['motDePasse']['length'];_0x4e8955++){(!_0xf8917d||matchesSearch(_0x135303,_0x4e8955,_0xf8917d))&&(_0x28ea04[_0x12af87][_0x500df6(0x147)][_0x500df6(0x153)](_0x135303[_0x500df6(0x147)][_0x4e8955]),_0x28ea04[_0x12af87]['prix'][_0x500df6(0x153)](_0x135303['prix'][_0x4e8955]),_0x28ea04[_0x12af87][_0x500df6(0x15a)]['push'](_0x135303[_0x500df6(0x15a)][_0x4e8955]));}}const _0x8048dc='data:text/json;charset=utf-8,'+encodeURIComponent(JSON[_0x500df6(0x13f)](_0x28ea04,null,0x2)),_0x33a1f4=document['createElement']('a');_0x33a1f4[_0x500df6(0x145)]('href',_0x8048dc),_0x33a1f4[_0x500df6(0x145)](_0x500df6(0x138),'filtered_tickets_export.json'),document[_0x500df6(0x11e)]['appendChild'](_0x33a1f4),_0x33a1f4['click'](),_0x33a1f4[_0x500df6(0x144)]();}function handleJsonImport(_0x2179c3){const _0x4f91b8=_0x277752,_0x242032=JSON[_0x4f91b8(0xe8)](_0x2179c3);if(confirm(_0x4f91b8(0x154))){const _0x15403e={};for(let _0x1e5cb3 in _0x242032){allTickets[_0x1e5cb3]?_0x15403e[_0x4f91b8(0xf1)+_0x1e5cb3]={'motDePasse':[...allTickets[_0x1e5cb3][_0x4f91b8(0x147)],..._0x242032[_0x1e5cb3][_0x4f91b8(0x147)]],'prix':[...allTickets[_0x1e5cb3]['prix'],..._0x242032[_0x1e5cb3]['prix']],'utilisateur':[...allTickets[_0x1e5cb3][_0x4f91b8(0x15a)],..._0x242032[_0x1e5cb3][_0x4f91b8(0x15a)]]}:_0x15403e[_0x4f91b8(0xf1)+_0x1e5cb3]=_0x242032[_0x1e5cb3];}database[_0x4f91b8(0x146)]()[_0x4f91b8(0xe2)](_0x15403e)[_0x4f91b8(0x11a)](()=>{const _0x33923c=_0x4f91b8;hideLoading(),alert(_0x33923c(0xf9));})['catch'](_0x37b3d6=>{const _0x27b223=_0x4f91b8;console[_0x27b223(0xe3)](_0x27b223(0xfd),_0x37b3d6),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.');});}else hideLoading();}function _0x2b51(_0x138035,_0x97ca6f){const _0x1d9ae8=_0x1d9a();return _0x2b51=function(_0x2b513c,_0x21babd){_0x2b513c=_0x2b513c-0xd5;let _0x114d8=_0x1d9ae8[_0x2b513c];return _0x114d8;},_0x2b51(_0x138035,_0x97ca6f);}function handleCsvImport(_0x147ffb){const _0x314a40=_0x277752,_0x3f4e7e=_0x147ffb[_0x314a40(0x14a)]('\x0a'),_0x442a68={};for(let _0x33b8b1=0x1;_0x33b8b1<_0x3f4e7e['length'];_0x33b8b1++){if(!_0x3f4e7e[_0x33b8b1][_0x314a40(0xe9)]())continue;const _0x30128a=_0x3f4e7e[_0x33b8b1][_0x314a40(0x14a)](','),_0x42e577=_0x30128a[0x2][_0x314a40(0xe9)]();!_0x442a68[_0x42e577]&&(_0x442a68[_0x42e577]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x442a68[_0x42e577]['utilisateur'][_0x314a40(0x153)](_0x30128a[0x0][_0x314a40(0xe9)]()),_0x442a68[_0x42e577][_0x314a40(0x147)][_0x314a40(0x153)](_0x30128a[0x1][_0x314a40(0xe9)]());}tempImportData=_0x442a68;const _0x1b2b1b=Object[_0x314a40(0x12f)](_0x442a68)[0x0];showPriceModal(_0x1b2b1b);}function handleTxtImport(_0x3aec6a){const _0x4d5037=_0x277752,_0x111141=_0x3aec6a[_0x4d5037(0x14a)]('\x0a'),_0x32326c={},_0x59ea88=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x1269ce of _0x111141){_0x1269ce=_0x1269ce[_0x4d5037(0xe9)]();if(!_0x1269ce||_0x1269ce===_0x4d5037(0x116))continue;const _0x5e2120=_0x1269ce[_0x4d5037(0xe4)](_0x59ea88);if(_0x5e2120){const [_0x5a969a,_0x3d04dd,_0x3cc607,_0x87ec14]=_0x5e2120;!_0x32326c[_0x87ec14]&&(_0x32326c[_0x87ec14]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x32326c[_0x87ec14][_0x4d5037(0x15a)][_0x4d5037(0x153)](_0x3d04dd),_0x32326c[_0x87ec14][_0x4d5037(0x147)]['push'](_0x3cc607);}}if(Object[_0x4d5037(0x12f)](_0x32326c)[_0x4d5037(0x13d)]===0x0){hideLoading(),alert(_0x4d5037(0xed));return;}tempImportData=_0x32326c;const _0x51340f=Object[_0x4d5037(0x12f)](_0x32326c)[0x0];showPriceModal(_0x51340f);}function showPriceModal(_0x5b2308){const _0x2e0a15=_0x277752;tempCategory=_0x5b2308,document[_0x2e0a15(0xd8)](_0x2e0a15(0x10f))[_0x2e0a15(0x13b)]=_0x5b2308,document[_0x2e0a15(0xd8)](_0x2e0a15(0x13a))[_0x2e0a15(0x15f)][_0x2e0a15(0x13e)]=_0x2e0a15(0x142);}function confirmPrice(){const _0x28fef7=_0x277752,_0x5a03cf=document[_0x28fef7(0xd8)]('priceInput')[_0x28fef7(0x141)][_0x28fef7(0xe9)]();if(!_0x5a03cf){alert(_0x28fef7(0xe6));return;}tempImportData[tempCategory][_0x28fef7(0x11d)]=Array(tempImportData[tempCategory][_0x28fef7(0x147)][_0x28fef7(0x13d)])[_0x28fef7(0xfa)](_0x5a03cf);const _0x547841=Object[_0x28fef7(0x12f)](tempImportData),_0x315ad5=_0x547841[_0x28fef7(0x127)](tempCategory);_0x315ad5<_0x547841[_0x28fef7(0x13d)]-0x1?(document[_0x28fef7(0xd8)]('priceInput')[_0x28fef7(0x141)]='',showPriceModal(_0x547841[_0x315ad5+0x1])):finishImport();}function cancelImport(){const _0xff880c=_0x277752;document['getElementById'](_0xff880c(0x13a))[_0xff880c(0x15f)][_0xff880c(0x13e)]='none',document['getElementById'](_0xff880c(0x11f))[_0xff880c(0x141)]='',tempImportData=null,tempCategory=null,hideLoading();}function finishImport(){const _0x58dda4=_0x277752;if(confirm(_0x58dda4(0x154))){const _0x3188d3={};for(let _0x426d0e in tempImportData){allTickets[_0x426d0e]?_0x3188d3[_0x58dda4(0xf1)+_0x426d0e]={'motDePasse':[...allTickets[_0x426d0e][_0x58dda4(0x147)],...tempImportData[_0x426d0e][_0x58dda4(0x147)]],'prix':[...allTickets[_0x426d0e][_0x58dda4(0x11d)],...tempImportData[_0x426d0e][_0x58dda4(0x11d)]],'utilisateur':[...allTickets[_0x426d0e]['utilisateur'],...tempImportData[_0x426d0e][_0x58dda4(0x15a)]]}:_0x3188d3['TicketsTotal/'+_0x426d0e]=tempImportData[_0x426d0e];}database[_0x58dda4(0x146)]()['update'](_0x3188d3)[_0x58dda4(0x11a)](()=>{const _0x461b80=_0x58dda4;document[_0x461b80(0xd8)]('priceModal')[_0x461b80(0x15f)]['display']=_0x461b80(0x10a),document['getElementById']('importFile')[_0x461b80(0x141)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x461b80(0xf9));})[_0x58dda4(0x106)](_0x4a877e=>{const _0x58ee28=_0x58dda4;console[_0x58ee28(0xe3)]('Erreur\x20lors\x20de\x20l\x27importation:',_0x4a877e),hideLoading(),alert(_0x58ee28(0x132));});}else cancelImport();}function importTickets(_0x469d6d){const _0x48fa70=_0x277752,_0x3e6a85=_0x469d6d['target'][_0x48fa70(0x126)][0x0];if(!_0x3e6a85)return;showLoading();const _0x38a082=new FileReader();_0x38a082['onload']=function(_0x3129d9){const _0x1cb6ed=_0x48fa70;try{const _0x22c5ba=_0x3e6a85['name'][_0x1cb6ed(0x14a)]('.')['pop']()[_0x1cb6ed(0x118)]();if(_0x22c5ba===_0x1cb6ed(0x14e))handleJsonImport(_0x3129d9['target'][_0x1cb6ed(0x143)]);else{if(_0x22c5ba===_0x1cb6ed(0x15c))handleCsvImport(_0x3129d9[_0x1cb6ed(0x165)][_0x1cb6ed(0x143)]);else{if(_0x22c5ba==='txt')handleTxtImport(_0x3129d9['target'][_0x1cb6ed(0x143)]);else throw new Error('Format\x20de\x20fichier\x20non\x20supporté');}}}catch(_0x4d93b5){console[_0x1cb6ed(0xe3)](_0x1cb6ed(0x123),_0x4d93b5),hideLoading(),alert(_0x1cb6ed(0x10b));}},_0x38a082[_0x48fa70(0x15d)](_0x3e6a85);}function deleteSearchResults(){const _0xcd03d2=_0x277752,_0x8d13f2=document[_0xcd03d2(0xd8)](_0xcd03d2(0xff))[_0xcd03d2(0x141)]['trim']();if(!_0x8d13f2){alert(_0xcd03d2(0x158));return;}if(confirm(_0xcd03d2(0x130))){showLoading();const _0x367b55={};for(let _0x50c337 in allTickets){const _0xcb0880=allTickets[_0x50c337],_0x137464={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x46ed36=0x0;_0x46ed36<_0xcb0880[_0xcd03d2(0x147)][_0xcd03d2(0x13d)];_0x46ed36++){!matchesSearch(_0xcb0880,_0x46ed36,_0x8d13f2)&&(_0x137464[_0xcd03d2(0x147)][_0xcd03d2(0x153)](_0xcb0880[_0xcd03d2(0x147)][_0x46ed36]),_0x137464[_0xcd03d2(0x11d)][_0xcd03d2(0x153)](_0xcb0880['prix'][_0x46ed36]),_0x137464[_0xcd03d2(0x15a)][_0xcd03d2(0x153)](_0xcb0880[_0xcd03d2(0x15a)][_0x46ed36]));}_0x367b55[_0xcd03d2(0xf1)+_0x50c337]=_0x137464;}database[_0xcd03d2(0x146)]()[_0xcd03d2(0xe2)](_0x367b55)[_0xcd03d2(0x11a)](()=>{const _0x2879e2=_0xcd03d2;hideLoading(),alert(_0x2879e2(0x115));})[_0xcd03d2(0x106)](_0x210a60=>{const _0x46c73d=_0xcd03d2;console[_0x46c73d(0xe3)](_0x46c73d(0x134),_0x210a60),hideLoading(),alert(_0x46c73d(0x10e));});}}function searchTickets(){const _0x153bed=_0x277752,_0x558ac3=document['getElementById'](_0x153bed(0xff))['value'][_0x153bed(0xe9)]();displayTickets(allTickets,_0x558ac3);}document[_0x277752(0xd8)](_0x277752(0xff))[_0x277752(0x101)](_0x277752(0x102),searchTickets),window['onload']=loadTickets;
    </script>
</body>
</html>
